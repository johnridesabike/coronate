{"version":3,"sources":["icon-min.svg","side-effects.js","serviceWorker.js","Data.bs.js","Utils.bs.js","DemoData.bs.js","Externals.bs.js","Hooks.bs.js","Icons.bs.js","electron-utils.js","ElectronUtils.bs.js","Snippets.bs.js","Window.bs.js","Pages.bs.js","TestData.bs.js","PageOptions.bs.js","Scoring.bs.js","Converters.bs.js","PagePlayers.bs.js","Pairing.bs.js","PageTournament/PageTourneyPlayers.bs.js","PageTournament/PairPicker.bs.js","PageTournament/PageRound.bs.js","PageTournament/TournamentDataReducers.bs.js","PageTournament/TournamentData.bs.js","PageTournament/PageTourneySetup.bs.js","PageTournament/PageTourneyScores.bs.js","PageTournament/PageTournamentStatus.bs.js","PageTournament/PageTourneyCrossTable.bs.js","PageTournament/PageTourney.bs.js","PageTournamentList.bs.js","App.bs.js","index.jsx"],"names":["module","exports","__webpack_require__","p","r","__webpack_exports__","numeral__WEBPACK_IMPORTED_MODULE_0__","n","numeral","register","format","value","roundingFunction","whole","Math","floor","remainder","fraction","String","regexps","unformat","Number","Boolean","window","location","hostname","match","dummy_id","dummyPlayer","makeMissingPlayer","id","Player","param","firstName","lastName","matchCount","rating","type_","playerId","playerDict","match$1","Js_dict","undefined","playerMap","Belt_MapString","tToJs$1","whiteId","blackId","whiteNewRating","blackNewRating","whiteOrigRating","blackOrigRating","whiteScore","blackScore","tFromJs$1","Tournament","byeQueue","date","name","playerIds","roundList","tieBreaks","tourney","map","round","Date","db_optionsToJs","avoidPairs","byeValue","lastBackup","db_optionsFromJs","defaultOptions","rounds2Matches","lastRound","param$1","slice","reduce","acc","concat","getUnmatched","players","roundId","Belt_Array","matchedIds","match_","unmatched","forEach","player","includes","isRoundComplete","length","results","Caml_array","Object","keys","descend","prim","prim$1","prim$2","Ramda","ascend","alert","nanoid","Nanoid","absf","abs","sortWith","confirm","move","addFloat","a","b","arraySumFloat","arr","last","WebpackAssets","require","Entities","dateFormat","Intl","DateTimeFormat","day","month","year","timeFormat","hour","minute","Utils$DateOrTimeFormat","Props","dtFormatObj","React","dateTime","toISOString","DateFormat","$$Notification","match$4","children","kind","tooltip","match$2","className","match$3","style","Caml_option","ReactFeather","Cn","aria-label","title","Panel","PanelContainer","options","tournaments","LocalForage","DataType","storeName","Localforage","createInstance","sortedTableReducer","state","action","newState","tag","sortFunc","direction","Utils$Coronate","Curry","func","str","toLowerCase","table","Belt_SortArray","useSortedTable","key","isDescending","initialState","dispatch","SortButton","sortKey","data","chevronStyle","opacity","width","onClick","Block","VisuallyHidden","useLoadingCursor","isLoaded","document","body","cursor","LocalforageGetitems","LocalforageSetitems","LocalforageRemoveitems","optionsStore","Players","Externals$Coronate","playerStore","Tournaments","tourneyStore","jsDictToReMap","dict","transformer","reMapToJsDict","genericDbReducer","useAllItemsFromDb","store","reducer","fromJs","toJs","items","setIsLoaded","didCancel","getItems","then","Promise","resolve","setItems","stateKeys","deleted","filter","x","removeItems","optionsReducer","user2","user1","p2","p1","Db","all","Data$Coronate","DemoData$Coronate","catch","valuesJs","values","Icons$SimpleIcon","icon","role","fill","hex","dangerouslySetInnerHTML","__html","svg","Reason$1","Reason","ReactIcon","React$1","Close","height","viewBox","xmlns","d","Maximize","Minimize","Restore","electron","ifElectron","fn","toggleMaximize","win","isMaximized","unmaximize","maximize","ifElectronOpen","event","url","preventDefault","shell","openExternal","macOSDoubleClick","target","doubleClickAction","getUserDefault","remote","systemPreferences","getCurrentWindow","minimize","PropTypes","node","isRequired","bool","currentWindow","ElectronUtilsJs","isElectron","isWin","navigator","appVersion","isMac","IfElectron","onlyWin","onlyMac","github_url","license_url","About","display","justifyContent","textAlign","flex","alt","src","join","href","e","ElectronUtils$Coronate","global_title","formatTitle","initialWinState","windowContext","makeProps","make","Provider","useWindowContext","windowReducer","toolbarClasses","Window$WindowsControls","middleButton","setFullScreen","Icons$Coronate","close","Window$WindowTitleBar","onDoubleClick","marginRight","marginLeft","alignItems","left","position","right","$$Window","unregisterListeners","removeAllListeners","on","isFocused","func$1","Dialog","isOpen","onDismiss","backgroundColor","Snippets$Coronate","noDraggy","Window$DefaultSidebar","margin","onDragStart","sidebarCallback","WindowBody","footerFunc","sidebarFunc","issues_url","Pages$CautionFooter","aria-hidden","Splash","Window$Coronate","Hooks$Coronate","fontSize","NotFound","getDateForFile","getFullYear","toString","Numeral","getMonth","getDay","decodeWith","json","Belt_Option","Js_json","decodePlayer","decodeTourney","decodeOptions","jsonToData","PageOptions$LastBackupDate","getTime","tourneysDispatch","playersDispatch","setText","text","optionsDispatch","windowDispatch","exportData","match$5","JSON","stringify","exportDataURI","encodeURIComponent","loadData","tourneys","checked","type","onChange","download","htmlFor","$$event","reader","FileReader","onload","ev","rawJson","result","exit","parse","exn","readAsText","currentTarget","files","onSubmit","spellCheck","cols","rows","newText","isNotDummy","scoreDict","oppId","getPlayerScore","getOpponentScores","runningReducer","score","getCumulativeScore","tieBreakMethods","getNamefromIndex","index","createBlankScoreData","createStandingList","methods","scoreData","selectedTieBreakFuncs","i","standings","sortTieBreakFuncList","createStandingTree","standingList","standing","standing1","standing2","lastIndex","getKFactor","ne","Caml_int32","keepAboveFloor","colorToScore","color","dummyId","matches2ScoreData","matchList","makeScoreData","origRating","newRating","oldData","Scoring$Coronate","newRatings","newResultsNoByes","newOpponentResults","oppResult","newDataWhite","newDataBlack","avoidPairReducer","pair","id2","id1","currentArr1","newArr1","currentArr2","newArr2","sortName","sortRating","sortMatchCount","defaultFirstName","defaultLastName","defaultRating","PagePlayers$NewPlayerForm","setFirstName","setLastName","setRating","updateField","Caml_format","required","NewPlayerForm","PagePlayers$List","sorted","sortDispatch","setIsDialogOpen","$$event$1","playerOpt","PagePlayers$Profile","playerName","avoidObj","Converters$Coronate","singAvoidList","unavoided","setSelectedAvoider","selectedAvoider","handleChange","defaultValue","disabled","readOnly","pId","newSelected","onBlur","tmp","Pages$Coronate","halfPosition","sameHalfPriority","maxPriority","calcPairIdeal","player1","player2","isDiffDueColor","metBefore","mustAvoid","scoreDiff","halfDiff","Pervasives","descendingRating","setUpperHalves","nextData","dataList","playerData","upperHalfIds","isUpperHalf","halfPos","indexOf","newPlayerData","partial_arg","sortByScoreThenRating","assignColorsForPair","netScore","netRating","partial_arg$1","pair1","pair2","sortByNetScoreThenRating","PageTourneyPlayers$Selecting","tourneyDispatch","togglePlayer","PagePlayers$Coronate","Selecting","PageTourneyPlayers$PlayerList","tournament","activePlayers","setIsSelecting","matches","colSpan","flexShrink","sortByName","sortByIdeal","PairPicker$SelectList","pairData","stagedPlayers","setStagedPlayers","stagePlayersOption_000","stagePlayersOption_001","stagePlayersOption","sortedDispatch","isNullSelected","isOnePlayerSelected","isPlayerSelectable","calcIdealOrNot","selectedId","Pairing$Coronate","PairPicker$Stage","whiteName","blackName","getPlayer","stagedPlayersOption_000","stagedPlayersOption_001","blackOpt","whiteOpt","noneAreSelected","twoAreSelected","player$1","matchIdeal","unstage","ideal","PairPicker$PlayerInfo","avoidDict","colorScores","opponentResults","colorBalance","hasBye","avoidList","prettyBalance","opId","unmatchedCount","unmatchedWithDummy","setIsModalOpen","playerStats","newAvoidIds","newData","flexGrow","PageTourneyPlayers$Coronate","PageRound$PlayerMatchInfo","oppResultsEntries","jsMapperConstantArray","resultCodesToJs","Js_mapperRt","PageRound$MatchRow","isCompact","pos","selectedMatch","setSelectedMatch","resultCode","whitePlayer","blackPlayer","isDummyRound","resultDisplay","setMatchResult","jsResultCode","safeCode","newBlackScore","newWhiteScore","white","black","param$2","blackRating","whiteRating","whiteElo","EloRank","blackElo","whiteScoreExpected","getExpected","blackScoreExpected","updateRating","tmp$1","scoreData$1","scope","PageRound$RoundTable","RoundTable","findById","list","PageRound$Round","moveMatch","matchId","oldIndex","newIndex","matchList$1","PageRound$PageRoundBase","activePlayersCount","initialTab","setOpenTab","Tabs","PairPicker$Coronate","PageRound$WithRoundData","scoreByeMatch","autoPair","filteredData","datum","dataForNextBye","playersWithoutByes","nextByeSignups","byePlayerData","pairs","playerIdArray","playerArray","EdmondsBlossom","accArr","playerMatches","Infinity","p1Index","p2Index","matched","pairsWithBye","manualPair","tournamentReducer","idToDel","tbId","roundId$1","roundList$1","roundId$2","roundList$2","matchIndex","findIndex","roundId$3","matchId$1","roundList$3","roundId$4","matchId$2","roundList$4","matchIndex$1","oldMatch","roundId$5","roundList$5","newValue","roundList$6","playersReducer","id$1","player$2","emptyTourney","tourneyId","TournamentDataReducers$Coronate","setIsTourneyLoaded","isTourneyLoaded","setIsPlayersLoaded","isPlayersLoaded","setIsDbError","getItem","allTheIds","newIds","oldIds","changedPlayers","console","log","roundCount","playerCount","ceil","log2","isFinite","calcNumOfRounds","isItOver","isNewRoundReady","makeDateInput","rawMonth","rawDate","getDate","setEditing","editing","nameInput","dateInput","focusRef","myref","current","focus","ref","split","year$1","month$1","aria-describedby","PageTourneyScores$ScoreTable","tieBreakNames","standingTree","standingsFlat","rank","rowSpan","j","ScoreTable","PageTourneyScores$SelectTieBreaks","setSelectedTb","selectedTb","defaultId","toggleTb","moveTb","marginTop","m","lastRoundId","PageRound$Coronate","PageTourneyScores$Coronate","opponent","index2","player1Id","player2Id","getXScore","firstRating","lastRating","change","getRatingChangeTds","PageTourney$Footer","tooltipText","minHeight","PageTourney$Sidebar","basePath","ReasonReactRouter","hashPath","TournamentData$Coronate","PageTourneyCrossTable$Coronate","PageTourneySetup$Coronate","PageTournamentStatus$Coronate","dateSort","nameSort","setNewTourneyName","newTourneyName","t","newId","newTourney","placeholder","hashString","Belt_List","PageOptions$Coronate","PageTourney$Coronate","PageTournamentList$Coronate","ReactDOM","render","react_default","createElement","react","App_bs_make","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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CK,QACP,wBACM,OACE,EACJ,KACD,WAGJ,CACT,wBACY,CACK,QACP,wBACM,SACE,EACJ,KACD,WAGJ,CACT,wBACY,CACK,SACP,wBACM,QACE,EACJ,KACD,WAGJ,CACT,wBACY,CACK,QACP,wBACM,GACE,EACJ,KACD,WAGJ,CACT,wBACY,CACK,SACP,wBACM,QACE,EACJ,KACD,WAGJ,CACT,wBACY,CACK,SACP,wBACM,QACE,EACJ,IACD,WAGJ,CACT,wBACY,CACK,SACP,wBACM,YACE,EACJ,KACD,WAGJ,CACT,wBACY,CACK,OACP,wBACM,UACE,EACJ,KACD,WAGJ,CACT,wBACY,CACK,SACP,wBACM,QACE,EACJ,IACD,WAGJ,CACT,wBACY,CACK,SACP,wBACM,QACE,EACJ,IACD,WAGJ,CACT,wBACY,CACK,WACP,wBACM,QACE,EACJ,IACD,WAGJ,CACT,wBACY,CACK,SACP,wBACM,OACE,EACJ,KACD,WAGJ,CACT,wBACY,CACK,OACP,wBACM,UACE,EACJ,IACD,aAKjB2G,GAAc3G,IAAoC,CACrC,CACT,wBACY,CACY,GACZ,IAAIqB,KAAK,4BACX,wBACE,mBACa,CACrB,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,yBAEqB,CACV,CACG,CACF,wBACK,wBACA,wBACO,KACA,KACC,KACA,KACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,KACA,KACC,KACA,KACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,KACA,KACC,KACA,KACL,GACA,IAEN,CACF,wBACK,wBACA,wBACO,KACA,KACC,KACA,KACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,IACA,EACC,IACA,EACL,EACA,IAGT,CACG,CACF,wBACK,wBACA,wBACO,KACA,KACC,KACA,KACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,KACA,IACC,KACA,IACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,KACA,KACC,KACA,KACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,KACA,KACC,KACA,KACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,KACA,EACC,KACA,EACL,EACA,IAGT,CACG,CACF,wBACK,wBACA,wBACO,KACA,KACC,KACA,KACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,IACA,KACC,IACA,KACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,KACA,KACC,KACA,KACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,KACA,KACC,KACA,KACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,KACA,EACC,KACA,EACL,EACA,IAGT,CACG,CACF,wBACK,wBACA,wBACO,KACA,KACC,KACA,KACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,KACA,KACC,KACA,KACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,IACA,KACC,IACA,KACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,KACA,KACC,KACA,KACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,KACA,EACC,KACA,EACL,EACA,KAIC,CACrB,EACA,EACA,EACA,KAIK,CACT,wBACY,CACY,GACZ,IAAIA,KAAK,4BACX,wBACE,6BACa,CACrB,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,yBAEqB,CAAY,CACnB,CACF,wBACK,wBACA,wBACO,IACA,KACC,IACA,KACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,IACA,KACC,IACA,KACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,KACA,KACC,IACA,KACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,KACA,KACC,KACA,KACL,GACA,IAEN,CACF,wBACK,wBACA,wBACO,KACA,KACC,KACA,KACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,IACA,KACC,IACA,KACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,KACA,KACC,KACA,KACL,EACA,GAEN,CACF,wBACK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,WAGJ,CACT,wBACY,CACK,QACP,wBACM,GACE,GACJ,KACD,WAGJ,CACT,wBACY,CACK,OACP,wBACM,WACE,GACJ,KACD,WAGJ,CACT,wBACY,CACK,QACP,wBACM,SACE,GACJ,KACD,WAGJ,CACT,wBACY,CACK,QACP,wBACM,YACE,GACJ,KACD,WAGJ,CACT,wBACY,CACK,QACP,wBACM,UACE,GACJ,KACD,WAGJ,CACT,wBACY,CACK,OACP,wBACM,SACE,GACJ,KACD,WAGJ,CACT,wBACY,CACK,SACP,wBACM,cACE,EACJ,IACD,WAGJ,CACT,wBACY,CACK,QACP,wBACM,MACE,GACJ,KACD,WAGJ,CACT,wBACY,CACK,QACP,wBACM,YACE,GACJ,IACD,WAGJ,CACT,wBACY,CACK,OACP,wBACM,YACE,GACJ,IACD,WAGJ,CACT,wBACY,CACK,OACP,wBACM,QACE,GACJ,KACD,WAGJ,CACT,wBACY,CACK,OACP,wBACM,MACE,GACJ,KACD,WAGJ,CACT,wBACY,CACK,MACP,wBACM,QACE,GACJ,KACD,aAKHA,IAAoC,CACrC,CACT,wBACY,CACY,GACZ,IAAIqB,KAAK,4BACX,wBACE,oBACa,CACrB,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,yBAEqB,CAAY,IACZ,CACrB,EACA,EACA,EACA,KAIK,CACT,wBACY,CACY,GACZ,IAAIA,KAAK,4BACX,wBACE,sBACa,CACrB,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,yBAEqB,CAAY,CACnB,CACF,wBACK,wBACA,wBACO,KACA,KACC,KACA,KACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,KACA,KACC,KACA,KACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,KACA,KACC,KACA,KACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,IACA,EACC,IACA,EACL,EACA,KAGC,CACrB,EACA,EACA,EACA,KAIK,CACT,wBACY,CACY,GACZ,IAAIA,KAAK,4BACX,wBACE,gBACa,CACrB,wBACA,wBACA,yBAEqB,CACV,CACG,CACF,wBACK,wBACA,wBACO,KACA,KACC,KACA,KACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,IACA,EACC,IACA,EACL,EACA,IAGT,CACG,CACF,wBACK,wBACA,wBACO,KACA,IACC,KACA,IACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,KACA,EACC,KACA,EACL,EACA,IAGT,CACG,CACF,wBACK,wBACA,wBACO,IACA,KACC,IACA,KACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,KACA,EACC,KACA,EACL,EACA,KAIC,CACrB,EACA,EACA,EACA,KAIK,CACT,wBACY,CACY,GACZ,IAAIA,KAAK,4BACX,wBACE,iBACa,CACrB,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,yBAEqB,CACV,CACG,CACF,wBACK,wBACA,wBACO,KACA,KACC,KACA,KACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,KACA,KACC,KACA,KACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,KACA,KACC,KACA,KACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,KACA,KACC,IACA,KACL,EACA,IAGT,IAEU,CACrB,EACA,EACA,EACA,KAIK,CACT,wBACY,CACY,GACZ,IAAIA,KAAK,4BACX,wBACE,qBACa,CACrB,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,yBAEqB,CACV,CACG,CACF,wBACK,wBACA,wBACO,KACA,KACC,KACA,KACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,KACA,KACC,KACA,KACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,KACA,KACC,KACA,KACL,EACA,GAEN,CACF,wBACK,wBACA,wBACO,KACA,KACC,IACA,KACL,GACA,KAGT,IAEU,CACrB,EACA,EACA,EACA,OCphBZ,SAASgS,GAAejU,GACtB,IAAIyB,EAAO,IAAIQ,KACf,MAAkB,CACRR,EAAKyS,cAAcC,WACnBC,KAAgB3S,EAAK4S,WAAa,GAAK3V,OAAO,MAC9C0V,KAAgB3S,EAAK6S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","file":"static/js/main.c8128fe9.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/icon-min.53b3e3eb.svg\";","import numeral from \"numeral\";\n\n// let's make a custom numeral format. I don't really know how this works.\nnumeral.register(\"format\", \"fraction\", {\n    // eslint-disable-next-line no-unused-vars\n    format: function (value, format, roundingFunction) {\n        const whole = Math.floor(value);\n        const remainder = value - whole;\n        const fraction = (function () {\n            switch (remainder) {\n            case 0.25:\n                return \"\";\n            case 0.5:\n                return \"\";\n            case 0.75:\n                return \"\";\n            default:\n                return \"\";\n            }\n        }());\n        const stringedWhole = whole === 0 && remainder ? \"\" : String(whole);\n        return stringedWhole + fraction;\n    },\n    regexps: {\n        format: /(1\\/2)/,\n        unformat: /(1\\/2)/\n    },\n    unformat: function (value) {\n        // TODO: This doesn't do anything currently\n        return Number(value);\n    }\n});\n","/* eslint-disable */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets;\n      // see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","// Generated by BUCKLESCRIPT VERSION 6.0.3, PLEASE EDIT WITH CARE\n\nimport * as Js_dict from \"bs-platform/lib/es6/js_dict.js\";\nimport * as Belt_Array from \"bs-platform/lib/es6/belt_Array.js\";\nimport * as Caml_array from \"bs-platform/lib/es6/caml_array.js\";\nimport * as Belt_MapString from \"bs-platform/lib/es6/belt_MapString.js\";\n\nvar dummy_id = \"________DUMMY________\";\n\nfunction tToJs(param) {\n  return {\n          firstName: param[/* firstName */0],\n          id: param[/* id */1],\n          lastName: param[/* lastName */2],\n          matchCount: param[/* matchCount */3],\n          rating: param[/* rating */4],\n          type_: param[/* type_ */5]\n        };\n}\n\nfunction tFromJs(param) {\n  return /* record */[\n          /* firstName */param.firstName,\n          /* id */param.id,\n          /* lastName */param.lastName,\n          /* matchCount */param.matchCount,\n          /* rating */param.rating,\n          /* type_ */param.type_\n        ];\n}\n\nfunction isDummyId(playerId) {\n  return playerId === dummy_id;\n}\n\nvar dummyPlayer = /* record */[\n  /* firstName */\"Bye\",\n  /* id */dummy_id,\n  /* lastName */\"Player\",\n  /* matchCount */0,\n  /* rating */0,\n  /* type_ */\"dummy\"\n];\n\nfunction makeMissingPlayer(id) {\n  return /* record */[\n          /* firstName */\"Anonymous\",\n          /* id */id,\n          /* lastName */\"Player\",\n          /* matchCount */0,\n          /* rating */0,\n          /* type_ */\"missing\"\n        ];\n}\n\nfunction getPlayerMaybe(playerDict, id) {\n  var match = id === dummy_id;\n  if (match) {\n    return dummyPlayer;\n  } else {\n    var match$1 = Js_dict.get(playerDict, id);\n    if (match$1 !== undefined) {\n      return match$1;\n    } else {\n      return makeMissingPlayer(id);\n    }\n  }\n}\n\nfunction getPlayerMaybeMap(playerMap, id) {\n  var match = id === dummy_id;\n  if (match) {\n    return dummyPlayer;\n  } else {\n    return Belt_MapString.getWithDefault(playerMap, id, makeMissingPlayer(id));\n  }\n}\n\nvar Player = /* module */[\n  /* tToJs */tToJs,\n  /* tFromJs */tFromJs,\n  /* isDummyId */isDummyId,\n  /* dummyPlayer */dummyPlayer,\n  /* makeMissingPlayer */makeMissingPlayer,\n  /* getPlayerMaybe */getPlayerMaybe,\n  /* getPlayerMaybeMap */getPlayerMaybeMap\n];\n\nfunction tToJs$1(param) {\n  return {\n          id: param[/* id */0],\n          whiteId: param[/* whiteId */1],\n          blackId: param[/* blackId */2],\n          whiteNewRating: param[/* whiteNewRating */3],\n          blackNewRating: param[/* blackNewRating */4],\n          whiteOrigRating: param[/* whiteOrigRating */5],\n          blackOrigRating: param[/* blackOrigRating */6],\n          whiteScore: param[/* whiteScore */7],\n          blackScore: param[/* blackScore */8]\n        };\n}\n\nfunction tFromJs$1(param) {\n  return /* record */[\n          /* id */param.id,\n          /* whiteId */param.whiteId,\n          /* blackId */param.blackId,\n          /* whiteNewRating */param.whiteNewRating,\n          /* blackNewRating */param.blackNewRating,\n          /* whiteOrigRating */param.whiteOrigRating,\n          /* blackOrigRating */param.blackOrigRating,\n          /* whiteScore */param.whiteScore,\n          /* blackScore */param.blackScore\n        ];\n}\n\nvar Match = /* module */[\n  /* tToJs */tToJs$1,\n  /* tFromJs */tFromJs$1\n];\n\nfunction tToJs$2(param) {\n  return {\n          byeQueue: param[/* byeQueue */0],\n          date: param[/* date */1],\n          id: param[/* id */2],\n          name: param[/* name */3],\n          playerIds: param[/* playerIds */4],\n          roundList: param[/* roundList */5],\n          tieBreaks: param[/* tieBreaks */6]\n        };\n}\n\nfunction tFromJs$2(param) {\n  return /* record */[\n          /* byeQueue */param.byeQueue,\n          /* date */param.date,\n          /* id */param.id,\n          /* name */param.name,\n          /* playerIds */param.playerIds,\n          /* roundList */param.roundList,\n          /* tieBreaks */param.tieBreaks\n        ];\n}\n\nfunction tToJsDeep(tourney) {\n  return {\n          byeQueue: tourney[/* byeQueue */0],\n          date: tourney[/* date */1],\n          id: tourney[/* id */2],\n          name: tourney[/* name */3],\n          playerIds: tourney[/* playerIds */4],\n          roundList: tourney[/* roundList */5].map((function (round) {\n                  return round.map(tToJs$1);\n                })),\n          tieBreaks: tourney[/* tieBreaks */6]\n        };\n}\n\nfunction tFromJsDeep(tourney) {\n  return /* record */[\n          /* byeQueue */tourney.byeQueue,\n          /* date */tourney.date,\n          /* id */tourney.id,\n          /* name */tourney.name,\n          /* playerIds */tourney.playerIds,\n          /* roundList */tourney.roundList.map((function (round) {\n                  return round.map(tFromJs$1);\n                })),\n          /* tieBreaks */tourney.tieBreaks\n        ];\n}\n\nfunction tFromJsonDeep(tourney) {\n  return /* record */[\n          /* byeQueue */tourney.byeQueue,\n          /* date */new Date(tourney.date),\n          /* id */tourney.id,\n          /* name */tourney.name,\n          /* playerIds */tourney.playerIds,\n          /* roundList */tourney.roundList.map((function (round) {\n                  return round.map(tFromJs$1);\n                })),\n          /* tieBreaks */tourney.tieBreaks\n        ];\n}\n\nvar Tournament = /* module */[\n  /* tToJs */tToJs$2,\n  /* tFromJs */tFromJs$2,\n  /* tToJsDeep */tToJsDeep,\n  /* tFromJsDeep */tFromJsDeep,\n  /* tFromJsonDeep */tFromJsonDeep\n];\n\nfunction db_optionsToJs(param) {\n  return {\n          avoidPairs: param[/* avoidPairs */0],\n          byeValue: param[/* byeValue */1],\n          lastBackup: param[/* lastBackup */2]\n        };\n}\n\nfunction db_optionsFromJs(param) {\n  return /* record */[\n          /* avoidPairs */param.avoidPairs,\n          /* byeValue */param.byeValue,\n          /* lastBackup */param.lastBackup\n        ];\n}\n\nvar defaultOptions_000 = /* avoidPairs : array */[];\n\nvar defaultOptions_002 = /* lastBackup */new Date(0.0);\n\nvar defaultOptions = /* record */[\n  defaultOptions_000,\n  /* byeValue */1.0,\n  defaultOptions_002\n];\n\nfunction rounds2Matches(roundList, lastRound, param) {\n  var rounds = lastRound !== undefined ? (function (param) {\n            return (function (param$1) {\n                return roundList.slice(param, param$1);\n              });\n          })(0)(lastRound + 1 | 0) : roundList;\n  return rounds.reduce((function (acc, round) {\n                return acc.concat(round);\n              }), /* array */[]);\n}\n\nfunction getUnmatched(roundList, players, roundId) {\n  var match = Belt_Array.get(roundList, roundId);\n  var matchList = match !== undefined ? match : /* array */[];\n  var matchedIds = matchList.reduce((function (acc, match_) {\n          return acc.concat(/* array */[\n                      match_[/* whiteId */1],\n                      match_[/* blackId */2]\n                    ]);\n        }), /* array */[]);\n  var unmatched = { };\n  Belt_MapString.valuesToArray(players).forEach((function (player) {\n          if (matchedIds.includes(player[/* id */1])) {\n            return 0;\n          } else {\n            unmatched[player[/* id */1]] = player;\n            return /* () */0;\n          }\n        }));\n  return unmatched;\n}\n\nfunction isRoundComplete(roundList, players, roundId) {\n  var match = roundId < (roundList.length - 1 | 0);\n  if (match) {\n    return true;\n  } else {\n    var unmatched = getUnmatched(roundList, players, roundId);\n    var results = Caml_array.caml_array_get(roundList, roundId).map((function (match_) {\n            return match_[/* whiteScore */7] + match_[/* blackScore */8];\n          }));\n    if (Object.keys(unmatched).length === 0) {\n      return !results.includes(0.0);\n    } else {\n      return false;\n    }\n  }\n}\n\nvar win = 1.0;\n\nvar loss = 0.0;\n\nvar draw = 0.5;\n\nexport {\n  win ,\n  loss ,\n  draw ,\n  dummy_id ,\n  Player ,\n  Match ,\n  Tournament ,\n  db_optionsToJs ,\n  db_optionsFromJs ,\n  defaultOptions ,\n  rounds2Matches ,\n  getUnmatched ,\n  isRoundComplete ,\n  \n}\n/* defaultOptions Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 6.0.3, PLEASE EDIT WITH CARE\n\nimport * as Cn from \"re-classnames/src/Cn.bs.js\";\nimport * as Ramda from \"ramda\";\nimport * as React from \"react\";\nimport * as Nanoid from \"nanoid\";\nimport * as Belt_List from \"bs-platform/lib/es6/belt_List.js\";\nimport * as Caml_array from \"bs-platform/lib/es6/caml_array.js\";\nimport * as Caml_option from \"bs-platform/lib/es6/caml_option.js\";\nimport * as ReactFeather from \"react-feather\";\n\nfunction splitAt(prim, prim$1) {\n  return Ramda.splitAt(prim, prim$1);\n}\n\nfunction descend(prim, prim$1, prim$2) {\n  return Ramda.descend(prim, prim$1, prim$2);\n}\n\nfunction ascend(prim, prim$1, prim$2) {\n  return Ramda.ascend(prim, prim$1, prim$2);\n}\n\nfunction alert(prim) {\n  window.alert(prim);\n  return /* () */0;\n}\n\nfunction nanoid(prim) {\n  return Nanoid.default();\n}\n\nfunction absf(prim) {\n  return Math.abs(prim);\n}\n\nfunction sortWith(prim, prim$1) {\n  return Ramda.sortWith(prim, prim$1);\n}\n\nfunction sortWithF(prim, prim$1) {\n  return Ramda.sortWith(prim, prim$1);\n}\n\nfunction confirm(prim) {\n  return window.confirm(prim);\n}\n\nfunction move(prim, prim$1, prim$2) {\n  return Ramda.move(prim, prim$1, prim$2);\n}\n\nfunction add(a, b) {\n  return a + b | 0;\n}\n\nfunction arraySum(arr) {\n  return arr.reduce(add, 0);\n}\n\nfunction addFloat(a, b) {\n  return a + b;\n}\n\nfunction arraySumFloat(arr) {\n  return arr.reduce(addFloat, 0.0);\n}\n\nfunction last(arr) {\n  return Caml_array.caml_array_get(arr, arr.length - 1 | 0);\n}\n\nfunction splitInHalf(arr) {\n  return Ramda.splitAt(arr.length / 2 | 0, arr);\n}\n\nvar logo = ( require(\"./icon-min.svg\") );\n\nvar WebpackAssets = /* module */[/* logo */logo];\n\nvar Entities = /* module */[\n  /* nbsp */\"\\xa0\",\n  /* copy */\"\\xa9\"\n];\n\nfunction hashPath(hashString) {\n  return Belt_List.fromArray(hashString.split(\"/\"));\n}\n\nvar dateFormat = (\n  new Intl.DateTimeFormat(\n      \"en-US\",\n      {\n          day: \"2-digit\",\n          month: \"short\",\n          year: \"numeric\"\n      }\n  )\n);\n\nvar timeFormat = (\n  new Intl.DateTimeFormat(\n      \"en-US\",\n      {\n          day: \"2-digit\",\n          month: \"short\",\n          year: \"numeric\",\n          hour: \"2-digit\",\n          minute: \"2-digit\"\n      }\n  )\n);\n\nfunction Utils$DateOrTimeFormat(Props) {\n  var dtFormatObj = Props.dtFormatObj;\n  var date = Props.date;\n  return React.createElement(\"time\", {\n              dateTime: date.toISOString()\n            }, dtFormatObj.format(date));\n}\n\nvar DateOrTimeFormat = /* module */[/* make */Utils$DateOrTimeFormat];\n\nfunction Utils$DateFormat(Props) {\n  var date = Props.date;\n  return React.createElement(Utils$DateOrTimeFormat, {\n              dtFormatObj: dateFormat,\n              date: date\n            });\n}\n\nvar DateFormat = /* module */[/* make */Utils$DateFormat];\n\nfunction Utils$DateTimeFormat(Props) {\n  var date = Props.date;\n  return React.createElement(Utils$DateOrTimeFormat, {\n              dtFormatObj: timeFormat,\n              date: date\n            });\n}\n\nvar DateTimeFormat = /* module */[/* make */Utils$DateTimeFormat];\n\nfunction Utils$Notification(Props) {\n  var children = Props.children;\n  var match = Props.kind;\n  var kind = match !== undefined ? match : /* Generic */3;\n  var match$1 = Props.tooltip;\n  var tooltip = match$1 !== undefined ? match$1 : \"\";\n  var match$2 = Props.className;\n  var className = match$2 !== undefined ? match$2 : \"\";\n  var match$3 = Props.style;\n  var style = match$3 !== undefined ? Caml_option.valFromOption(match$3) : { };\n  var match$4;\n  switch (kind) {\n    case 0 : \n        match$4 = /* tuple */[\n          React.createElement(ReactFeather.Check, { }),\n          \"notification__success\"\n        ];\n        break;\n    case 1 : \n        match$4 = /* tuple */[\n          React.createElement(ReactFeather.AlertTriangle, { }),\n          \"notification__warning\"\n        ];\n        break;\n    case 2 : \n        match$4 = /* tuple */[\n          React.createElement(ReactFeather.X, { }),\n          \"notification__error\"\n        ];\n        break;\n    case 3 : \n        match$4 = /* tuple */[\n          React.createElement(ReactFeather.Info, { }),\n          \"notification__generic\"\n        ];\n        break;\n    \n  }\n  return React.createElement(\"div\", {\n              className: Cn.make(/* :: */[\n                    \"notification\",\n                    /* :: */[\n                      match$4[1],\n                      /* :: */[\n                        className,\n                        /* [] */0\n                      ]\n                    ]\n                  ]),\n              style: style\n            }, React.createElement(\"div\", {\n                  \"aria-label\": tooltip,\n                  className: \"notifcation__icon\",\n                  title: tooltip\n                }, match$4[0]), React.createElement(\"div\", {\n                  className: \"notification__text\"\n                }, children));\n}\n\nvar $$Notification = /* module */[/* make */Utils$Notification];\n\nfunction Utils$Panel(Props) {\n  var children = Props.children;\n  var match = Props.className;\n  var className = match !== undefined ? match : \"\";\n  var match$1 = Props.style;\n  var style = match$1 !== undefined ? Caml_option.valFromOption(match$1) : { };\n  return React.createElement(\"div\", {\n              className: Cn.make(/* :: */[\n                    \"utility__panel\",\n                    /* :: */[\n                      className,\n                      /* [] */0\n                    ]\n                  ]),\n              style: style\n            }, children);\n}\n\nvar Panel = /* module */[/* make */Utils$Panel];\n\nfunction Utils$PanelContainer(Props) {\n  var children = Props.children;\n  var match = Props.className;\n  var className = match !== undefined ? match : \"\";\n  var match$1 = Props.style;\n  var style = match$1 !== undefined ? Caml_option.valFromOption(match$1) : { };\n  return React.createElement(\"div\", {\n              className: Cn.make(/* :: */[\n                    \"utility__panels\",\n                    /* :: */[\n                      className,\n                      /* [] */0\n                    ]\n                  ]),\n              style: style\n            }, children);\n}\n\nvar PanelContainer = /* module */[/* make */Utils$PanelContainer];\n\nvar Tabs = 0;\n\nvar VisuallyHidden = 0;\n\nvar Dialog = 0;\n\nexport {\n  Tabs ,\n  VisuallyHidden ,\n  Dialog ,\n  splitAt ,\n  descend ,\n  ascend ,\n  alert ,\n  nanoid ,\n  absf ,\n  sortWith ,\n  sortWithF ,\n  confirm ,\n  move ,\n  add ,\n  arraySum ,\n  addFloat ,\n  arraySumFloat ,\n  last ,\n  splitInHalf ,\n  WebpackAssets ,\n  Entities ,\n  hashPath ,\n  dateFormat ,\n  timeFormat ,\n  DateOrTimeFormat ,\n  DateFormat ,\n  DateTimeFormat ,\n  $$Notification ,\n  Panel ,\n  PanelContainer ,\n  \n}\n/* logo Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 6.0.3, PLEASE EDIT WITH CARE\n\nimport * as Belt_MapString from \"bs-platform/lib/es6/belt_MapString.js\";\n\nvar options_000 = /* avoidPairs : array */[\n  /* tuple */[\n    \"BarbaraGordon_cL6SpI2\",\n    \"JamesGordon_1ts9xICT3\"\n  ],\n  /* tuple */[\n    \"Joker_v0z2416fpAZ9o2c\",\n    \"HarleyQuinn_-10-02VPH\"\n  ],\n  /* tuple */[\n    \"HelenaWayne_fE6O0DJcE\",\n    \"BruceWayne_lv_ZsUHTU9\"\n  ]\n];\n\nvar options_002 = /* lastBackup */new Date(\"1970-01-01T00:00:00.000Z\");\n\nvar options = /* record */[\n  options_000,\n  /* byeValue */1.0,\n  options_002\n];\n\nvar players = Belt_MapString.fromArray(/* array */[\n      /* tuple */[\n        \"BruceWayne_lv_ZsUHTU9\",\n        /* record */[\n          /* firstName */\"Bruce\",\n          /* id */\"BruceWayne_lv_ZsUHTU9\",\n          /* lastName */\"Wayne\",\n          /* matchCount */9,\n          /* rating */1998,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"DickGrayson_1C2rCokHH\",\n        /* record */[\n          /* firstName */\"Dick\",\n          /* id */\"DickGrayson_1C2rCokHH\",\n          /* lastName */\"Grayson\",\n          /* matchCount */9,\n          /* rating */1909,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"AlfredPennyworth_y4dW\",\n        /* record */[\n          /* firstName */\"Alfred\",\n          /* id */\"AlfredPennyworth_y4dW\",\n          /* lastName */\"Pennyworth\",\n          /* matchCount */9,\n          /* rating */1999,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"BarbaraGordon_cL6SpI2\",\n        /* record */[\n          /* firstName */\"Barbara\",\n          /* id */\"BarbaraGordon_cL6SpI2\",\n          /* lastName */\"Gordon\",\n          /* matchCount */7,\n          /* rating */1345,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"KateKane_klFW6gDfUOTX\",\n        /* record */[\n          /* firstName */\"Kate\",\n          /* id */\"KateKane_klFW6gDfUOTX\",\n          /* lastName */\"Kane\",\n          /* matchCount */9,\n          /* rating */1539,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"SelinaKyle_rJBH-45Xoy\",\n        /* record */[\n          /* firstName */\"Selina\",\n          /* id */\"SelinaKyle_rJBH-45Xoy\",\n          /* lastName */\"Kyle\",\n          /* matchCount */9,\n          /* rating */1495,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"JasonTodd_fc9CeOa-Luw\",\n        /* record */[\n          /* firstName */\"Jason\",\n          /* id */\"JasonTodd_fc9CeOa-Luw\",\n          /* lastName */\"Todd\",\n          /* matchCount */7,\n          /* rating */1101,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"JamesGordon_1ts9xICT3\",\n        /* record */[\n          /* firstName */\"James\",\n          /* id */\"JamesGordon_1ts9xICT3\",\n          /* lastName */\"Gordon\",\n          /* matchCount */7,\n          /* rating */1167,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"HelenaWayne_fE6O0DJcE\",\n        /* record */[\n          /* firstName */\"Helena\",\n          /* id */\"HelenaWayne_fE6O0DJcE\",\n          /* lastName */\"Wayne\",\n          /* matchCount */7,\n          /* rating */1087,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"Joker_v0z2416fpAZ9o2c\",\n        /* record */[\n          /* firstName */\"Joker\",\n          /* id */\"Joker_v0z2416fpAZ9o2c\",\n          /* lastName */\"\",\n          /* matchCount */1,\n          /* rating */1538,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"HarleyQuinn_-10-02VPH\",\n        /* record */[\n          /* firstName */\"Harley\",\n          /* id */\"HarleyQuinn_-10-02VPH\",\n          /* lastName */\"Quinn\",\n          /* matchCount */1,\n          /* rating */1648,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"VictorFries_cWaQoW014\",\n        /* record */[\n          /* firstName */\"Victor\",\n          /* id */\"VictorFries_cWaQoW014\",\n          /* lastName */\"Fries\",\n          /* matchCount */1,\n          /* rating */862,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"OswaldCobblepot_lfCro\",\n        /* record */[\n          /* firstName */\"Oswald\",\n          /* id */\"OswaldCobblepot_lfCro\",\n          /* lastName */\"Cobblepot\",\n          /* matchCount */1,\n          /* rating */1812,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"RasAlGhul_k9n8k852bHr\",\n        /* record */[\n          /* firstName */\"Ra's\",\n          /* id */\"RasAlGhul_k9n8k852bHr\",\n          /* lastName */\"al Ghul\",\n          /* matchCount */1,\n          /* rating */1404,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"PamelaIsley_vH5vD8uPB\",\n        /* record */[\n          /* firstName */\"Pamela\",\n          /* id */\"PamelaIsley_vH5vD8uPB\",\n          /* lastName */\"Isley\",\n          /* matchCount */1,\n          /* rating */965,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"EdwardNigma_j80JfWOZq\",\n        /* record */[\n          /* firstName */\"Edward\",\n          /* id */\"EdwardNigma_j80JfWOZq\",\n          /* lastName */\"Nigma\",\n          /* matchCount */1,\n          /* rating */948,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"JonathanCrane_R4Q8tVW\",\n        /* record */[\n          /* firstName */\"Jonathan\",\n          /* id */\"JonathanCrane_R4Q8tVW\",\n          /* lastName */\"Crane\",\n          /* matchCount */1,\n          /* rating */899,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"HarveyDent_0eYIiP_Ij5\",\n        /* record */[\n          /* firstName */\"Harvey\",\n          /* id */\"HarveyDent_0eYIiP_Ij5\",\n          /* lastName */\"Dent\",\n          /* matchCount */1,\n          /* rating */1649,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"HugoStrange_az43f9mtS\",\n        /* record */[\n          /* firstName */\"Hugo\",\n          /* id */\"HugoStrange_az43f9mtS\",\n          /* lastName */\"Strange\",\n          /* matchCount */0,\n          /* rating */800,\n          /* type_ */\"person\"\n        ]\n      ]\n    ]);\n\nvar tournaments = Belt_MapString.fromArray(/* array */[\n      /* tuple */[\n        \"CaouTNel9k70jUJ0h6SYM\",\n        /* record */[\n          /* byeQueue : array */[],\n          /* date */new Date(\"2019-05-22T12:14:47.670Z\"),\n          /* id */\"CaouTNel9k70jUJ0h6SYM\",\n          /* name */\"Wayne Manor Open\",\n          /* playerIds : array */[\n            \"BruceWayne_lv_ZsUHTU9\",\n            \"DickGrayson_1C2rCokHH\",\n            \"AlfredPennyworth_y4dW\",\n            \"BarbaraGordon_cL6SpI2\",\n            \"KateKane_klFW6gDfUOTX\",\n            \"SelinaKyle_rJBH-45Xoy\",\n            \"JasonTodd_fc9CeOa-Luw\",\n            \"JamesGordon_1ts9xICT3\",\n            \"HelenaWayne_fE6O0DJcE\"\n          ],\n          /* roundList : array */[\n            /* array */[\n              /* record */[\n                /* id */\"FUASEeyES6ez_ROoT6qmU\",\n                /* whiteId */\"JasonTodd_fc9CeOa-Luw\",\n                /* blackId */\"DickGrayson_1C2rCokHH\",\n                /* whiteNewRating */1236,\n                /* blackNewRating */2109,\n                /* whiteOrigRating */1238,\n                /* blackOrigRating */2108,\n                /* whiteScore */0.0,\n                /* blackScore */1.0\n              ],\n              /* record */[\n                /* id */\"gqPyD66QMPF-pup41xsB2\",\n                /* whiteId */\"JamesGordon_1ts9xICT3\",\n                /* blackId */\"AlfredPennyworth_y4dW\",\n                /* whiteNewRating */1049,\n                /* blackNewRating */2260,\n                /* whiteOrigRating */1049,\n                /* blackOrigRating */2260,\n                /* whiteScore */0.0,\n                /* blackScore */1.0\n              ],\n              /* record */[\n                /* id */\"KpS1lQSzsQWQ3VVWJyA2P\",\n                /* whiteId */\"KateKane_klFW6gDfUOTX\",\n                /* blackId */\"BarbaraGordon_cL6SpI2\",\n                /* whiteNewRating */1553,\n                /* blackNewRating */1722,\n                /* whiteOrigRating */1527,\n                /* blackOrigRating */1755,\n                /* whiteScore */0.5,\n                /* blackScore */0.5\n              ],\n              /* record */[\n                /* id */\"OgFuy-wq8mz378EWat46u\",\n                /* whiteId */\"SelinaKyle_rJBH-45Xoy\",\n                /* blackId */\"BruceWayne_lv_ZsUHTU9\",\n                /* whiteNewRating */1278,\n                /* blackNewRating */1887,\n                /* whiteOrigRating */1284,\n                /* blackOrigRating */1881,\n                /* whiteScore */0.0,\n                /* blackScore */1.0\n              ],\n              /* record */[\n                /* id */\"f8Ps3GUmd0ZRsBBY8rZOp\",\n                /* whiteId */\"HelenaWayne_fE6O0DJcE\",\n                /* blackId */\"________DUMMY________\",\n                /* whiteNewRating */831,\n                /* blackNewRating */0,\n                /* whiteOrigRating */831,\n                /* blackOrigRating */0,\n                /* whiteScore */1.0,\n                /* blackScore */0.0\n              ]\n            ],\n            /* array */[\n              /* record */[\n                /* id */\"6seKrw7ehbhL766g6L2PF\",\n                /* whiteId */\"DickGrayson_1C2rCokHH\",\n                /* blackId */\"KateKane_klFW6gDfUOTX\",\n                /* whiteNewRating */2122,\n                /* blackNewRating */1672,\n                /* whiteOrigRating */2109,\n                /* blackOrigRating */1685,\n                /* whiteScore */1.0,\n                /* blackScore */0.0\n              ],\n              /* record */[\n                /* id */\"TCSjz48ZXqjamtYUFNg0B\",\n                /* whiteId */\"BruceWayne_lv_ZsUHTU9\",\n                /* blackId */\"HelenaWayne_fE6O0DJcE\",\n                /* whiteNewRating */1887,\n                /* blackNewRating */830,\n                /* whiteOrigRating */1887,\n                /* blackOrigRating */831,\n                /* whiteScore */1.0,\n                /* blackScore */0.0\n              ],\n              /* record */[\n                /* id */\"zF64DEsN8sHydpDDsg37E\",\n                /* whiteId */\"AlfredPennyworth_y4dW\",\n                /* blackId */\"SelinaKyle_rJBH-45Xoy\",\n                /* whiteNewRating */2101,\n                /* blackNewRating */1437,\n                /* whiteOrigRating */2260,\n                /* blackOrigRating */1278,\n                /* whiteScore */0.0,\n                /* blackScore */1.0\n              ],\n              /* record */[\n                /* id */\"qVGt1EJq9y0MmvFtumM0A\",\n                /* whiteId */\"BarbaraGordon_cL6SpI2\",\n                /* blackId */\"JasonTodd_fc9CeOa-Luw\",\n                /* whiteNewRating */1574,\n                /* blackNewRating */1207,\n                /* whiteOrigRating */1545,\n                /* blackOrigRating */1236,\n                /* whiteScore */1.0,\n                /* blackScore */0.0\n              ],\n              /* record */[\n                /* id */\"UhfHaRWr_-BtVo22xAuJu\",\n                /* whiteId */\"JamesGordon_1ts9xICT3\",\n                /* blackId */\"________DUMMY________\",\n                /* whiteNewRating */1049,\n                /* blackNewRating */0,\n                /* whiteOrigRating */1049,\n                /* blackOrigRating */0,\n                /* whiteScore */1.0,\n                /* blackScore */0.0\n              ]\n            ],\n            /* array */[\n              /* record */[\n                /* id */\"odrOOnZJUe0YAwkfUDqUb\",\n                /* whiteId */\"AlfredPennyworth_y4dW\",\n                /* blackId */\"BruceWayne_lv_ZsUHTU9\",\n                /* whiteNewRating */1998,\n                /* blackNewRating */1990,\n                /* whiteOrigRating */2101,\n                /* blackOrigRating */1887,\n                /* whiteScore */0.0,\n                /* blackScore */1.0\n              ],\n              /* record */[\n                /* id */\"qzCMqUwNIDAcFSAuA5yCm\",\n                /* whiteId */\"HelenaWayne_fE6O0DJcE\",\n                /* blackId */\"DickGrayson_1C2rCokHH\",\n                /* whiteNewRating */990,\n                /* blackNewRating */2008,\n                /* whiteOrigRating */830,\n                /* blackOrigRating */2122,\n                /* whiteScore */1.0,\n                /* blackScore */0.0\n              ],\n              /* record */[\n                /* id */\"6QgVqdtcJPjfVp3UZ8S9g\",\n                /* whiteId */\"SelinaKyle_rJBH-45Xoy\",\n                /* blackId */\"BarbaraGordon_cL6SpI2\",\n                /* whiteNewRating */1529,\n                /* blackNewRating */1464,\n                /* whiteOrigRating */1437,\n                /* blackOrigRating */1574,\n                /* whiteScore */1.0,\n                /* blackScore */0.0\n              ],\n              /* record */[\n                /* id */\"as45gODKMLC5-3_UsTyx5\",\n                /* whiteId */\"KateKane_klFW6gDfUOTX\",\n                /* blackId */\"JamesGordon_1ts9xICT3\",\n                /* whiteNewRating */1542,\n                /* blackNewRating */1244,\n                /* whiteOrigRating */1672,\n                /* blackOrigRating */1049,\n                /* whiteScore */0.0,\n                /* blackScore */1.0\n              ],\n              /* record */[\n                /* id */\"Pc0CWecSfeGNfvBPjyEIj\",\n                /* whiteId */\"JasonTodd_fc9CeOa-Luw\",\n                /* blackId */\"________DUMMY________\",\n                /* whiteNewRating */1207,\n                /* blackNewRating */0,\n                /* whiteOrigRating */1207,\n                /* blackOrigRating */0,\n                /* whiteScore */1.0,\n                /* blackScore */0.0\n              ]\n            ],\n            /* array */[\n              /* record */[\n                /* id */\"xj0y_Iqkb-g3MDGgmYx2-\",\n                /* whiteId */\"BruceWayne_lv_ZsUHTU9\",\n                /* blackId */\"KateKane_klFW6gDfUOTX\",\n                /* whiteNewRating */1998,\n                /* blackNewRating */1534,\n                /* whiteOrigRating */1990,\n                /* blackOrigRating */1542,\n                /* whiteScore */1.0,\n                /* blackScore */0.0\n              ],\n              /* record */[\n                /* id */\"HWYWtsyaqUkHRExM6kQrt\",\n                /* whiteId */\"DickGrayson_1C2rCokHH\",\n                /* blackId */\"JamesGordon_1ts9xICT3\",\n                /* whiteNewRating */2009,\n                /* blackNewRating */1243,\n                /* whiteOrigRating */2008,\n                /* blackOrigRating */1244,\n                /* whiteScore */1.0,\n                /* blackScore */0.0\n              ],\n              /* record */[\n                /* id */\"uAzHZVMC71liQZ-6fWWeD\",\n                /* whiteId */\"HelenaWayne_fE6O0DJcE\",\n                /* blackId */\"SelinaKyle_rJBH-45Xoy\",\n                /* whiteNewRating */983,\n                /* blackNewRating */1534,\n                /* whiteOrigRating */990,\n                /* blackOrigRating */1529,\n                /* whiteScore */0.0,\n                /* blackScore */1.0\n              ],\n              /* record */[\n                /* id */\"_tCBn9YNIyto-vXpxm7WI\",\n                /* whiteId */\"JasonTodd_fc9CeOa-Luw\",\n                /* blackId */\"AlfredPennyworth_y4dW\",\n                /* whiteNewRating */1205,\n                /* blackNewRating */1999,\n                /* whiteOrigRating */1207,\n                /* blackOrigRating */1998,\n                /* whiteScore */0.0,\n                /* blackScore */1.0\n              ],\n              /* record */[\n                /* id */\"L7yatE2oVKlV7LOY6-d7Y\",\n                /* whiteId */\"BarbaraGordon_cL6SpI2\",\n                /* blackId */\"________DUMMY________\",\n                /* whiteNewRating */1464,\n                /* blackNewRating */0,\n                /* whiteOrigRating */1464,\n                /* blackOrigRating */0,\n                /* whiteScore */1.0,\n                /* blackScore */0.0\n              ]\n            ]\n          ],\n          /* tieBreaks : array */[\n            0,\n            1,\n            2,\n            3\n          ]\n        ]\n      ],\n      /* tuple */[\n        \"tvAdS4YbSOznrBgrg0ITA\",\n        /* record */[\n          /* byeQueue : array */[],\n          /* date */new Date(\"2019-05-29T12:15:20.593Z\"),\n          /* id */\"tvAdS4YbSOznrBgrg0ITA\",\n          /* name */\"The Battle for Gotham City\",\n          /* playerIds : array */[\n            \"BruceWayne_lv_ZsUHTU9\",\n            \"DickGrayson_1C2rCokHH\",\n            \"AlfredPennyworth_y4dW\",\n            \"BarbaraGordon_cL6SpI2\",\n            \"KateKane_klFW6gDfUOTX\",\n            \"SelinaKyle_rJBH-45Xoy\",\n            \"JasonTodd_fc9CeOa-Luw\",\n            \"JamesGordon_1ts9xICT3\",\n            \"HelenaWayne_fE6O0DJcE\",\n            \"Joker_v0z2416fpAZ9o2c\",\n            \"HarleyQuinn_-10-02VPH\",\n            \"VictorFries_cWaQoW014\",\n            \"OswaldCobblepot_lfCro\",\n            \"RasAlGhul_k9n8k852bHr\",\n            \"PamelaIsley_vH5vD8uPB\",\n            \"EdwardNigma_j80JfWOZq\",\n            \"JonathanCrane_R4Q8tVW\",\n            \"HarveyDent_0eYIiP_Ij5\"\n          ],\n          /* roundList : array */[/* array */[\n              /* record */[\n                /* id */\"5f8GYcR8V44NYvTN1cZle\",\n                /* whiteId */\"EdwardNigma_j80JfWOZq\",\n                /* blackId */\"BruceWayne_lv_ZsUHTU9\",\n                /* whiteNewRating */948,\n                /* blackNewRating */1998,\n                /* whiteOrigRating */950,\n                /* blackOrigRating */1998,\n                /* whiteScore */0.0,\n                /* blackScore */1.0\n              ],\n              /* record */[\n                /* id */\"GPTct4sL368SryTLFUu8E\",\n                /* whiteId */\"JonathanCrane_R4Q8tVW\",\n                /* blackId */\"AlfredPennyworth_y4dW\",\n                /* whiteNewRating */899,\n                /* blackNewRating */1999,\n                /* whiteOrigRating */900,\n                /* blackOrigRating */1999,\n                /* whiteScore */0.0,\n                /* blackScore */1.0\n              ],\n              /* record */[\n                /* id */\"AxtoztZ6O19nyrLfZ4YaU\",\n                /* whiteId */\"HarveyDent_0eYIiP_Ij5\",\n                /* blackId */\"DickGrayson_1C2rCokHH\",\n                /* whiteNewRating */1649,\n                /* blackNewRating */1909,\n                /* whiteOrigRating */850,\n                /* blackOrigRating */2009,\n                /* whiteScore */1.0,\n                /* blackScore */0.0\n              ],\n              /* record */[\n                /* id */\"bUM_tWQsAtPe1gqRzlXd1\",\n                /* whiteId */\"RasAlGhul_k9n8k852bHr\",\n                /* blackId */\"SelinaKyle_rJBH-45Xoy\",\n                /* whiteNewRating */1404,\n                /* blackNewRating */1495,\n                /* whiteOrigRating */1050,\n                /* blackOrigRating */1534,\n                /* whiteScore */0.5,\n                /* blackScore */0.5\n              ],\n              /* record */[\n                /* id */\"bAOVlP-M5xaPk1qofNReb\",\n                /* whiteId */\"OswaldCobblepot_lfCro\",\n                /* blackId */\"BarbaraGordon_cL6SpI2\",\n                /* whiteNewRating */1812,\n                /* blackNewRating */1345,\n                /* whiteOrigRating */1100,\n                /* blackOrigRating */1464,\n                /* whiteScore */1.0,\n                /* blackScore */0.0\n              ],\n              /* record */[\n                /* id */\"4omlgiGSaE1BmrHdABSym\",\n                /* whiteId */\"PamelaIsley_vH5vD8uPB\",\n                /* blackId */\"KateKane_klFW6gDfUOTX\",\n                /* whiteNewRating */965,\n                /* blackNewRating */1539,\n                /* whiteOrigRating */1000,\n                /* blackOrigRating */1534,\n                /* whiteScore */0.0,\n                /* blackScore */1.0\n              ],\n              /* record */[\n                /* id */\"ysdEVYS2AyuKyOAwLLpTF\",\n                /* whiteId */\"HarleyQuinn_-10-02VPH\",\n                /* blackId */\"JamesGordon_1ts9xICT3\",\n                /* whiteNewRating */1648,\n                /* blackNewRating */1167,\n                /* whiteOrigRating */1200,\n                /* blackOrigRating */1242,\n                /* whiteScore */1.0,\n                /* blackScore */0.0\n              ],\n              /* record */[\n                /* id */\"YoJ9WGokAYrmJjfxCCf87\",\n                /* whiteId */\"VictorFries_cWaQoW014\",\n                /* blackId */\"Joker_v0z2416fpAZ9o2c\",\n                /* whiteNewRating */862,\n                /* blackNewRating */1538,\n                /* whiteOrigRating */1150,\n                /* blackOrigRating */1250,\n                /* whiteScore */0.0,\n                /* blackScore */1.0\n              ],\n              /* record */[\n                /* id */\"Az7SBl3cs7rbwKPBI0IsU\",\n                /* whiteId */\"HelenaWayne_fE6O0DJcE\",\n                /* blackId */\"JasonTodd_fc9CeOa-Luw\",\n                /* whiteNewRating */1087,\n                /* blackNewRating */1101,\n                /* whiteOrigRating */983,\n                /* blackOrigRating */1205,\n                /* whiteScore */1.0,\n                /* blackScore */0.0\n              ]\n            ]],\n          /* tieBreaks : array */[\n            0,\n            1,\n            2,\n            3\n          ]\n        ]\n      ]\n    ]);\n\nexport {\n  options ,\n  players ,\n  tournaments ,\n  \n}\n/* options Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 6.0.3, PLEASE EDIT WITH CARE\n\nimport * as Localforage from \"localforage\";\n\nvar Numeral = /* module */[];\n\nfunction Instance(DataType) {\n  var create = function (name, storeName) {\n    return Localforage.default.createInstance({\n                name: name,\n                storeName: storeName\n              });\n  };\n  return /* module */[/* create */create];\n}\n\nvar LocalForage = /* module */[/* Instance */Instance];\n\nvar VisuallyHidden = /* module */[];\n\nvar Dialog = /* module */[];\n\nvar Tabs = /* module */[];\n\nvar TabList = /* module */[];\n\nvar Tab = /* module */[];\n\nvar TabPanels = /* module */[];\n\nvar TabPanel = /* module */[];\n\nvar ReachTabs = /* module */[\n  /* Tabs */Tabs,\n  /* TabList */TabList,\n  /* Tab */Tab,\n  /* TabPanels */TabPanels,\n  /* TabPanel */TabPanel\n];\n\nexport {\n  Numeral ,\n  LocalForage ,\n  VisuallyHidden ,\n  Dialog ,\n  ReachTabs ,\n  \n}\n/* localforage Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 6.0.3, PLEASE EDIT WITH CARE\n\nimport * as Block from \"bs-platform/lib/es6/block.js\";\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as React from \"react\";\nimport * as Js_dict from \"bs-platform/lib/es6/js_dict.js\";\nimport * as Localforage from \"localforage\";\nimport * as Data$Coronate from \"./Data.bs.js\";\nimport * as ReactFeather from \"react-feather\";\nimport * as Belt_MapString from \"bs-platform/lib/es6/belt_MapString.js\";\nimport * as Belt_SortArray from \"bs-platform/lib/es6/belt_SortArray.js\";\nimport * as Utils$Coronate from \"./Utils.bs.js\";\nimport * as DemoData$Coronate from \"./DemoData.bs.js\";\nimport * as Externals$Coronate from \"./Externals.bs.js\";\nimport * as LocalforageGetitems from \"localforage-getitems\";\nimport * as LocalforageSetitems from \"localforage-setitems\";\nimport * as VisuallyHidden from \"@reach/visually-hidden\";\nimport * as LocalforageRemoveitems from \"localforage-removeitems\";\n\nfunction sortedTableReducer(state, action) {\n  var newState;\n  if (typeof action === \"number\") {\n    newState = state;\n  } else {\n    switch (action.tag | 0) {\n      case 0 : \n          newState = /* record */[\n            /* isDescending */action[0],\n            /* key */state[/* key */1],\n            /* table */state[/* table */2]\n          ];\n          break;\n      case 1 : \n          newState = /* record */[\n            /* isDescending */state[/* isDescending */0],\n            /* key */action[0],\n            /* table */state[/* table */2]\n          ];\n          break;\n      case 2 : \n          newState = /* record */[\n            /* isDescending */state[/* isDescending */0],\n            /* key */state[/* key */1],\n            /* table */action[0]\n          ];\n          break;\n      \n    }\n  }\n  var match = newState[/* isDescending */0];\n  var direction = match ? Utils$Coronate.descend : Utils$Coronate.ascend;\n  var match$1 = newState[/* key */1];\n  var sortFunc;\n  if (match$1.tag) {\n    sortFunc = Curry._1(direction, match$1[0]);\n  } else {\n    var func = match$1[0];\n    sortFunc = Curry._1(direction, (function (str) {\n            return Curry._1(func, str).toLowerCase();\n          }));\n  }\n  var table = Belt_SortArray.stableSortBy(newState[/* table */2], sortFunc);\n  return /* record */[\n          /* isDescending */newState[/* isDescending */0],\n          /* key */newState[/* key */1],\n          /* table */table\n        ];\n}\n\nfunction useSortedTable(table, key, isDescending) {\n  var initialState = /* record */[\n    /* isDescending */isDescending,\n    /* key */key,\n    /* table */table\n  ];\n  var match = React.useReducer(sortedTableReducer, initialState);\n  var dispatch = match[1];\n  React.useEffect((function () {\n          Curry._1(dispatch, /* SortWithoutUpdating */0);\n          return undefined;\n        }), /* array */[dispatch]);\n  return /* tuple */[\n          match[0],\n          dispatch\n        ];\n}\n\nfunction Hooks$SortButton(Props) {\n  var children = Props.children;\n  var sortKey = Props.sortKey;\n  var data = Props.data;\n  var dispatch = Props.dispatch;\n  var match = data[/* key */1] === sortKey;\n  var chevronStyle = match ? ({\n        opacity: \"1\"\n      }) : ({\n        opacity: \"0\"\n      });\n  var match$1 = data[/* isDescending */0];\n  return React.createElement(\"button\", {\n              className: \"button-micro dont-hide button-text-ghost title-20\",\n              style: {\n                width: \"100%\"\n              },\n              onClick: (function (param) {\n                  var match = data[/* key */1] === sortKey;\n                  if (match) {\n                    return Curry._1(dispatch, /* SetIsDescending */Block.__(0, [!data[/* isDescending */0]]));\n                  } else {\n                    return Curry._1(dispatch, /* SetKey */Block.__(1, [sortKey]));\n                  }\n                })\n            }, React.createElement(ReactFeather.ChevronUp, {\n                  style: {\n                    opacity: \"0\"\n                  }\n                }), children, match$1 ? React.createElement(\"span\", {\n                    style: chevronStyle\n                  }, React.createElement(ReactFeather.ChevronUp, { }), React.createElement(VisuallyHidden.default, {\n                        children: \"Sort ascending.\"\n                      })) : React.createElement(\"span\", {\n                    style: chevronStyle\n                  }, React.createElement(ReactFeather.ChevronDown, { }), React.createElement(VisuallyHidden.default, {\n                        children: \"Sort descending.\"\n                      })));\n}\n\nvar SortButton = /* module */[/* make */Hooks$SortButton];\n\nfunction useLoadingCursor(isLoaded) {\n  React.useEffect((function () {\n          if (isLoaded) {\n            ((document.body.style.cursor = \"auto\"));\n          } else {\n            ((document.body.style.cursor = \"wait\"));\n          }\n          return (function (param) {\n                    return (document.body.style.cursor = \"auto\");\n                  });\n        }), /* array */[isLoaded]);\n  return /* () */0;\n}\n\nLocalforageGetitems.extendPrototype(Localforage.default);\n\nLocalforageSetitems.extendPrototype(Localforage.default);\n\nLocalforageRemoveitems.extendPrototype(Localforage.default);\n\nvar database_name = \"Coronate\";\n\nvar optionsStore = Localforage.createInstance({\n      name: database_name,\n      storeName: \"Options\"\n    });\n\nvar Players = Externals$Coronate.LocalForage[/* Instance */0]([]);\n\nvar playerStore = Curry._2(Players[/* create */0], database_name, \"Players\");\n\nvar Tournaments = Externals$Coronate.LocalForage[/* Instance */0]([]);\n\nvar tourneyStore = Curry._2(Tournaments[/* create */0], database_name, \"Tournaments\");\n\nfunction jsDictToReMap(dict, transformer) {\n  return Belt_MapString.fromArray(Js_dict.entries(dict).map((function (param) {\n                    return /* tuple */[\n                            param[0],\n                            Curry._1(transformer, param[1])\n                          ];\n                  })));\n}\n\nfunction reMapToJsDict(map, transformer) {\n  return Js_dict.fromArray(Belt_MapString.toArray(map).map((function (param) {\n                    return /* tuple */[\n                            param[0],\n                            Curry._1(transformer, param[1])\n                          ];\n                  })));\n}\n\nfunction loadDemoDB(param) {\n  ((document.body.style = \"wait\"));\n  Promise.all(/* tuple */[\n            optionsStore.setItems(Data$Coronate.db_optionsToJs(DemoData$Coronate.options)),\n            playerStore.setItems(Js_dict.fromArray(Belt_MapString.toArray(DemoData$Coronate.players).map((function (param) {\n                            return /* tuple */[\n                                    param[0],\n                                    Data$Coronate.Player[/* tToJs */0](param[1])\n                                  ];\n                          })))),\n            tourneyStore.setItems(Js_dict.fromArray(Belt_MapString.toArray(DemoData$Coronate.tournaments).map((function (param) {\n                            return /* tuple */[\n                                    param[0],\n                                    Data$Coronate.Tournament[/* tToJsDeep */2](param[1])\n                                  ];\n                          }))))\n          ]).then((function (value) {\n            Utils$Coronate.alert(\"Demo data loaded!\");\n            ((document.body.style = \"auto\"));\n            return Promise.resolve(value);\n          })).catch((function (param) {\n          ((document.body.style = \"auto\"));\n          return Promise.resolve(/* tuple */[\n                      /* () */0,\n                      /* () */0,\n                      /* () */0\n                    ]);\n        }));\n  return /* () */0;\n}\n\nfunction genericDbReducer(state, action) {\n  switch (action.tag | 0) {\n    case 0 : \n        return Belt_MapString.remove(state, action[0]);\n    case 1 : \n        return Belt_MapString.set(state, action[0], action[1]);\n    case 2 : \n        return action[0];\n    \n  }\n}\n\nfunction useAllItemsFromDb(store, reducer, fromJs, toJs) {\n  var match = React.useReducer(Curry.__2(reducer), Belt_MapString.empty);\n  var dispatch = match[1];\n  var items = match[0];\n  var match$1 = React.useState((function () {\n          return false;\n        }));\n  var setIsLoaded = match$1[1];\n  var isLoaded = match$1[0];\n  useLoadingCursor(isLoaded);\n  React.useEffect((function (param) {\n          var didCancel = /* record */[/* contents */false];\n          store.getItems(null).then((function (results) {\n                  if (!didCancel[0]) {\n                    Curry._1(dispatch, /* SetState */Block.__(2, [jsDictToReMap(results, fromJs)]));\n                    Curry._1(setIsLoaded, (function (param) {\n                            return true;\n                          }));\n                  }\n                  return Promise.resolve(results);\n                }));\n          return (function (param) {\n                    didCancel[0] = false;\n                    return /* () */0;\n                  });\n        }), /* tuple */[\n        store,\n        dispatch,\n        setIsLoaded,\n        fromJs\n      ]);\n  React.useEffect((function (param) {\n          if (isLoaded) {\n            store.setItems(reMapToJsDict(items, toJs)).then((function (param) {\n                    store.keys().then((function (keys) {\n                            var stateKeys = Belt_MapString.keysToArray(items);\n                            var deleted = keys.filter((function (x) {\n                                    return !stateKeys.includes(x);\n                                  }));\n                            if (deleted.length > 0) {\n                              store.removeItems(deleted);\n                            }\n                            return Promise.resolve(/* () */0);\n                          }));\n                    return Promise.resolve(/* () */0);\n                  }));\n            return undefined;\n          }\n          \n        }), /* tuple */[\n        store,\n        items,\n        isLoaded,\n        toJs\n      ]);\n  return /* tuple */[\n          items,\n          dispatch\n        ];\n}\n\nfunction useAllPlayers(param) {\n  return useAllItemsFromDb(playerStore, genericDbReducer, Data$Coronate.Player[/* tFromJs */1], Data$Coronate.Player[/* tToJs */0]);\n}\n\nfunction useAllTournaments(param) {\n  return useAllItemsFromDb(tourneyStore, genericDbReducer, Data$Coronate.Tournament[/* tFromJsDeep */3], Data$Coronate.Tournament[/* tToJsDeep */2]);\n}\n\nfunction optionsReducer(state, action) {\n  switch (action.tag | 0) {\n    case 0 : \n        return /* record */[\n                /* avoidPairs */state[/* avoidPairs */0].concat(/* array */[action[0]]),\n                /* byeValue */state[/* byeValue */1],\n                /* lastBackup */state[/* lastBackup */2]\n              ];\n    case 1 : \n        var match = action[0];\n        var user2 = match[1];\n        var user1 = match[0];\n        return /* record */[\n                /* avoidPairs */state[/* avoidPairs */0].filter((function (param) {\n                        var p2 = param[1];\n                        var p1 = param[0];\n                        return !(/* array */[\n                                    p1,\n                                    p2\n                                  ].includes(user1) && /* array */[\n                                    p1,\n                                    p2\n                                  ].includes(user2));\n                      })),\n                /* byeValue */state[/* byeValue */1],\n                /* lastBackup */state[/* lastBackup */2]\n              ];\n    case 2 : \n        var id = action[0];\n        return /* record */[\n                /* avoidPairs */state[/* avoidPairs */0].filter((function (param) {\n                        return !/* array */[\n                                  param[0],\n                                  param[1]\n                                ].includes(id);\n                      })),\n                /* byeValue */state[/* byeValue */1],\n                /* lastBackup */state[/* lastBackup */2]\n              ];\n    case 3 : \n        return /* record */[\n                /* avoidPairs */action[0],\n                /* byeValue */state[/* byeValue */1],\n                /* lastBackup */state[/* lastBackup */2]\n              ];\n    case 4 : \n        return /* record */[\n                /* avoidPairs */state[/* avoidPairs */0],\n                /* byeValue */action[0],\n                /* lastBackup */state[/* lastBackup */2]\n              ];\n    case 5 : \n        return action[0];\n    case 6 : \n        return /* record */[\n                /* avoidPairs */state[/* avoidPairs */0],\n                /* byeValue */state[/* byeValue */1],\n                /* lastBackup */action[0]\n              ];\n    \n  }\n}\n\nfunction useOptions(param) {\n  var match = React.useReducer(optionsReducer, Data$Coronate.defaultOptions);\n  var dispatch = match[1];\n  var options = match[0];\n  var match$1 = React.useState((function () {\n          return false;\n        }));\n  var setIsLoaded = match$1[1];\n  var isLoaded = match$1[0];\n  React.useEffect((function () {\n          var didCancel = /* record */[/* contents */false];\n          optionsStore.getItems().then((function (valuesJs) {\n                  var values = Data$Coronate.db_optionsFromJs(valuesJs);\n                  if (!didCancel[0]) {\n                    Curry._1(dispatch, /* SetAvoidPairs */Block.__(3, [values[/* avoidPairs */0]]));\n                    Curry._1(dispatch, /* SetByeValue */Block.__(4, [values[/* byeValue */1]]));\n                    Curry._1(dispatch, /* SetLastBackup */Block.__(6, [values[/* lastBackup */2]]));\n                    Curry._1(setIsLoaded, (function (param) {\n                            return true;\n                          }));\n                  }\n                  return Promise.resolve(/* () */0);\n                }));\n          return (function (param) {\n                    didCancel[0] = true;\n                    return /* () */0;\n                  });\n        }), /* tuple */[\n        setIsLoaded,\n        dispatch\n      ]);\n  React.useEffect((function () {\n          if (isLoaded) {\n            optionsStore.setItems(Data$Coronate.db_optionsToJs(options));\n            return undefined;\n          }\n          \n        }), /* tuple */[\n        options,\n        isLoaded\n      ]);\n  return /* tuple */[\n          options,\n          dispatch\n        ];\n}\n\nvar Db = /* module */[\n  /* LocalForage */0,\n  /* database_name */database_name,\n  /* optionsStore */optionsStore,\n  /* Players */Players,\n  /* playerStore */playerStore,\n  /* Tournaments */Tournaments,\n  /* tourneyStore */tourneyStore,\n  /* jsDictToReMap */jsDictToReMap,\n  /* reMapToJsDict */reMapToJsDict,\n  /* loadDemoDB */loadDemoDB,\n  /* genericDbReducer */genericDbReducer,\n  /* useAllItemsFromDb */useAllItemsFromDb,\n  /* useAllPlayers */useAllPlayers,\n  /* useAllTournaments */useAllTournaments,\n  /* optionsReducer */optionsReducer,\n  /* useOptions */useOptions\n];\n\nvar $$Map = 0;\n\nexport {\n  $$Map ,\n  sortedTableReducer ,\n  useSortedTable ,\n  SortButton ,\n  useLoadingCursor ,\n  Db ,\n  \n}\n/*  Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 6.0.3, PLEASE EDIT WITH CARE\n\nimport * as React from \"react\";\nimport * as React$1 from \"simple-icons/icons/react\";\nimport * as Reason from \"simple-icons/icons/reason\";\n\nfunction Icons$SimpleIcon(Props) {\n  var icon = Props.icon;\n  return React.createElement(\"span\", {\n              \"aria-label\": icon.title,\n              role: \"img\",\n              style: {\n                fill: \"#\" + icon.hex\n              },\n              dangerouslySetInnerHTML: {\n                __html: icon.svg\n              }\n            });\n}\n\nvar SimpleIcon = /* module */[/* make */Icons$SimpleIcon];\n\nfunction Icons$Reason(Props) {\n  return React.createElement(Icons$SimpleIcon, {\n              icon: Reason.default\n            });\n}\n\nvar Reason$1 = /* module */[/* make */Icons$Reason];\n\nfunction Icons$ReactIcon(Props) {\n  return React.createElement(Icons$SimpleIcon, {\n              icon: React$1.default\n            });\n}\n\nvar ReactIcon = /* module */[/* make */Icons$ReactIcon];\n\nfunction Icons$Close(Props) {\n  return React.createElement(\"svg\", {\n              height: \"11\",\n              width: \"11\",\n              fill: \"none\",\n              viewBox: \"0 0 11 11\",\n              xmlns: \"http://www.w3.org/2000/svg\"\n            }, React.createElement(\"path\", {\n                  d: \"M6.279 5.5L11 10.221l-.779.779L5.5 6.279.779 11 0 10.221 4.721 5.5 0 .779.779 0 5.5 4.721 10.221 0 11 .779 6.279 5.5z\",\n                  fill: \"#000\"\n                }));\n}\n\nvar Close = /* module */[/* make */Icons$Close];\n\nfunction Icons$Maximize(Props) {\n  return React.createElement(\"svg\", {\n              height: \"11\",\n              width: \"11\",\n              fill: \"none\",\n              viewBox: \"0 0 11 11\",\n              xmlns: \"http://www.w3.org/2000/svg\"\n            }, React.createElement(\"path\", {\n                  d: \"M11 0v11H0V0h11zM9.899 1.101H1.1V9.9H9.9V1.1z\",\n                  fill: \"#000\"\n                }));\n}\n\nvar Maximize = /* module */[/* make */Icons$Maximize];\n\nfunction Icons$Minimize(Props) {\n  return React.createElement(\"svg\", {\n              height: \"11\",\n              width: \"11\",\n              fill: \"none\",\n              viewBox: \"0 0 11 11\",\n              xmlns: \"http://www.w3.org/2000/svg\"\n            }, React.createElement(\"path\", {\n                  d: \"M11 4.399V5.5H0V4.399h11z\",\n                  fill: \"#000\"\n                }));\n}\n\nvar Minimize = /* module */[/* make */Icons$Minimize];\n\nfunction Icons$Restore(Props) {\n  return React.createElement(\"svg\", {\n              height: \"11\",\n              width: \"11\",\n              fill: \"none\",\n              viewBox: \"0 0 11 11\",\n              xmlns: \"http://www.w3.org/2000/svg\"\n            }, React.createElement(\"path\", {\n                  d: \"M11 8.798H8.798V11H0V2.202h2.202V0H11v8.798zm-3.298-5.5h-6.6v6.6h6.6v-6.6zM9.9 1.1H3.298v1.101h5.5v5.5h1.1v-6.6z\",\n                  fill: \"#000\"\n                }));\n}\n\nvar Restore = /* module */[/* make */Icons$Restore];\n\nexport {\n  SimpleIcon ,\n  Reason$1 as Reason,\n  ReactIcon ,\n  Close ,\n  Maximize ,\n  Minimize ,\n  Restore ,\n  \n}\n/* react Not a pure module */\n","import PropTypes from \"prop-types\";\nconst electron = window.require ? window.require(\"electron\") : false;\nexport {electron};\n\n// Returns the result of a function if Electron is enabled.\nexport function ifElectron(fn) {\n    return electron ? fn() : null;\n}\n\n// This is the JSX version of the previous function\nexport function IfElectron({children, onlyWin = false, onlyMac = false}) {\n    const win = onlyWin ? navigator.appVersion.includes(\"Windows\") : true;\n    const mac = onlyMac ? navigator.appVersion.includes(\"Mac\") : true;\n    if ([electron, win, mac].includes(false)) {\n        return null;\n    } else {\n        return children;\n    }\n}\nIfElectron.propTypes = {\n    children: PropTypes.node.isRequired,\n    onlyMac: PropTypes.bool,\n    onlyWindows: PropTypes.bool\n};\n\nconst currentWindow = ifElectron(() => electron.remote.getCurrentWindow());\nexport {currentWindow};\n\nexport function ifElectronOpen(event, url) {\n    return ifElectron(function () {\n        event.preventDefault();\n        electron.shell.openExternal(url);\n    });\n}\n\nfunction toggleMaximize(win) {\n    if (!win.isMaximized()) {\n        win.maximize();\n    } else {\n        win.unmaximize();\n    }\n}\n\nexport {toggleMaximize};\n\n// https://github.com/electron/electron/issues/16385#issuecomment-453955377\nexport function macOSDoubleClick(event) {\n    ifElectron(function () {\n        if (!event.target.className.includes) {\n            return; // sometimes `className` isn't a string.\n        }\n        // We don't want double-clicking buttons to (un)maximize.\n        if (!event.target.className.includes(\"double-click-control\")) {\n            return;\n        }\n        const {getUserDefault} = electron.remote.systemPreferences;\n        const doubleClickAction = getUserDefault(\n            \"AppleActionOnDoubleClick\",\n            \"string\"\n        );\n        const win = electron.remote.getCurrentWindow();\n        if (doubleClickAction === \"Minimize\") {\n            win.minimize();\n        } else if (doubleClickAction === \"Maximize\") {\n            toggleMaximize(win);\n        }\n    });\n};\n","// Generated by BUCKLESCRIPT VERSION 6.0.3, PLEASE EDIT WITH CARE\n\nimport * as Caml_option from \"bs-platform/lib/es6/caml_option.js\";\nimport * as ElectronUtilsJs from \"./electron-utils.js\";\n\nfunction ifElectron(prim) {\n  return ElectronUtilsJs.ifElectron(prim);\n}\n\nfunction ifElectronOpen(prim, prim$1) {\n  ElectronUtilsJs.ifElectronOpen(prim, prim$1);\n  return /* () */0;\n}\n\nfunction toggleMaximize(prim) {\n  ElectronUtilsJs.toggleMaximize(prim);\n  return /* () */0;\n}\n\nfunction macOSDoubleClick(prim) {\n  ElectronUtilsJs.macOSDoubleClick(prim);\n  return /* () */0;\n}\n\nvar currentWindow = ElectronUtilsJs.currentWindow;\n\nvar match = ElectronUtilsJs.ifElectron((function (param) {\n        return true;\n      }));\n\nvar isElectron = match !== undefined ? Caml_option.valFromOption(match) : false;\n\nvar isWin = navigator.appVersion.includes(\"Windows\");\n\nvar isMac = navigator.appVersion.includes(\"Mac\");\n\nfunction ElectronUtils$IfElectron(Props) {\n  var children = Props.children;\n  var match = Props.onlyWin;\n  var onlyWin = match !== undefined ? match : false;\n  var match$1 = Props.onlyMac;\n  var onlyMac = match$1 !== undefined ? match$1 : false;\n  var isWin$1 = onlyWin ? isWin : true;\n  var isMac$1 = onlyMac ? isMac : true;\n  if (/* array */[\n        isElectron,\n        isWin$1,\n        isMac$1\n      ].includes(false)) {\n    return null;\n  } else {\n    return children;\n  }\n}\n\nvar IfElectron = /* module */[/* make */ElectronUtils$IfElectron];\n\nexport {\n  ifElectron ,\n  ifElectronOpen ,\n  toggleMaximize ,\n  macOSDoubleClick ,\n  currentWindow ,\n  isElectron ,\n  isWin ,\n  isMac ,\n  IfElectron ,\n  \n}\n/* currentWindow Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 6.0.3, PLEASE EDIT WITH CARE\n\nimport * as React from \"react\";\nimport * as Utils$Coronate from \"./Utils.bs.js\";\nimport * as ElectronUtils$Coronate from \"./ElectronUtils.bs.js\";\n\nvar github_url = \"https://github.com/johnridesabike/coronate\";\n\nvar license_url = \"https://github.com/johnridesabike/coronate/blob/master/LICENSE\";\n\nfunction Snippets$About(Props) {\n  return React.createElement(\"article\", {\n              style: {\n                display: \"flex\",\n                width: \"100%\",\n                justifyContent: \"space-between\"\n              }\n            }, React.createElement(\"div\", {\n                  style: {\n                    textAlign: \"center\",\n                    flex: \"0 0 48%\"\n                  }\n                }, React.createElement(\"img\", {\n                      alt: \"\",\n                      height: \"196\",\n                      src: Utils$Coronate.WebpackAssets[/* logo */0],\n                      width: \"196\"\n                    })), React.createElement(\"div\", {\n                  style: {\n                    flex: \"0 0 48%\"\n                  }\n                }, React.createElement(\"h1\", {\n                      className: \"title\",\n                      style: {\n                        textAlign: \"left\"\n                      }\n                    }, \"Coronate\"), React.createElement(\"p\", undefined, /* array */[\n                        \"Copyright \",\n                        Utils$Coronate.Entities[/* copy */1],\n                        \" 2019 John\",\n                        Utils$Coronate.Entities[/* nbsp */0],\n                        \"Jackson\"\n                      ].join(\"\")), React.createElement(\"p\", undefined, \"Coronate is free software.\"), React.createElement(\"p\", undefined, React.createElement(\"a\", {\n                          href: github_url,\n                          onClick: (function (e) {\n                              return ElectronUtils$Coronate.ifElectronOpen(e, github_url);\n                            })\n                        }, \"Source code is available\"), React.createElement(\"br\", undefined), \" under the \", React.createElement(\"a\", {\n                          href: license_url,\n                          onClick: (function (e) {\n                              return ElectronUtils$Coronate.ifElectronOpen(e, license_url);\n                            })\n                        }, \"AGPL v3.0 license\"), \".\")));\n}\n\nvar About = /* module */[/* make */Snippets$About];\n\nexport {\n  github_url ,\n  license_url ,\n  About ,\n  \n}\n/* react Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 6.0.3, PLEASE EDIT WITH CARE\n\nimport * as Cn from \"re-classnames/src/Cn.bs.js\";\nimport * as Block from \"bs-platform/lib/es6/block.js\";\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as React from \"react\";\nimport * as Caml_option from \"bs-platform/lib/es6/caml_option.js\";\nimport * as Dialog from \"@reach/dialog\";\nimport * as ReactFeather from \"react-feather\";\nimport * as Icons$Coronate from \"./Icons.bs.js\";\nimport * as Utils$Coronate from \"./Utils.bs.js\";\nimport * as Snippets$Coronate from \"./Snippets.bs.js\";\nimport * as VisuallyHidden from \"@reach/visually-hidden\";\nimport * as ElectronUtils$Coronate from \"./ElectronUtils.bs.js\";\n\nvar global_title = \"Coronate\";\n\nfunction formatTitle(title) {\n  var match = title.length === 0;\n  if (match) {\n    return global_title;\n  } else {\n    return title + \" - Coronate\";\n  }\n}\n\nvar initialWinState = /* record */[\n  /* isBlur */false,\n  /* isDialogOpen */false,\n  /* isFullScreen */false,\n  /* isMaximized */false,\n  /* isSidebarOpen */true,\n  /* title */\"\"\n];\n\nfunction initialState_001(param) {\n  return /* () */0;\n}\n\nvar initialState = /* tuple */[\n  initialWinState,\n  initialState_001\n];\n\nvar windowContext = React.createContext(initialState);\n\nfunction makeProps(value, children, param) {\n  return {\n          value: value,\n          children: children\n        };\n}\n\nvar make = windowContext.Provider;\n\nvar Provider = /* module */[\n  /* makeProps */makeProps,\n  /* make */make\n];\n\nvar WindowContext = /* module */[\n  /* initialState */initialState,\n  /* windowContext */windowContext,\n  /* Provider */Provider\n];\n\nfunction useWindowContext(param) {\n  return React.useContext(windowContext);\n}\n\nfunction windowReducer(state, action) {\n  switch (action.tag | 0) {\n    case 0 : \n        return /* record */[\n                /* isBlur */action[0],\n                /* isDialogOpen */state[/* isDialogOpen */1],\n                /* isFullScreen */state[/* isFullScreen */2],\n                /* isMaximized */state[/* isMaximized */3],\n                /* isSidebarOpen */state[/* isSidebarOpen */4],\n                /* title */state[/* title */5]\n              ];\n    case 1 : \n        return /* record */[\n                /* isBlur */state[/* isBlur */0],\n                /* isDialogOpen */action[0],\n                /* isFullScreen */state[/* isFullScreen */2],\n                /* isMaximized */state[/* isMaximized */3],\n                /* isSidebarOpen */state[/* isSidebarOpen */4],\n                /* title */state[/* title */5]\n              ];\n    case 2 : \n        return /* record */[\n                /* isBlur */state[/* isBlur */0],\n                /* isDialogOpen */state[/* isDialogOpen */1],\n                /* isFullScreen */action[0],\n                /* isMaximized */state[/* isMaximized */3],\n                /* isSidebarOpen */state[/* isSidebarOpen */4],\n                /* title */state[/* title */5]\n              ];\n    case 3 : \n        return /* record */[\n                /* isBlur */state[/* isBlur */0],\n                /* isDialogOpen */state[/* isDialogOpen */1],\n                /* isFullScreen */state[/* isFullScreen */2],\n                /* isMaximized */action[0],\n                /* isSidebarOpen */state[/* isSidebarOpen */4],\n                /* title */state[/* title */5]\n              ];\n    case 4 : \n        return /* record */[\n                /* isBlur */state[/* isBlur */0],\n                /* isDialogOpen */state[/* isDialogOpen */1],\n                /* isFullScreen */state[/* isFullScreen */2],\n                /* isMaximized */state[/* isMaximized */3],\n                /* isSidebarOpen */action[0],\n                /* title */state[/* title */5]\n              ];\n    case 5 : \n        return /* record */[\n                /* isBlur */state[/* isBlur */0],\n                /* isDialogOpen */state[/* isDialogOpen */1],\n                /* isFullScreen */state[/* isFullScreen */2],\n                /* isMaximized */state[/* isMaximized */3],\n                /* isSidebarOpen */state[/* isSidebarOpen */4],\n                /* title */action[0]\n              ];\n    \n  }\n}\n\nvar toolbarClasses = Cn.make(/* :: */[\n      Cn.ifTrue(\"macos-button-toolbar\", ElectronUtils$Coronate.isMac && ElectronUtils$Coronate.isElectron),\n      /* :: */[\n        Cn.ifTrue(\"button-ghost\", !(ElectronUtils$Coronate.isMac && ElectronUtils$Coronate.isElectron)),\n        /* [] */0\n      ]\n    ]);\n\nfunction Window$WindowsControls(Props) {\n  var state = Props.state;\n  var middleButton = state[/* isFullScreen */2] ? React.createElement(\"button\", {\n          className: \"windosControls__winButton button-ghost\",\n          onClick: (function (param) {\n              return ElectronUtils$Coronate.currentWindow.setFullScreen(false);\n            })\n        }, React.createElement(ReactFeather.Minimize2, { })) : (\n      state[/* isMaximized */3] ? React.createElement(\"button\", {\n              className: \"windosControls__winButton button-ghost\",\n              onClick: (function (param) {\n                  return ElectronUtils$Coronate.currentWindow.unmaximize();\n                })\n            }, React.createElement(Icons$Coronate.Restore[/* make */0], { })) : React.createElement(\"button\", {\n              className: \"windosControls__winButton button-ghost\",\n              onClick: (function (param) {\n                  return ElectronUtils$Coronate.currentWindow.maximize();\n                })\n            }, React.createElement(Icons$Coronate.Maximize[/* make */0], { }))\n    );\n  return React.createElement(\"div\", {\n              className: \"windowsControls__container\"\n            }, React.createElement(\"button\", {\n                  className: \"windowsControls__winButton button-ghost\",\n                  onClick: (function (param) {\n                      return ElectronUtils$Coronate.currentWindow.minimize();\n                    })\n                }, React.createElement(Icons$Coronate.Minimize[/* make */0], { })), middleButton, React.createElement(\"button\", {\n                  className: Cn.make(/* :: */[\n                        \"windowsControls__winButton\",\n                        /* :: */[\n                          \"windowsControls__close\",\n                          /* :: */[\n                            \"button-ghost\",\n                            /* [] */0\n                          ]\n                        ]\n                      ]),\n                  onClick: (function (param) {\n                      return ElectronUtils$Coronate.currentWindow.close();\n                    })\n                }, React.createElement(Icons$Coronate.Close[/* make */0], { })));\n}\n\nvar WindowsControls = /* module */[/* make */Window$WindowsControls];\n\nfunction Window$WindowTitleBar(Props) {\n  var state = Props.state;\n  var dispatch = Props.dispatch;\n  return React.createElement(\"header\", {\n              className: Cn.make(/* :: */[\n                    \"app__header\",\n                    /* :: */[\n                      \"double-click-control\",\n                      /* :: */[\n                        Cn.ifTrue(\"traffic-light-padding\", ElectronUtils$Coronate.isElectron && ElectronUtils$Coronate.isMac && !state[/* isFullScreen */2]),\n                        /* [] */0\n                      ]\n                    ]\n                  ]),\n              onDoubleClick: ElectronUtils$Coronate.macOSDoubleClick\n            }, React.createElement(\"div\", undefined, React.createElement(ElectronUtils$Coronate.IfElectron[/* make */0], {\n                      children: React.createElement(\"span\", {\n                            style: {\n                              display: \"inline-flex\",\n                              marginRight: \"8px\",\n                              marginLeft: \"4px\",\n                              alignItems: \"center\"\n                            }\n                          }, React.createElement(\"img\", {\n                                alt: \"\",\n                                height: \"16\",\n                                src: Utils$Coronate.WebpackAssets[/* logo */0],\n                                width: \"16\"\n                              })),\n                      onlyWin: true\n                    }), React.createElement(\"button\", {\n                      className: toolbarClasses,\n                      onClick: (function (param) {\n                          return Curry._1(dispatch, /* SetSidebar */Block.__(4, [!state[/* isSidebarOpen */4]]));\n                        })\n                    }, React.createElement(ReactFeather.Sidebar, { }), React.createElement(VisuallyHidden.default, {\n                          children: \"Toggle sidebar\"\n                        })), React.createElement(\"button\", {\n                      className: toolbarClasses,\n                      onClick: (function (param) {\n                          return Curry._1(dispatch, /* SetDialog */Block.__(1, [true]));\n                        })\n                    }, React.createElement(ReactFeather.HelpCircle, { }), React.createElement(VisuallyHidden.default, {\n                          children: \"About Coronate\"\n                        }))), React.createElement(\"div\", {\n                  className: Cn.make(/* :: */[\n                        \"body-20\",\n                        /* :: */[\n                          \"double-click-control\",\n                          /* :: */[\n                            Cn.ifTrue(\"disabled\", state[/* isBlur */0]),\n                            /* [] */0\n                          ]\n                        ]\n                      ]),\n                  style: {\n                    left: \"0\",\n                    marginRight: \"auto\",\n                    marginLeft: \"auto\",\n                    position: \"absolute\",\n                    right: \"0\",\n                    textAlign: \"center\",\n                    width: \"50%\"\n                  }\n                }, formatTitle(state[/* title */5])), React.createElement(ElectronUtils$Coronate.IfElectron[/* make */0], {\n                  children: React.createElement(Window$WindowsControls, {\n                        state: state\n                      }),\n                  onlyWin: true\n                }));\n}\n\nvar WindowTitleBar = /* module */[/* make */Window$WindowTitleBar];\n\nfunction Window$Window(Props) {\n  var children = Props.children;\n  var className = Props.className;\n  var match = React.useReducer(windowReducer, initialWinState);\n  var dispatch = match[1];\n  var state = match[0];\n  var title = state[/* title */5];\n  React.useEffect((function () {\n          document.title = formatTitle(title);\n          return undefined;\n        }), /* array */[title]);\n  React.useEffect((function () {\n          var func = ElectronUtils$Coronate.ifElectron((function (param) {\n                  var unregisterListeners = function (param) {\n                    ElectronUtils$Coronate.currentWindow.removeAllListeners(\"enter-full-screen\");\n                    ElectronUtils$Coronate.currentWindow.removeAllListeners(\"leave-full-screen\");\n                    ElectronUtils$Coronate.currentWindow.removeAllListeners(\"blur\");\n                    ElectronUtils$Coronate.currentWindow.removeAllListeners(\"focus\");\n                    ElectronUtils$Coronate.currentWindow.removeAllListeners(\"maximize\");\n                    return ElectronUtils$Coronate.currentWindow.removeAllListeners(\"unmaximize\");\n                  };\n                  unregisterListeners(/* () */0);\n                  ElectronUtils$Coronate.currentWindow.on(\"enter-full-screen\", (function (param) {\n                          return Curry._1(dispatch, /* SetFullScreen */Block.__(2, [true]));\n                        }));\n                  ElectronUtils$Coronate.currentWindow.on(\"leave-full-screen\", (function (param) {\n                          return Curry._1(dispatch, /* SetFullScreen */Block.__(2, [false]));\n                        }));\n                  ElectronUtils$Coronate.currentWindow.on(\"maximize\", (function (param) {\n                          return Curry._1(dispatch, /* SetMaximized */Block.__(3, [true]));\n                        }));\n                  ElectronUtils$Coronate.currentWindow.on(\"unmaximize\", (function (param) {\n                          return Curry._1(dispatch, /* SetMaximized */Block.__(3, [false]));\n                        }));\n                  ElectronUtils$Coronate.currentWindow.on(\"blur\", (function (param) {\n                          return Curry._1(dispatch, /* SetBlur */Block.__(0, [true]));\n                        }));\n                  ElectronUtils$Coronate.currentWindow.on(\"focus\", (function (param) {\n                          return Curry._1(dispatch, /* SetBlur */Block.__(0, [false]));\n                        }));\n                  Curry._1(dispatch, /* SetBlur */Block.__(0, [ElectronUtils$Coronate.currentWindow.isFocused()]));\n                  Curry._1(dispatch, /* SetFullScreen */Block.__(2, [!ElectronUtils$Coronate.currentWindow.isFocused()]));\n                  Curry._1(dispatch, /* SetMaximized */Block.__(3, [ElectronUtils$Coronate.currentWindow.isMaximized()]));\n                  return unregisterListeners;\n                }));\n          if (func !== undefined) {\n            var func$1 = Caml_option.valFromOption(func);\n            var match = func$1 === null;\n            if (match) {\n              return undefined;\n            } else {\n              return func$1;\n            }\n          }\n          \n        }), /* array */[dispatch]);\n  return React.createElement(\"div\", {\n              className: Cn.make(/* :: */[\n                    className,\n                    /* :: */[\n                      Cn.ifTrue(\"open-sidebar\", state[/* isSidebarOpen */4]),\n                      /* :: */[\n                        Cn.ifTrue(\"closed-sidebar\", !state[/* isSidebarOpen */4]),\n                        /* :: */[\n                          Cn.ifTrue(\"window-blur\", state[/* isBlur */0]),\n                          /* :: */[\n                            Cn.ifTrue(\"isWindows\", ElectronUtils$Coronate.isWin),\n                            /* :: */[\n                              Cn.ifTrue(\"isMacOS\", ElectronUtils$Coronate.isMac),\n                              /* :: */[\n                                Cn.ifTrue(\"isElectron\", ElectronUtils$Coronate.isElectron),\n                                /* [] */0\n                              ]\n                            ]\n                          ]\n                        ]\n                      ]\n                    ]\n                  ])\n            }, React.createElement(Window$WindowTitleBar, {\n                  state: state,\n                  dispatch: dispatch\n                }), React.createElement(make, makeProps(/* tuple */[\n                      state,\n                      dispatch\n                    ], children, /* () */0)), React.createElement(Dialog.Dialog, {\n                  isOpen: state[/* isDialogOpen */1],\n                  onDismiss: (function (param) {\n                      return Curry._1(dispatch, /* SetDialog */Block.__(1, [false]));\n                    }),\n                  children: null,\n                  style: {\n                    backgroundColor: \"var(--grey-20)\"\n                  }\n                }, React.createElement(\"button\", {\n                      className: \"button-micro\",\n                      onClick: (function (param) {\n                          return Curry._1(dispatch, /* SetDialog */Block.__(1, [false]));\n                        })\n                    }, \"Close\"), React.createElement(Snippets$Coronate.About[/* make */0], { })));\n}\n\nvar $$Window = /* module */[/* make */Window$Window];\n\nfunction noDraggy(e) {\n  e.preventDefault();\n  return /* () */0;\n}\n\nfunction Window$DefaultSidebar(Props) {\n  return React.createElement(\"nav\", undefined, React.createElement(\"ul\", {\n                  style: {\n                    margin: \"0\"\n                  }\n                }, React.createElement(\"li\", undefined, React.createElement(\"a\", {\n                          href: \"#/tourneys\",\n                          onDragStart: noDraggy\n                        }, React.createElement(ReactFeather.Award, { }), React.createElement(\"span\", {\n                              className: \"sidebar__hide-on-close\"\n                            }, Utils$Coronate.Entities[/* nbsp */0] + \"Tournaments\"))), React.createElement(\"li\", undefined, React.createElement(\"a\", {\n                          href: \"#/players\",\n                          onDragStart: noDraggy\n                        }, React.createElement(ReactFeather.Users, { }), React.createElement(\"span\", {\n                              className: \"sidebar__hide-on-close\"\n                            }, Utils$Coronate.Entities[/* nbsp */0] + \"Players\"))), React.createElement(\"li\", undefined, React.createElement(\"a\", {\n                          href: \"#/options\",\n                          onDragStart: noDraggy\n                        }, React.createElement(ReactFeather.Settings, { }), React.createElement(\"span\", {\n                              className: \"sidebar__hide-on-close\"\n                            }, Utils$Coronate.Entities[/* nbsp */0] + \"Options\"))), React.createElement(\"li\", undefined, React.createElement(\"a\", {\n                          href: \"#/\",\n                          onDragStart: noDraggy\n                        }, React.createElement(ReactFeather.HelpCircle, { }), React.createElement(\"span\", {\n                              className: \"sidebar__hide-on-close\"\n                            }, Utils$Coronate.Entities[/* nbsp */0] + \"Info\")))));\n}\n\nvar DefaultSidebar = /* module */[/* make */Window$DefaultSidebar];\n\nfunction sidebarCallback(param) {\n  return React.createElement(Window$DefaultSidebar, { });\n}\n\nfunction Window$WindowBody(Props) {\n  var children = Props.children;\n  var footerFunc = Props.footerFunc;\n  var match = Props.sidebarFunc;\n  var sidebarFunc = match !== undefined ? match : sidebarCallback;\n  return React.createElement(\"div\", {\n              className: Cn.make(/* :: */[\n                    \"winBody\",\n                    /* :: */[\n                      Cn.ifSome(\"winBody-hasFooter\", footerFunc),\n                      /* [] */0\n                    ]\n                  ])\n            }, React.createElement(\"div\", {\n                  className: \"win__sidebar\"\n                }, Curry._1(sidebarFunc, /* () */0)), React.createElement(\"div\", {\n                  className: \"win__content\"\n                }, children), footerFunc !== undefined ? React.createElement(\"footer\", {\n                    className: Cn.make(/* :: */[\n                          \"win__footer\",\n                          /* [] */0\n                        ])\n                  }, Curry._1(footerFunc, /* () */0)) : null);\n}\n\nvar WindowBody = /* module */[/* make */Window$WindowBody];\n\nexport {\n  global_title ,\n  formatTitle ,\n  initialWinState ,\n  WindowContext ,\n  useWindowContext ,\n  windowReducer ,\n  toolbarClasses ,\n  WindowsControls ,\n  WindowTitleBar ,\n  $$Window ,\n  noDraggy ,\n  DefaultSidebar ,\n  sidebarCallback ,\n  WindowBody ,\n  \n}\n/* windowContext Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 6.0.3, PLEASE EDIT WITH CARE\n\nimport * as React from \"react\";\nimport * as ReactFeather from \"react-feather\";\nimport * as Hooks$Coronate from \"./Hooks.bs.js\";\nimport * as Icons$Coronate from \"./Icons.bs.js\";\nimport * as Utils$Coronate from \"./Utils.bs.js\";\nimport * as Window$Coronate from \"./Window.bs.js\";\nimport * as ElectronUtils$Coronate from \"./ElectronUtils.bs.js\";\n\nvar github_url = \"https://github.com/johnridesabike/coronate\";\n\nvar license_url = \"https://github.com/johnridesabike/coronate/blob/master/LICENSE\";\n\nvar issues_url = \"https://github.com/johnridesabike/coronate/issues/new\";\n\nfunction Pages$CautionFooter(Props) {\n  return React.createElement(\"aside\", {\n              className: \"caution__container body-20\"\n            }, React.createElement(\"p\", {\n                  className: \"caution__text\"\n                }, \"This is beta software. Want to help make it better? Check out the \", React.createElement(\"span\", {\n                      \"aria-hidden\": true,\n                      role: \"img\"\n                    }, \"  \"), Utils$Coronate.Entities[/* nbsp */0], React.createElement(\"a\", {\n                      className: \"caution__link\",\n                      href: github_url,\n                      onClick: (function (e) {\n                          return ElectronUtils$Coronate.ifElectronOpen(e, github_url);\n                        })\n                    }, \"Git repository\"), \".\"));\n}\n\nvar CautionFooter = /* module */[/* make */Pages$CautionFooter];\n\nfunction Pages$Splash(Props) {\n  return React.createElement(Window$Coronate.WindowBody[/* make */0], {\n              children: React.createElement(\"div\", {\n                    className: \"splash__splash\"\n                  }, React.createElement(\"aside\", {\n                        className: \"splash__hint\"\n                      }, React.createElement(\"ol\", undefined, React.createElement(\"li\", undefined, React.createElement(\"button\", {\n                                    className: \"button-primary\",\n                                    onClick: (function (param) {\n                                        return Hooks$Coronate.Db[/* loadDemoDB */9](/* () */0);\n                                      })\n                                  }, \"Click here to load the demo data\"), \"(optional)\"), React.createElement(\"li\", undefined, React.createElement(ReactFeather.ArrowLeft, { }), \" Select a menu item.\"), React.createElement(\"li\", undefined, \"Start creating your tournaments!\")), React.createElement(Utils$Coronate.$$Notification[/* make */0], {\n                            children: null,\n                            kind: /* Warning */1\n                          }, \"If you experience glitches or crashes,\", React.createElement(\"br\", undefined), \"clear your browser cache and try again.\")), React.createElement(\"div\", {\n                        className: \"splash__title\"\n                      }, React.createElement(\"div\", {\n                            className: \"splash__titleIcon\"\n                          }, React.createElement(\"img\", {\n                                alt: \"\",\n                                height: \"96\",\n                                src: Utils$Coronate.WebpackAssets[/* logo */0],\n                                width: \"96\"\n                              })), React.createElement(\"div\", {\n                            className: \"splash__titleText\"\n                          }, React.createElement(\"h1\", {\n                                className: \"title\",\n                                style: {\n                                  fontSize: \"40px\"\n                                }\n                              }, \"Coronate\"), React.createElement(\"p\", {\n                                className: \"splash__subtitle caption-30\"\n                              }, \"Tournament manager\"))), React.createElement(\"footer\", {\n                        className: \"body-20 splash__footer\"\n                      }, React.createElement(\"div\", {\n                            style: {\n                              textAlign: \"left\"\n                            }\n                          }, React.createElement(\"p\", undefined, \"Copyright \" + (Utils$Coronate.Entities[/* copy */1] + \" 2019 John Jackson.\")), React.createElement(\"p\", undefined, \"Coronate is free software.\", React.createElement(\"br\", undefined), React.createElement(\"a\", {\n                                    href: github_url,\n                                    onClick: (function (e) {\n                                        return ElectronUtils$Coronate.ifElectronOpen(e, github_url);\n                                      })\n                                  }, \"Source code is available\"), \" under the \", React.createElement(\"a\", {\n                                    href: license_url,\n                                    onClick: (function (e) {\n                                        return ElectronUtils$Coronate.ifElectronOpen(e, license_url);\n                                      })\n                                  }, \"AGPL v3.0 license\"), \".\")), React.createElement(\"div\", {\n                            style: {\n                              textAlign: \"right\"\n                            }\n                          }, React.createElement(\"p\", undefined, React.createElement(\"a\", {\n                                    href: issues_url,\n                                    onClick: (function (e) {\n                                        return ElectronUtils$Coronate.ifElectronOpen(e, issues_url);\n                                      })\n                                  }, \"Suggestions and bug reports are welcome.\")), React.createElement(\"p\", undefined, \"Built with \", React.createElement(\"a\", {\n                                    href: \"https://reasonml.github.io/reason-react/\",\n                                    onClick: (function (e) {\n                                        return ElectronUtils$Coronate.ifElectronOpen(e, \"https://reasonml.github.io/reason-react/\");\n                                      })\n                                  }, \"ReasonReact\"), \". \", React.createElement(\"span\", {\n                                    style: {\n                                      fontSize: \"16px\"\n                                    }\n                                  }, React.createElement(Icons$Coronate.Reason[/* make */0], { }), \" \", React.createElement(Icons$Coronate.ReactIcon[/* make */0], { })))))),\n              footerFunc: (function (param) {\n                  return React.createElement(Pages$CautionFooter, { });\n                })\n            });\n}\n\nvar Splash = /* module */[/* make */Pages$Splash];\n\nfunction Pages$NotFound(Props) {\n  return React.createElement(\"p\", {\n              className: \"content-area\"\n            }, \"Page not found.\");\n}\n\nvar NotFound = /* module */[/* make */Pages$NotFound];\n\nexport {\n  github_url ,\n  license_url ,\n  issues_url ,\n  CautionFooter ,\n  Splash ,\n  NotFound ,\n  \n}\n/* react Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 6.0.3, PLEASE EDIT WITH CARE\n\nimport * as Belt_MapString from \"bs-platform/lib/es6/belt_MapString.js\";\n\nvar options_000 = /* avoidPairs : array */[\n  /* tuple */[\n    \"TVs_Frank____________\",\n    \"TVs_Son_of_TVs_Frank_\"\n  ],\n  /* tuple */[\n    \"Pearl_Forrester______\",\n    \"Dr_Clayton_Forrester_\"\n  ],\n  /* tuple */[\n    \"Kinga_Forrester______\",\n    \"Dr_Clayton_Forrester_\"\n  ],\n  /* tuple */[\n    \"Kinga_Forrester______\",\n    \"Pearl_Forrester______\"\n  ]\n];\n\nvar options_002 = /* lastBackup */new Date(\"1970-01-01T00:00:00.000Z\");\n\nvar options = /* record */[\n  options_000,\n  /* byeValue */1.0,\n  options_002\n];\n\nvar players = Belt_MapString.fromArray(/* array */[\n      /* tuple */[\n        \"Cambot_______________\",\n        /* record */[\n          /* firstName */\"Cambot\",\n          /* id */\"Cambot_______________\",\n          /* lastName */\"\",\n          /* matchCount */25,\n          /* rating */1500,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"Crow_T_Robot_________\",\n        /* record */[\n          /* firstName */\"Crow T\",\n          /* id */\"Crow_T_Robot_________\",\n          /* lastName */\"Robot\",\n          /* matchCount */5,\n          /* rating */1700,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"Dr_Clayton_Forrester_\",\n        /* record */[\n          /* firstName */\"Clayton\",\n          /* id */\"Dr_Clayton_Forrester_\",\n          /* lastName */\"Forrester\",\n          /* matchCount */40,\n          /* rating */2100,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"Grandy_McMaster______\",\n        /* record */[\n          /* firstName */\"Grandy\",\n          /* id */\"Grandy_McMaster______\",\n          /* lastName */\"McMaster\",\n          /* matchCount */100,\n          /* rating */2600,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"Gypsy________________\",\n        /* record */[\n          /* firstName */\"Gypsy\",\n          /* id */\"Gypsy________________\",\n          /* lastName */\"\",\n          /* matchCount */15,\n          /* rating */1600,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"Joel_Robinson________\",\n        /* record */[\n          /* firstName */\"Joel\",\n          /* id */\"Joel_Robinson________\",\n          /* lastName */\"Robinson\",\n          /* matchCount */70,\n          /* rating */2400,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"Jonah_Heston_________\",\n        /* record */[\n          /* firstName */\"Jonah\",\n          /* id */\"Jonah_Heston_________\",\n          /* lastName */\"Heston\",\n          /* matchCount */50,\n          /* rating */2200,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"Kinga_Forrester______\",\n        /* record */[\n          /* firstName */\"Kinga\",\n          /* id */\"Kinga_Forrester______\",\n          /* lastName */\"Forrester\",\n          /* matchCount */20,\n          /* rating */1900,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"Larry_Erhardt________\",\n        /* record */[\n          /* firstName */\"Larry\",\n          /* id */\"Larry_Erhardt________\",\n          /* lastName */\"Erhardt\",\n          /* matchCount */45,\n          /* rating */1300,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"Mike_Nelson__________\",\n        /* record */[\n          /* firstName */\"Mike\",\n          /* id */\"Mike_Nelson__________\",\n          /* lastName */\"Nelson\",\n          /* matchCount */60,\n          /* rating */2300,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"Newbie_McNewberson___\",\n        /* record */[\n          /* firstName */\"Newbie\",\n          /* id */\"Newbie_McNewberson___\",\n          /* lastName */\"McNewberson\",\n          /* matchCount */0,\n          /* rating */800,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"Observer_Brain_Guy___\",\n        /* record */[\n          /* firstName */\"Brain\",\n          /* id */\"Observer_Brain_Guy___\",\n          /* lastName */\"Guy\",\n          /* matchCount */55,\n          /* rating */1200,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"Pearl_Forrester______\",\n        /* record */[\n          /* firstName */\"Pearl\",\n          /* id */\"Pearl_Forrester______\",\n          /* lastName */\"Forrester\",\n          /* matchCount */30,\n          /* rating */2000,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"Professor_Bobo_______\",\n        /* record */[\n          /* firstName */\"Bobo\",\n          /* id */\"Professor_Bobo_______\",\n          /* lastName */\"Professor\",\n          /* matchCount */75,\n          /* rating */1000,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"TVs_Frank____________\",\n        /* record */[\n          /* firstName */\"TV's\",\n          /* id */\"TVs_Frank____________\",\n          /* lastName */\"Frank\",\n          /* matchCount */35,\n          /* rating */1400,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"TVs_Son_of_TVs_Frank_\",\n        /* record */[\n          /* firstName */\"TV's\",\n          /* id */\"TVs_Son_of_TVs_Frank_\",\n          /* lastName */\"Max\",\n          /* matchCount */65,\n          /* rating */1100,\n          /* type_ */\"person\"\n        ]\n      ],\n      /* tuple */[\n        \"Tom_Servo____________\",\n        /* record */[\n          /* firstName */\"Tom\",\n          /* id */\"Tom_Servo____________\",\n          /* lastName */\"Servo\",\n          /* matchCount */10,\n          /* rating */1800,\n          /* type_ */\"person\"\n        ]\n      ]\n    ]);\n\nvar tournaments = Belt_MapString.fromArray(/* array */[\n      /* tuple */[\n        \"Bye_Round_Tourney____\",\n        /* record */[\n          /* byeQueue : array */[],\n          /* date */new Date(\"2019-06-12T23:49:47.103Z\"),\n          /* id */\"Bye_Round_Tourney____\",\n          /* name */\"Bye Round Tourney\",\n          /* playerIds : array */[\n            \"Joel_Robinson________\",\n            \"Crow_T_Robot_________\",\n            \"Tom_Servo____________\",\n            \"Gypsy________________\",\n            \"Cambot_______________\",\n            \"Newbie_McNewberson___\",\n            \"Grandy_McMaster______\"\n          ],\n          /* roundList : array */[/* array */[]],\n          /* tieBreaks : array */[\n            0,\n            1,\n            2,\n            3\n          ]\n        ]\n      ],\n      /* tuple */[\n        \"Bye_Round_Tourney_2__\",\n        /* record */[\n          /* byeQueue : array */[],\n          /* date */new Date(\"2019-06-12T23:49:47.103Z\"),\n          /* id */\"Bye_Round_Tourney_2__\",\n          /* name */\"Bye Round Tourney 2\",\n          /* playerIds : array */[\n            \"Joel_Robinson________\",\n            \"Crow_T_Robot_________\",\n            \"Tom_Servo____________\",\n            \"Gypsy________________\",\n            \"Cambot_______________\",\n            \"Newbie_McNewberson___\",\n            \"Grandy_McMaster______\"\n          ],\n          /* roundList : array */[/* array */[\n              /* record */[\n                /* id */\"xTXxZHB0sTt__xIAg45fm\",\n                /* whiteId */\"Grandy_McMaster______\",\n                /* blackId */\"Crow_T_Robot_________\",\n                /* whiteNewRating */2592,\n                /* blackNewRating */1833,\n                /* whiteOrigRating */2600,\n                /* blackOrigRating */1700,\n                /* whiteScore */0.0,\n                /* blackScore */1.0\n              ],\n              /* record */[\n                /* id */\"zQcf9RWXK7iuU6ibPzrhU\",\n                /* whiteId */\"Joel_Robinson________\",\n                /* blackId */\"Gypsy________________\",\n                /* whiteNewRating */2400,\n                /* blackNewRating */1600,\n                /* whiteOrigRating */2400,\n                /* blackOrigRating */1600,\n                /* whiteScore */1.0,\n                /* blackScore */0.0\n              ],\n              /* record */[\n                /* id */\"Vw_X0c7O4vshrYEO-oSzR\",\n                /* whiteId */\"Tom_Servo____________\",\n                /* blackId */\"Cambot_______________\",\n                /* whiteNewRating */1738,\n                /* blackNewRating */1526,\n                /* whiteOrigRating */1800,\n                /* blackOrigRating */1500,\n                /* whiteScore */0.0,\n                /* blackScore */1.0\n              ],\n              /* record */[\n                /* id */\"iSDujOVkOTrcLv_KJmd7s\",\n                /* whiteId */\"Newbie_McNewberson___\",\n                /* blackId */\"________DUMMY________\",\n                /* whiteNewRating */800,\n                /* blackNewRating */0,\n                /* whiteOrigRating */800,\n                /* blackOrigRating */0,\n                /* whiteScore */1.0,\n                /* blackScore */0.0\n              ]\n            ]],\n          /* tieBreaks : array */[\n            0,\n            1,\n            2,\n            3\n          ]\n        ]\n      ],\n      /* tuple */[\n        \"Bye_Tourney_3________\",\n        /* record */[\n          /* byeQueue : array */[],\n          /* date */new Date(\"2019-06-17T23:00:29.603Z\"),\n          /* id */\"Bye_Tourney_3________\",\n          /* name */\"Bye Tourney 3\",\n          /* playerIds : array */[\n            \"Kinga_Forrester______\",\n            \"Newbie_McNewberson___\",\n            \"Jonah_Heston_________\"\n          ],\n          /* roundList : array */[\n            /* array */[\n              /* record */[\n                /* id */\"KkFr4B7FDqiHRWmACgApf\",\n                /* whiteId */\"Kinga_Forrester______\",\n                /* blackId */\"Jonah_Heston_________\",\n                /* whiteNewRating */1894,\n                /* blackNewRating */2202,\n                /* whiteOrigRating */1900,\n                /* blackOrigRating */2200,\n                /* whiteScore */0.0,\n                /* blackScore */1.0\n              ],\n              /* record */[\n                /* id */\"R_BTsGSziwgyvFZM3yc5u\",\n                /* whiteId */\"Newbie_McNewberson___\",\n                /* blackId */\"________DUMMY________\",\n                /* whiteNewRating */793,\n                /* blackNewRating */0,\n                /* whiteOrigRating */793,\n                /* blackOrigRating */0,\n                /* whiteScore */1.0,\n                /* blackScore */0.0\n              ]\n            ],\n            /* array */[\n              /* record */[\n                /* id */\"rcyCfpZU6olav5kdVac44\",\n                /* whiteId */\"Jonah_Heston_________\",\n                /* blackId */\"Newbie_McNewberson___\",\n                /* whiteNewRating */2187,\n                /* blackNewRating */953,\n                /* whiteOrigRating */2202,\n                /* blackOrigRating */793,\n                /* whiteScore */0.0,\n                /* blackScore */1.0\n              ],\n              /* record */[\n                /* id */\"Nc0Om5fEuwSuzFls9wmME\",\n                /* whiteId */\"Kinga_Forrester______\",\n                /* blackId */\"________DUMMY________\",\n                /* whiteNewRating */1894,\n                /* blackNewRating */0,\n                /* whiteOrigRating */1894,\n                /* blackOrigRating */0,\n                /* whiteScore */1.0,\n                /* blackScore */0.0\n              ]\n            ],\n            /* array */[\n              /* record */[\n                /* id */\"uawjKwbiA38RP8pA--tlw\",\n                /* whiteId */\"Newbie_McNewberson___\",\n                /* blackId */\"Kinga_Forrester______\",\n                /* whiteNewRating */952,\n                /* blackNewRating */1894,\n                /* whiteOrigRating */953,\n                /* blackOrigRating */1894,\n                /* whiteScore */0.0,\n                /* blackScore */1.0\n              ],\n              /* record */[\n                /* id */\"-kwIDxjPhWVRbqxtRZ26_\",\n                /* whiteId */\"Jonah_Heston_________\",\n                /* blackId */\"________DUMMY________\",\n                /* whiteNewRating */2187,\n                /* blackNewRating */0,\n                /* whiteOrigRating */2187,\n                /* blackOrigRating */0,\n                /* whiteScore */1.0,\n                /* blackScore */0.0\n              ]\n            ]\n          ],\n          /* tieBreaks : array */[\n            0,\n            1,\n            2,\n            3\n          ]\n        ]\n      ],\n      /* tuple */[\n        \"Simple_Pairing_______\",\n        /* record */[\n          /* byeQueue : array */[],\n          /* date */new Date(\"2019-06-14T11:40:34.407Z\"),\n          /* id */\"Simple_Pairing_______\",\n          /* name */\"Simple Pairing\",\n          /* playerIds : array */[\n            \"Newbie_McNewberson___\",\n            \"Grandy_McMaster______\",\n            \"Joel_Robinson________\",\n            \"Dr_Clayton_Forrester_\",\n            \"TVs_Frank____________\",\n            \"Crow_T_Robot_________\",\n            \"Tom_Servo____________\",\n            \"Gypsy________________\"\n          ],\n          /* roundList : array */[\n            /* array */[\n              /* record */[\n                /* id */\"KdLva8hWqYHdaU9KnFTe2\",\n                /* whiteId */\"Crow_T_Robot_________\",\n                /* blackId */\"Grandy_McMaster______\",\n                /* whiteNewRating */1699,\n                /* blackNewRating */2600,\n                /* whiteOrigRating */1700,\n                /* blackOrigRating */2600,\n                /* whiteScore */0.0,\n                /* blackScore */1.0\n              ],\n              /* record */[\n                /* id */\"WDPFsNF1yADs4qofFwCY0\",\n                /* whiteId */\"Gypsy________________\",\n                /* blackId */\"Joel_Robinson________\",\n                /* whiteNewRating */1650,\n                /* blackNewRating */2389,\n                /* whiteOrigRating */1600,\n                /* blackOrigRating */2400,\n                /* whiteScore */1.0,\n                /* blackScore */0.0\n              ],\n              /* record */[\n                /* id */\"R5sXfTOJw5vrJ4IytAjSi\",\n                /* whiteId */\"TVs_Frank____________\",\n                /* blackId */\"Dr_Clayton_Forrester_\",\n                /* whiteNewRating */1400,\n                /* blackNewRating */2100,\n                /* whiteOrigRating */1400,\n                /* blackOrigRating */2100,\n                /* whiteScore */0.0,\n                /* blackScore */1.0\n              ],\n              /* record */[\n                /* id */\"2YOsn_JJFnaUMhRBAc9KY\",\n                /* whiteId */\"Newbie_McNewberson___\",\n                /* blackId */\"Tom_Servo____________\",\n                /* whiteNewRating */1597,\n                /* blackNewRating */1728,\n                /* whiteOrigRating */800,\n                /* blackOrigRating */1800,\n                /* whiteScore */1.0,\n                /* blackScore */0.0\n              ]\n            ],\n            /* array */[]\n          ],\n          /* tieBreaks : array */[\n            0,\n            1,\n            2,\n            3\n          ]\n        ]\n      ],\n      /* tuple */[\n        \"Pairing_With_Draws___\",\n        /* record */[\n          /* byeQueue : array */[],\n          /* date */new Date(\"2019-06-14T14:18:06.686Z\"),\n          /* id */\"Pairing_With_Draws___\",\n          /* name */\"Pairing with draws\",\n          /* playerIds : array */[\n            \"Newbie_McNewberson___\",\n            \"Grandy_McMaster______\",\n            \"Joel_Robinson________\",\n            \"Dr_Clayton_Forrester_\",\n            \"TVs_Frank____________\",\n            \"Crow_T_Robot_________\",\n            \"Tom_Servo____________\",\n            \"Gypsy________________\"\n          ],\n          /* roundList : array */[\n            /* array */[\n              /* record */[\n                /* id */\"ryWXwvFGwBKQqGBbMYeps\",\n                /* whiteId */\"Crow_T_Robot_________\",\n                /* blackId */\"Grandy_McMaster______\",\n                /* whiteNewRating */1699,\n                /* blackNewRating */2600,\n                /* whiteOrigRating */1700,\n                /* blackOrigRating */2600,\n                /* whiteScore */0.0,\n                /* blackScore */1.0\n              ],\n              /* record */[\n                /* id */\"2KKVbi0AfNxfJAJobTgP5\",\n                /* whiteId */\"Gypsy________________\",\n                /* blackId */\"Joel_Robinson________\",\n                /* whiteNewRating */1650,\n                /* blackNewRating */2389,\n                /* whiteOrigRating */1600,\n                /* blackOrigRating */2400,\n                /* whiteScore */1.0,\n                /* blackScore */0.0\n              ],\n              /* record */[\n                /* id */\"zdlBHBAqgV2qabn2oBa2a\",\n                /* whiteId */\"TVs_Frank____________\",\n                /* blackId */\"Dr_Clayton_Forrester_\",\n                /* whiteNewRating */1400,\n                /* blackNewRating */2100,\n                /* whiteOrigRating */1400,\n                /* blackOrigRating */2100,\n                /* whiteScore */0.0,\n                /* blackScore */1.0\n              ],\n              /* record */[\n                /* id */\"8fGxU3tLpd8GibuSQr9-Y\",\n                /* whiteId */\"Newbie_McNewberson___\",\n                /* blackId */\"Tom_Servo____________\",\n                /* whiteNewRating */1197,\n                /* blackNewRating */1764,\n                /* whiteOrigRating */800,\n                /* blackOrigRating */1800,\n                /* whiteScore */0.5,\n                /* blackScore */0.5\n              ]\n            ],\n            /* array */[]\n          ],\n          /* tieBreaks : array */[\n            0,\n            1,\n            2,\n            3\n          ]\n        ]\n      ]\n    ]);\n\nexport {\n  options ,\n  players ,\n  tournaments ,\n  \n}\n/* options Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 6.0.3, PLEASE EDIT WITH CARE\n\nimport * as Block from \"bs-platform/lib/es6/block.js\";\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as React from \"react\";\nimport * as Js_dict from \"bs-platform/lib/es6/js_dict.js\";\nimport * as Js_json from \"bs-platform/lib/es6/js_json.js\";\nimport * as Numeral from \"numeral\";\nimport * as Caml_array from \"bs-platform/lib/es6/caml_array.js\";\nimport * as Belt_Option from \"bs-platform/lib/es6/belt_Option.js\";\nimport * as Caml_option from \"bs-platform/lib/es6/caml_option.js\";\nimport * as Data$Coronate from \"./Data.bs.js\";\nimport * as ReactFeather from \"react-feather\";\nimport * as Hooks$Coronate from \"./Hooks.bs.js\";\nimport * as Utils$Coronate from \"./Utils.bs.js\";\nimport * as Window$Coronate from \"./Window.bs.js\";\nimport * as DemoData$Coronate from \"./DemoData.bs.js\";\nimport * as TestData$Coronate from \"./TestData.bs.js\";\n\nfunction s(prim) {\n  return prim;\n}\n\nfunction getDateForFile(param) {\n  var date = new Date();\n  return /* array */[\n            date.getFullYear().toString(),\n            Numeral.default(date.getMonth() + 1.0).format(\"00\"),\n            Numeral.default(date.getDay() + 1.0).format(\"00\")\n          ].join(\"-\");\n}\n\nfunction invalidAlert(param) {\n  return Utils$Coronate.alert(\"That data is invalid! A more helpful error message could not be written yet.\");\n}\n\nfunction decodeWith(json, func) {\n  return Belt_Option.mapWithDefault(Belt_Option.mapWithDefault(json, undefined, Js_json.decodeObject), undefined, (function (dict) {\n                return Caml_option.some(Hooks$Coronate.Db[/* jsDictToReMap */7](dict, func));\n              }));\n}\n\nfunction decodePlayer(json) {\n  return Data$Coronate.Player[/* tFromJs */1](json);\n}\n\nfunction decodeTourney(json) {\n  return Data$Coronate.Tournament[/* tFromJsonDeep */4](json);\n}\n\nfunction decodeOptions(json) {\n  var match = Js_json.decodeObject(json);\n  if (match !== undefined) {\n    var dict = Caml_option.valFromOption(match);\n    var match$1 = Belt_Option.mapWithDefault(Js_dict.get(dict, \"byeValue\"), undefined, Js_json.decodeNumber);\n    var match$2 = Belt_Option.mapWithDefault(Js_dict.get(dict, \"avoidPairs\"), undefined, Js_json.decodeArray);\n    var match$3 = Belt_Option.mapWithDefault(Js_dict.get(dict, \"lastBackup\"), undefined, Js_json.decodeString);\n    if (match$1 !== undefined && match$2 !== undefined && match$3 !== undefined) {\n      return Data$Coronate.db_optionsFromJs({\n                  byeValue: match$1,\n                  avoidPairs: match$2,\n                  lastBackup: new Date(match$3)\n                });\n    } else {\n      return undefined;\n    }\n  }\n  \n}\n\nfunction jsonToData(json) {\n  var match = Js_json.decodeObject(json);\n  if (match !== undefined) {\n    var dict = Caml_option.valFromOption(match);\n    return /* tuple */[\n            Belt_Option.mapWithDefault(Js_dict.get(dict, \"options\"), undefined, decodeOptions),\n            decodeWith(Js_dict.get(dict, \"players\"), decodePlayer),\n            decodeWith(Js_dict.get(dict, \"tournaments\"), decodeTourney)\n          ];\n  } else {\n    return /* tuple */[\n            undefined,\n            undefined,\n            undefined\n          ];\n  }\n}\n\nfunction PageOptions$LastBackupDate(Props) {\n  var date = Props.date;\n  var match = date.getTime();\n  if (match !== 0.0) {\n    return React.createElement(Utils$Coronate.DateTimeFormat[/* make */0], {\n                date: date\n              });\n  } else {\n    return \"Never\";\n  }\n}\n\nvar LastBackupDate = /* module */[/* make */PageOptions$LastBackupDate];\n\nfunction PageOptions(Props) {\n  var match = Hooks$Coronate.Db[/* useAllTournaments */13](/* () */0);\n  var tourneysDispatch = match[1];\n  var tournaments = match[0];\n  var match$1 = Hooks$Coronate.Db[/* useAllPlayers */12](/* () */0);\n  var playersDispatch = match$1[1];\n  var players = match$1[0];\n  var match$2 = React.useState((function () {\n          return \"\";\n        }));\n  var setText = match$2[1];\n  var text = match$2[0];\n  var match$3 = Hooks$Coronate.Db[/* useOptions */15](/* () */0);\n  var optionsDispatch = match$3[1];\n  var options = match$3[0];\n  var match$4 = Window$Coronate.useWindowContext(/* () */0);\n  var windowDispatch = match$4[1];\n  React.useEffect((function () {\n          Curry._1(windowDispatch, /* SetTitle */Block.__(5, [\"Options\"]));\n          return (function (param) {\n                    return Curry._1(windowDispatch, /* SetTitle */Block.__(5, [\"\"]));\n                  });\n        }), /* array */[windowDispatch]);\n  var exportData = React.useMemo((function () {\n          return {\n                  options: Data$Coronate.db_optionsToJs(options),\n                  players: Hooks$Coronate.Db[/* reMapToJsDict */8](players, Data$Coronate.Player[/* tToJs */0]),\n                  tournaments: Hooks$Coronate.Db[/* reMapToJsDict */8](tournaments, Data$Coronate.Tournament[/* tToJsDeep */2])\n                };\n        }), /* tuple */[\n        options,\n        tournaments,\n        players\n      ]);\n  var match$5 = JSON.stringify(exportData);\n  var exportDataURI = match$5 !== undefined ? \"data:application/json,\" + encodeURIComponent(match$5) : \"\";\n  React.useEffect((function () {\n          var json = (JSON.stringify(exportData, null, 4));\n          Curry._1(setText, (function (param) {\n                  return json;\n                }));\n          return undefined;\n        }), /* tuple */[\n        exportData,\n        setText\n      ]);\n  var loadData = function (tourneys, players, options) {\n    Curry._1(tourneysDispatch, /* SetState */Block.__(2, [tourneys]));\n    Curry._1(optionsDispatch, /* SetState */Block.__(5, [options]));\n    Curry._1(playersDispatch, /* SetState */Block.__(2, [players]));\n    return Utils$Coronate.alert(\"Data loaded.\");\n  };\n  var handleText = function ($$event) {\n    $$event.preventDefault();\n    var exit = 0;\n    var rawJson;\n    try {\n      rawJson = JSON.parse(text);\n      exit = 1;\n    }\n    catch (exn){\n      return Utils$Coronate.alert(\"That data is invalid! A more helpful error message could not be written yet.\");\n    }\n    if (exit === 1) {\n      var match = jsonToData(rawJson);\n      var match$1 = match[0];\n      if (match$1 !== undefined) {\n        var match$2 = match[1];\n        if (match$2 !== undefined) {\n          var match$3 = match[2];\n          if (match$3 !== undefined) {\n            return loadData(Caml_option.valFromOption(match$3), Caml_option.valFromOption(match$2), match$1);\n          } else {\n            return Utils$Coronate.alert(\"That data is invalid! A more helpful error message could not be written yet.\");\n          }\n        } else {\n          return Utils$Coronate.alert(\"That data is invalid! A more helpful error message could not be written yet.\");\n        }\n      } else {\n        return Utils$Coronate.alert(\"That data is invalid! A more helpful error message could not be written yet.\");\n      }\n    }\n    \n  };\n  var handleFile = function ($$event) {\n    $$event.preventDefault();\n    var reader = new FileReader();\n    var onload = function (ev) {\n      var data = ev.target.result;\n      var exit = 0;\n      var rawJson;\n      try {\n        rawJson = JSON.parse(data);\n        exit = 1;\n      }\n      catch (exn){\n        return Utils$Coronate.alert(\"That data is invalid! A more helpful error message could not be written yet.\");\n      }\n      if (exit === 1) {\n        var match = jsonToData(rawJson);\n        var match$1 = match[0];\n        if (match$1 !== undefined) {\n          var match$2 = match[1];\n          if (match$2 !== undefined) {\n            var match$3 = match[2];\n            if (match$3 !== undefined) {\n              return loadData(Caml_option.valFromOption(match$3), Caml_option.valFromOption(match$2), match$1);\n            } else {\n              return Utils$Coronate.alert(\"That data is invalid! A more helpful error message could not be written yet.\");\n            }\n          } else {\n            return Utils$Coronate.alert(\"That data is invalid! A more helpful error message could not be written yet.\");\n          }\n        } else {\n          return Utils$Coronate.alert(\"That data is invalid! A more helpful error message could not be written yet.\");\n        }\n      }\n      \n    };\n    reader.onload = onload;\n    reader.readAsText(Caml_array.caml_array_get($$event.currentTarget.files, 0));\n    $$event.currentTarget.value = \"\";\n    return /* () */0;\n  };\n  var reloadDemoData = function ($$event) {\n    $$event.preventDefault();\n    return loadData(DemoData$Coronate.tournaments, DemoData$Coronate.players, DemoData$Coronate.options);\n  };\n  var loadTestData = function ($$event) {\n    $$event.preventDefault();\n    return loadData(TestData$Coronate.tournaments, TestData$Coronate.players, TestData$Coronate.options);\n  };\n  var handleTextChange = function ($$event) {\n    var newText = $$event.currentTarget.value;\n    return Curry._1(setText, (function (param) {\n                  return newText;\n                }));\n  };\n  var match$6 = process.env.NODE_ENV !== \"production\";\n  return React.createElement(Window$Coronate.WindowBody[/* make */0], {\n              children: React.createElement(\"div\", {\n                    className: \"content-area\"\n                  }, React.createElement(\"h2\", undefined, \"Bye  settings\"), React.createElement(\"form\", undefined, React.createElement(\"p\", {\n                            className: \"caption-30\"\n                          }, \"Select the default score for a bye round.\"), React.createElement(\"label\", {\n                            className: \"monospace body-30\"\n                          }, \"1 \", React.createElement(\"input\", {\n                                checked: options[/* byeValue */1] === 1.0,\n                                type: \"radio\",\n                                onChange: (function (param) {\n                                    return Curry._1(optionsDispatch, /* SetByeValue */Block.__(4, [1.0]));\n                                  })\n                              })), React.createElement(\"label\", {\n                            className: \"monospace body-30\"\n                          }, \" \", React.createElement(\"input\", {\n                                checked: options[/* byeValue */1] === 0.5,\n                                type: \"radio\",\n                                onChange: (function (param) {\n                                    return Curry._1(optionsDispatch, /* SetByeValue */Block.__(4, [0.5]));\n                                  })\n                              }))), React.createElement(\"h2\", undefined, \"Manage data\"), React.createElement(\"p\", {\n                        className: \"caption-20\"\n                      }, \"Last export: \", React.createElement(PageOptions$LastBackupDate, {\n                            date: options[/* lastBackup */2]\n                          })), React.createElement(\"p\", undefined, React.createElement(\"a\", {\n                            download: \"coronate-\" + (getDateForFile(/* () */0) + \".json\"),\n                            href: exportDataURI,\n                            onClick: (function (param) {\n                                return Curry._1(optionsDispatch, /* SetLastBackup */Block.__(6, [new Date()]));\n                              })\n                          }, React.createElement(ReactFeather.Download, { }), \" Export all data\")), React.createElement(\"label\", {\n                        htmlFor: \"file\"\n                      }, \"Load data file:\"), React.createElement(\"input\", {\n                        id: \"file\",\n                        name: \"file\",\n                        type: \"file\",\n                        onChange: handleFile\n                      }), React.createElement(\"h2\", undefined, \"Danger zone\"), React.createElement(\"p\", {\n                        className: \"caption-30\"\n                      }, \"I hope you know what you're doing...\"), React.createElement(\"button\", {\n                        onClick: reloadDemoData\n                      }, \"Reset demo data (this erases everything else)\"), \" \", match$6 ? React.createElement(\"button\", {\n                          onClick: loadTestData\n                        }, \"Load testing data\") : null, React.createElement(\"h3\", undefined, \"Advanced: manually edit data\"), React.createElement(\"form\", {\n                        onSubmit: handleText\n                      }, React.createElement(\"textarea\", {\n                            className: \"json\",\n                            spellCheck: false,\n                            cols: 50,\n                            name: \"playerdata\",\n                            rows: 25,\n                            value: text,\n                            onChange: handleTextChange\n                          }), React.createElement(\"p\", undefined, React.createElement(\"input\", {\n                                type: \"submit\",\n                                value: \"Load\"\n                              }))))\n            });\n}\n\nvar make = PageOptions;\n\nexport {\n  s ,\n  getDateForFile ,\n  invalidAlert ,\n  decodeWith ,\n  decodePlayer ,\n  decodeTourney ,\n  decodeOptions ,\n  jsonToData ,\n  LastBackupDate ,\n  make ,\n  \n}\n/* react Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 6.0.3, PLEASE EDIT WITH CARE\n\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as Js_dict from \"bs-platform/lib/es6/js_dict.js\";\nimport * as EloRank from \"elo-rank\";\nimport * as Caml_array from \"bs-platform/lib/es6/caml_array.js\";\nimport * as Caml_int32 from \"bs-platform/lib/es6/caml_int32.js\";\nimport * as Belt_SortArray from \"bs-platform/lib/es6/belt_SortArray.js\";\nimport * as Utils$Coronate from \"./Utils.bs.js\";\n\nfunction isNotDummy(scoreDict, oppId) {\n  var match = Js_dict.get(scoreDict, oppId);\n  if (match !== undefined) {\n    return !match[/* isDummy */3];\n  } else {\n    return true;\n  }\n}\n\nfunction getPlayerScore(scoreDict, id) {\n  var match = Js_dict.get(scoreDict, id);\n  if (match !== undefined) {\n    return Utils$Coronate.arraySumFloat(match[/* results */6]);\n  } else {\n    return 0.0;\n  }\n}\n\nfunction getOpponentScores(scoreDict, id) {\n  var match = Js_dict.get(scoreDict, id);\n  if (match !== undefined) {\n    return Object.keys(match[/* opponentResults */4]).filter((function (param) {\n                    return isNotDummy(scoreDict, param);\n                  })).map((function (param) {\n                  return getPlayerScore(scoreDict, param);\n                }));\n  } else {\n    return /* array */[];\n  }\n}\n\nfunction getMedianScore(scoreDict, id) {\n  return Utils$Coronate.arraySumFloat(Belt_SortArray.stableSortBy(getOpponentScores(scoreDict, id), (function (param, param$1) {\n                      return Utils$Coronate.ascend((function (x) {\n                                    return x;\n                                  }), param, param$1);\n                    })).slice(1, -1));\n}\n\nfunction getSolkoffScore(scoreDict, id) {\n  return Utils$Coronate.arraySumFloat(getOpponentScores(scoreDict, id));\n}\n\nfunction runningReducer(acc, score) {\n  return acc.concat(/* array */[Utils$Coronate.last(acc) + score]);\n}\n\nfunction getCumulativeScore(scoreDict, id) {\n  var match = Js_dict.get(scoreDict, id);\n  if (match !== undefined) {\n    return Utils$Coronate.arraySumFloat(match[/* resultsNoByes */7].reduce(runningReducer, /* array */[0.0]));\n  } else {\n    return 0.0;\n  }\n}\n\nfunction getCumulativeOfOpponentScore(scoreDict, id) {\n  var match = Js_dict.get(scoreDict, id);\n  if (match !== undefined) {\n    return Utils$Coronate.arraySumFloat(Object.keys(match[/* opponentResults */4]).filter((function (param) {\n                        return isNotDummy(scoreDict, param);\n                      })).map((function (param) {\n                      return getCumulativeScore(scoreDict, param);\n                    })));\n  } else {\n    return 0.0;\n  }\n}\n\nfunction getColorBalanceScore(scoreDict, id) {\n  var match = Js_dict.get(scoreDict, id);\n  if (match !== undefined) {\n    return Utils$Coronate.arraySumFloat(match[/* colorScores */0]);\n  } else {\n    return 0.0;\n  }\n}\n\nvar tieBreakMethods = /* array */[\n  /* record */[\n    /* func */getMedianScore,\n    /* id */0,\n    /* name */\"Median\"\n  ],\n  /* record */[\n    /* func */getSolkoffScore,\n    /* id */1,\n    /* name */\"Solkoff\"\n  ],\n  /* record */[\n    /* func */getCumulativeScore,\n    /* id */2,\n    /* name */\"Cumulative score\"\n  ],\n  /* record */[\n    /* func */getCumulativeOfOpponentScore,\n    /* id */3,\n    /* name */\"Cumulative of opposition\"\n  ],\n  /* record */[\n    /* func */getColorBalanceScore,\n    /* id */4,\n    /* name */\"Most black\"\n  ]\n];\n\nfunction getNamefromIndex(index) {\n  return Caml_array.caml_array_get(tieBreakMethods, index)[/* name */2];\n}\n\nfunction getTieBreakNames(idList) {\n  return idList.map(getNamefromIndex);\n}\n\nfunction createBlankScoreData(id) {\n  return /* record */[\n          /* colorScores : array */[],\n          /* colors : array */[],\n          /* id */id,\n          /* isDummy */false,\n          /* opponentResults */{ },\n          /* ratings : array */[],\n          /* results : array */[],\n          /* resultsNoByes : array */[]\n        ];\n}\n\nfunction createStandingList(methods, scoreData) {\n  var selectedTieBreakFuncs = methods.map((function (i) {\n          return Caml_array.caml_array_get(tieBreakMethods, i)[/* func */0];\n        }));\n  var standings = Object.keys(scoreData).map((function (id) {\n          return /* record */[\n                  /* id */id,\n                  /* score */getPlayerScore(scoreData, id),\n                  /* tieBreaks */selectedTieBreakFuncs.map((function (func) {\n                          return Curry._2(func, scoreData, id);\n                        }))\n                ];\n        }));\n  var sortTieBreakFuncList = selectedTieBreakFuncs.map((function (param, index) {\n          return (function (param, param$1) {\n              return Utils$Coronate.descend((function (x) {\n                            return Caml_array.caml_array_get(x[/* tieBreaks */2], index);\n                          }), param, param$1);\n            });\n        }));\n  var sortFuncList = /* array */[(function (param, param$1) {\n          return Utils$Coronate.descend((function (x) {\n                        return x[/* score */1];\n                      }), param, param$1);\n        })].concat(sortTieBreakFuncList);\n  return Utils$Coronate.sortWith(sortFuncList, standings);\n}\n\nfunction areScoresEqual(standing1, standing2) {\n  var equalScores = standing1[/* score */1] !== standing2[/* score */1];\n  if (equalScores) {\n    return false;\n  } else {\n    return !standing1[/* tieBreaks */2].reduce((function (acc, value, i) {\n                    return /* array */[value !== Caml_array.caml_array_get(standing2[/* tieBreaks */2], i)].concat(acc);\n                  }), /* array */[]).includes(true);\n  }\n}\n\nfunction createStandingTree(standingList) {\n  return standingList.reduce((function (acc, standing, i) {\n                var match = i === 0;\n                var isNewRank = match ? true : !areScoresEqual(standing, Caml_array.caml_array_get(standingList, i - 1 | 0));\n                if (isNewRank) {\n                  return acc.concat(/* array */[/* array */[standing]]);\n                } else {\n                  var lastIndex = acc.length - 1 | 0;\n                  Caml_array.caml_array_set(acc, lastIndex, Caml_array.caml_array_get(acc, lastIndex).concat(/* array */[standing]));\n                  return acc;\n                }\n              }), /* array */[]);\n}\n\nfunction getKFactor(matchCount) {\n  var match = matchCount > 0;\n  var ne = match ? matchCount : 1;\n  return Caml_int32.div(800, ne);\n}\n\nfunction keepAboveFloor(rating) {\n  var match = rating > 100;\n  if (match) {\n    return rating;\n  } else {\n    return 100;\n  }\n}\n\nfunction calcNewRatings(param, param$1, param$2) {\n  var blackRating = param[1];\n  var whiteRating = param[0];\n  var whiteElo = new EloRank(getKFactor(param$1[0]));\n  var blackElo = new EloRank(getKFactor(param$1[1]));\n  var whiteScoreExpected = whiteElo.getExpected(whiteRating, blackRating);\n  var blackScoreExpected = blackElo.getExpected(blackRating, whiteRating);\n  return /* tuple */[\n          keepAboveFloor(whiteElo.updateRating(whiteScoreExpected, param$2[0], whiteRating)),\n          keepAboveFloor(blackElo.updateRating(blackScoreExpected, param$2[1], blackRating))\n        ];\n}\n\nvar floor = 100;\n\nexport {\n  isNotDummy ,\n  getPlayerScore ,\n  getOpponentScores ,\n  getMedianScore ,\n  getSolkoffScore ,\n  runningReducer ,\n  getCumulativeScore ,\n  getCumulativeOfOpponentScore ,\n  getColorBalanceScore ,\n  tieBreakMethods ,\n  getNamefromIndex ,\n  getTieBreakNames ,\n  createBlankScoreData ,\n  createStandingList ,\n  areScoresEqual ,\n  createStandingTree ,\n  getKFactor ,\n  floor ,\n  keepAboveFloor ,\n  calcNewRatings ,\n  \n}\n/* elo-rank Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 6.0.3, PLEASE EDIT WITH CARE\n\nimport * as Js_dict from \"bs-platform/lib/es6/js_dict.js\";\nimport * as Belt_MapString from \"bs-platform/lib/es6/belt_MapString.js\";\nimport * as Utils$Coronate from \"./Utils.bs.js\";\nimport * as Scoring$Coronate from \"./Scoring.bs.js\";\n\nfunction colorToScore(color) {\n  var match = color === 1;\n  if (match) {\n    return 1.0;\n  } else {\n    return -1.0;\n  }\n}\n\nfunction getOppColor(color) {\n  var match = color === 0;\n  if (match) {\n    return 1;\n  } else {\n    return 0;\n  }\n}\n\nvar dummyId = \"________DUMMY________\";\n\nfunction isDummyId(playerId) {\n  return playerId === dummyId;\n}\n\nfunction matches2ScoreData(matchList) {\n  var scoreDict = { };\n  var makeScoreData = function (playerId, origRating, newRating, result, oppId, color) {\n    var match = Js_dict.get(scoreDict, playerId);\n    var oldData = match !== undefined ? match : Scoring$Coronate.createBlankScoreData(playerId);\n    var match$1 = oldData[/* ratings */5].length;\n    var newRatings = match$1 !== 0 ? /* array */[newRating] : /* array */[\n        origRating,\n        newRating\n      ];\n    var match$2 = oppId === dummyId;\n    var newResultsNoByes = match$2 ? /* array */[] : /* array */[result];\n    var newOpponentResults = oldData[/* opponentResults */4];\n    var match$3 = Js_dict.get(newOpponentResults, oppId);\n    var oppResult = match$3 !== undefined ? match$3 + result : result;\n    newOpponentResults[oppId] = oppResult;\n    return /* record */[\n            /* colorScores */oldData[/* colorScores */0].concat(/* array */[colorToScore(color)]),\n            /* colors */oldData[/* colors */1].concat(/* array */[color]),\n            /* id */playerId,\n            /* isDummy */playerId === dummyId,\n            /* opponentResults */newOpponentResults,\n            /* ratings */oldData[/* ratings */5].concat(newRatings),\n            /* results */oldData[/* results */6].concat(/* array */[result]),\n            /* resultsNoByes */oldData[/* resultsNoByes */7].concat(newResultsNoByes)\n          ];\n  };\n  matchList.forEach((function (match_) {\n          var newDataWhite = makeScoreData(match_[/* whiteId */1], match_[/* whiteOrigRating */5], match_[/* whiteNewRating */3], match_[/* whiteScore */7], match_[/* blackId */2], 0);\n          scoreDict[match_[/* whiteId */1]] = newDataWhite;\n          var newDataBlack = makeScoreData(match_[/* blackId */2], match_[/* blackOrigRating */6], match_[/* blackNewRating */4], match_[/* blackScore */8], match_[/* whiteId */1], 1);\n          scoreDict[match_[/* blackId */2]] = newDataBlack;\n          return /* () */0;\n        }));\n  return scoreDict;\n}\n\nfunction avoidPairReducer(acc, pair) {\n  var id2 = pair[1];\n  var id1 = pair[0];\n  var currentArr1 = Js_dict.get(acc, id1);\n  var newArr1 = currentArr1 !== undefined ? currentArr1.concat(/* array */[id2]) : /* array */[id2];\n  acc[id1] = newArr1;\n  var currentArr2 = Js_dict.get(acc, id2);\n  var newArr2 = currentArr2 !== undefined ? currentArr2.concat(/* array */[id1]) : /* array */[id1];\n  acc[id2] = newArr2;\n  return acc;\n}\n\nfunction createPairingData(playerData, avoidPairs, scoreDict) {\n  var avoidDict = avoidPairs.reduce(avoidPairReducer, { });\n  var pairData = { };\n  Belt_MapString.valuesToArray(playerData).forEach((function (data) {\n          var match = Js_dict.get(scoreDict, data[/* id */1]);\n          var playerStats = match !== undefined ? match : Scoring$Coronate.createBlankScoreData(data[/* id */1]);\n          var match$1 = Js_dict.get(avoidDict, data[/* id */1]);\n          var newAvoidIds = match$1 !== undefined ? match$1 : /* array */[];\n          var newData_000 = /* id */data[/* id */1];\n          var newData_002 = /* colorScores */playerStats[/* colorScores */0];\n          var newData_003 = /* colors */playerStats[/* colors */1];\n          var newData_006 = /* opponents */Object.keys(playerStats[/* opponentResults */4]);\n          var newData_007 = /* rating */data[/* rating */4];\n          var newData_008 = /* score */Utils$Coronate.arraySumFloat(playerStats[/* results */6]);\n          var newData = /* record */[\n            newData_000,\n            /* avoidIds */newAvoidIds,\n            newData_002,\n            newData_003,\n            /* halfPos */0,\n            /* isUpperHalf */false,\n            newData_006,\n            newData_007,\n            newData_008\n          ];\n          pairData[data[/* id */1]] = newData;\n          return /* () */0;\n        }));\n  return pairData;\n}\n\nvar blackValue = 1.0;\n\nvar whiteValue = -1.0;\n\nvar black = 1;\n\nvar white = 0;\n\nexport {\n  blackValue ,\n  whiteValue ,\n  black ,\n  white ,\n  colorToScore ,\n  getOppColor ,\n  dummyId ,\n  isDummyId ,\n  matches2ScoreData ,\n  avoidPairReducer ,\n  createPairingData ,\n  \n}\n/* Utils-Coronate Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 6.0.3, PLEASE EDIT WITH CARE\n\nimport * as Block from \"bs-platform/lib/es6/block.js\";\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as React from \"react\";\nimport * as Js_dict from \"bs-platform/lib/es6/js_dict.js\";\nimport * as Caml_array from \"bs-platform/lib/es6/caml_array.js\";\nimport * as Caml_format from \"bs-platform/lib/es6/caml_format.js\";\nimport * as Dialog from \"@reach/dialog\";\nimport * as Data$Coronate from \"./Data.bs.js\";\nimport * as ReactFeather from \"react-feather\";\nimport * as Belt_MapString from \"bs-platform/lib/es6/belt_MapString.js\";\nimport * as Hooks$Coronate from \"./Hooks.bs.js\";\nimport * as Pages$Coronate from \"./Pages.bs.js\";\nimport * as Utils$Coronate from \"./Utils.bs.js\";\nimport * as Window$Coronate from \"./Window.bs.js\";\nimport * as Scoring$Coronate from \"./Scoring.bs.js\";\nimport * as Converters$Coronate from \"./Converters.bs.js\";\nimport * as VisuallyHidden from \"@reach/visually-hidden\";\n\nfunction s(prim) {\n  return prim;\n}\n\nvar sortName = /* KeyString */Block.__(0, [(function (x) {\n        return x[/* firstName */0];\n      })]);\n\nvar sortRating = /* KeyInt */Block.__(1, [(function (x) {\n        return x[/* rating */4];\n      })]);\n\nvar sortMatchCount = /* KeyInt */Block.__(1, [(function (x) {\n        return x[/* matchCount */3];\n      })]);\n\nfunction defaultFirstName(param) {\n  return \"\";\n}\n\nfunction defaultLastName(param) {\n  return \"\";\n}\n\nfunction defaultRating(param) {\n  return 1200;\n}\n\nfunction PagePlayers$NewPlayerForm(Props) {\n  var dispatch = Props.dispatch;\n  var match = React.useState((function () {\n          return \"\";\n        }));\n  var setFirstName = match[1];\n  var firstName = match[0];\n  var match$1 = React.useState((function () {\n          return \"\";\n        }));\n  var setLastName = match$1[1];\n  var lastName = match$1[0];\n  var match$2 = React.useState((function () {\n          return 1200;\n        }));\n  var setRating = match$2[1];\n  var rating = match$2[0];\n  var handleSubmit = function ($$event) {\n    $$event.preventDefault();\n    Curry._1(setFirstName, defaultFirstName);\n    Curry._1(setLastName, defaultLastName);\n    Curry._1(setRating, defaultRating);\n    var id = Utils$Coronate.nanoid(/* () */0);\n    return Curry._1(dispatch, /* SetItem */Block.__(1, [\n                  id,\n                  /* record */[\n                    /* firstName */firstName,\n                    /* id */id,\n                    /* lastName */lastName,\n                    /* matchCount */0,\n                    /* rating */rating,\n                    /* type_ */\"person\"\n                  ]\n                ]));\n  };\n  var updateField = function ($$event) {\n    $$event.preventDefault();\n    var name = $$event.currentTarget.name;\n    var value = $$event.currentTarget.value;\n    switch (name) {\n      case \"firstName\" : \n          return Curry._1(setFirstName, (function (param) {\n                        return value;\n                      }));\n      case \"lastName\" : \n          return Curry._1(setLastName, (function (param) {\n                        return value;\n                      }));\n      case \"rating\" : \n          return Curry._1(setRating, (function (param) {\n                        return Caml_format.caml_int_of_string(value);\n                      }));\n      default:\n        return /* () */0;\n    }\n  };\n  return React.createElement(\"form\", {\n              onSubmit: handleSubmit\n            }, React.createElement(\"fieldset\", undefined, React.createElement(\"legend\", undefined, \"Register a new player\"), React.createElement(\"p\", undefined, React.createElement(\"label\", {\n                          htmlFor: \"firstName\"\n                        }, \"First name\"), React.createElement(\"input\", {\n                          name: \"firstName\",\n                          required: true,\n                          type: \"text\",\n                          value: firstName,\n                          onChange: updateField\n                        })), React.createElement(\"p\", undefined, React.createElement(\"label\", {\n                          htmlFor: \"lastName\"\n                        }, \"Last name\"), React.createElement(\"input\", {\n                          name: \"lastName\",\n                          required: true,\n                          type: \"text\",\n                          value: lastName,\n                          onChange: updateField\n                        })), React.createElement(\"p\", undefined, React.createElement(\"label\", {\n                          htmlFor: \"rating\"\n                        }, \"Rating\"), React.createElement(\"input\", {\n                          name: \"rating\",\n                          required: true,\n                          type: \"number\",\n                          value: String(rating),\n                          onChange: updateField\n                        })), React.createElement(\"p\", undefined, React.createElement(\"input\", {\n                          type: \"submit\",\n                          value: \"Add\"\n                        }))));\n}\n\nvar NewPlayerForm = /* module */[/* make */PagePlayers$NewPlayerForm];\n\nfunction PagePlayers$List(Props) {\n  var sorted = Props.sorted;\n  var sortDispatch = Props.sortDispatch;\n  var players = Props.players;\n  var playersDispatch = Props.playersDispatch;\n  var optionsDispatch = Props.optionsDispatch;\n  var match = React.useState((function () {\n          return false;\n        }));\n  var setIsDialogOpen = match[1];\n  var match$1 = Window$Coronate.useWindowContext(/* () */0);\n  var windowDispatch = match$1[1];\n  React.useEffect((function () {\n          Curry._1(windowDispatch, /* SetTitle */Block.__(5, [\"Players\"]));\n          return (function (param) {\n                    return Curry._1(windowDispatch, /* SetTitle */Block.__(5, [\"\"]));\n                  });\n        }), /* array */[windowDispatch]);\n  return React.createElement(\"div\", {\n              className: \"content-area\"\n            }, React.createElement(\"div\", {\n                  className: \"toolbar toolbar__left\"\n                }, React.createElement(\"button\", {\n                      onClick: (function (param) {\n                          return Curry._1(setIsDialogOpen, (function (param) {\n                                        return true;\n                                      }));\n                        })\n                    }, React.createElement(ReactFeather.UserPlus, { }), \" Add a new player\")), React.createElement(\"table\", {\n                  className: \"players__table\"\n                }, React.createElement(\"caption\", undefined, \"Player roster\"), React.createElement(\"thead\", undefined, React.createElement(\"tr\", undefined, React.createElement(\"th\", undefined, React.createElement(Hooks$Coronate.SortButton[/* make */0], {\n                                  children: \"Name\",\n                                  sortKey: sortName,\n                                  data: sorted,\n                                  dispatch: sortDispatch\n                                })), React.createElement(\"th\", undefined, React.createElement(Hooks$Coronate.SortButton[/* make */0], {\n                                  children: \"Rating\",\n                                  sortKey: sortRating,\n                                  data: sorted,\n                                  dispatch: sortDispatch\n                                })), React.createElement(\"th\", undefined, React.createElement(Hooks$Coronate.SortButton[/* make */0], {\n                                  children: \"Matches\",\n                                  sortKey: sortMatchCount,\n                                  data: sorted,\n                                  dispatch: sortDispatch\n                                })), React.createElement(\"th\", undefined, React.createElement(VisuallyHidden.default, {\n                                  children: \"Controls\"\n                                })))), React.createElement(\"tbody\", {\n                      className: \"content\"\n                    }, sorted[/* table */2].map((function (p) {\n                            return React.createElement(\"tr\", {\n                                        key: p[/* id */1],\n                                        className: \"buttons-on-hover\"\n                                      }, React.createElement(\"td\", {\n                                            className: \"table__player\"\n                                          }, React.createElement(\"a\", {\n                                                href: \"#/players/\" + p[/* id */1]\n                                              }, /* array */[\n                                                  p[/* firstName */0],\n                                                  p[/* lastName */2]\n                                                ].join(\" \"))), React.createElement(\"td\", {\n                                            className: \"table__number\"\n                                          }, String(p[/* rating */4])), React.createElement(\"td\", {\n                                            className: \"table__number\"\n                                          }, String(p[/* matchCount */3])), React.createElement(\"td\", undefined, React.createElement(\"button\", {\n                                                className: \"danger button-ghost\",\n                                                onClick: (function ($$event) {\n                                                    var $$event$1 = $$event;\n                                                    var id = p[/* id */1];\n                                                    $$event$1.preventDefault();\n                                                    var playerOpt = Belt_MapString.get(players, id);\n                                                    if (playerOpt !== undefined) {\n                                                      var player = playerOpt;\n                                                      var message = /* array */[\n                                                          \"Are you sure you want to delete \",\n                                                          player[/* firstName */0],\n                                                          \" \",\n                                                          player[/* lastName */2],\n                                                          \"?\"\n                                                        ].join(\"\");\n                                                      if (Utils$Coronate.confirm(message)) {\n                                                        Curry._1(playersDispatch, /* DelItem */Block.__(0, [id]));\n                                                        return Curry._1(optionsDispatch, /* DelAvoidSingle */Block.__(2, [id]));\n                                                      } else {\n                                                        return 0;\n                                                      }\n                                                    } else {\n                                                      return /* () */0;\n                                                    }\n                                                  })\n                                              }, React.createElement(ReactFeather.Trash2, { }), React.createElement(VisuallyHidden.default, {\n                                                    children: /* array */[\n                                                        \"Delete\",\n                                                        p[/* firstName */0],\n                                                        p[/* lastName */2]\n                                                      ].join(\" \")\n                                                  }))));\n                          })))), React.createElement(Dialog.Dialog, {\n                  isOpen: match[0],\n                  onDismiss: (function (param) {\n                      return Curry._1(setIsDialogOpen, (function (param) {\n                                    return false;\n                                  }));\n                    }),\n                  children: null\n                }, React.createElement(\"button\", {\n                      className: \"button-micro\",\n                      onClick: (function (param) {\n                          return Curry._1(setIsDialogOpen, (function (param) {\n                                        return false;\n                                      }));\n                        })\n                    }, \"Close\"), React.createElement(PagePlayers$NewPlayerForm, {\n                      dispatch: playersDispatch\n                    })));\n}\n\nvar List = /* module */[/* make */PagePlayers$List];\n\nfunction PagePlayers$Profile(Props) {\n  var player = Props.player;\n  var players = Props.players;\n  var playersDispatch = Props.playersDispatch;\n  var options = Props.options;\n  var optionsDispatch = Props.optionsDispatch;\n  var playerId = player[/* id */1];\n  var playerName = /* array */[\n      player[/* firstName */0],\n      player[/* lastName */2]\n    ].join(\" \");\n  var match = Window$Coronate.useWindowContext(/* () */0);\n  var windowDispatch = match[1];\n  React.useEffect((function () {\n          Curry._1(windowDispatch, /* SetTitle */Block.__(5, [\"Profile for \" + playerName]));\n          return (function (param) {\n                    return Curry._1(windowDispatch, /* SetTitle */Block.__(5, [\"\"]));\n                  });\n        }), /* tuple */[\n        windowDispatch,\n        playerName\n      ]);\n  var avoidObj = options[/* avoidPairs */0].reduce(Converters$Coronate.avoidPairReducer, { });\n  var match$1 = Js_dict.get(avoidObj, playerId);\n  var singAvoidList = match$1 !== undefined ? match$1 : /* array */[];\n  var unavoided = Belt_MapString.keysToArray(players).filter((function (id) {\n          if (singAvoidList.includes(id)) {\n            return false;\n          } else {\n            return id !== playerId;\n          }\n        }));\n  var match$2 = React.useState((function () {\n          return Caml_array.caml_array_get(unavoided, 0);\n        }));\n  var setSelectedAvoider = match$2[1];\n  var selectedAvoider = match$2[0];\n  var avoidAdd = function ($$event) {\n    $$event.preventDefault();\n    Curry._1(optionsDispatch, /* AddAvoidPair */Block.__(0, [/* tuple */[\n              playerId,\n              selectedAvoider\n            ]]));\n    var match = Caml_array.caml_array_get(unavoided, 0) !== selectedAvoider;\n    var newSelected = match ? Caml_array.caml_array_get(unavoided, 0) : Caml_array.caml_array_get(unavoided, 1);\n    return Curry._1(setSelectedAvoider, (function (param) {\n                  return newSelected;\n                }));\n  };\n  var handleChange = function ($$event) {\n    $$event.preventDefault();\n    var target = $$event.currentTarget;\n    var firstName = target.firstName.value;\n    var lastName = target.lastName.value;\n    var matchCount = Caml_format.caml_int_of_string(target.matchCount.value);\n    var rating = Caml_format.caml_int_of_string(target.rating.value);\n    return Curry._1(playersDispatch, /* SetItem */Block.__(1, [\n                  playerId,\n                  /* record */[\n                    /* firstName */firstName,\n                    /* id */playerId,\n                    /* lastName */lastName,\n                    /* matchCount */matchCount,\n                    /* rating */rating,\n                    /* type_ */player[/* type_ */5]\n                  ]\n                ]));\n  };\n  var handleAvoidChange = function ($$event) {\n    var id = $$event.currentTarget.value;\n    return Curry._1(setSelectedAvoider, (function (param) {\n                  return id;\n                }));\n  };\n  var handleAvoidBlur = function ($$event) {\n    var id = $$event.currentTarget.value;\n    return Curry._1(setSelectedAvoider, (function (param) {\n                  return id;\n                }));\n  };\n  var match$3 = singAvoidList.length === 0;\n  return React.createElement(\"div\", {\n              className: \"players__playerInfo content-area\"\n            }, React.createElement(\"a\", {\n                  href: \"#/players\"\n                }, React.createElement(ReactFeather.ChevronLeft, { }), \" Back\"), React.createElement(\"h2\", undefined, \"Profile for \" + playerName), React.createElement(\"form\", {\n                  onChange: handleChange,\n                  onSubmit: handleChange\n                }, React.createElement(\"p\", undefined, React.createElement(\"label\", {\n                          htmlFor: \"firstName\"\n                        }, \"First name\"), React.createElement(\"input\", {\n                          defaultValue: player[/* firstName */0],\n                          name: \"firstName\",\n                          type: \"text\"\n                        })), React.createElement(\"p\", undefined, React.createElement(\"label\", {\n                          htmlFor: \"lastName\"\n                        }, \"Last name\"), React.createElement(\"input\", {\n                          defaultValue: player[/* lastName */2],\n                          name: \"lastName\",\n                          type: \"text\"\n                        })), React.createElement(\"p\", undefined, React.createElement(\"label\", {\n                          htmlFor: \"matchCount\"\n                        }, \"Matches played\"), React.createElement(\"input\", {\n                          defaultValue: String(player[/* matchCount */3]),\n                          name: \"matchCount\",\n                          type: \"number\"\n                        })), React.createElement(\"p\", undefined, React.createElement(\"label\", {\n                          htmlFor: \"rating\"\n                        }, \"Rating\"), React.createElement(\"input\", {\n                          defaultValue: String(player[/* rating */4]),\n                          name: \"rating\",\n                          type: \"number\"\n                        })), React.createElement(\"p\", undefined, React.createElement(\"label\", {\n                          htmlFor: \"Kfactor\"\n                        }, \"K factor\"), React.createElement(\"input\", {\n                          disabled: true,\n                          name: \"kfactor\",\n                          readOnly: true,\n                          type: \"number\",\n                          value: String(Scoring$Coronate.getKFactor(player[/* matchCount */3]))\n                        }))), React.createElement(\"h3\", undefined, \"Players to avoid\"), React.createElement(\"ul\", undefined, singAvoidList.map((function (pId) {\n                        return React.createElement(\"li\", {\n                                    key: pId\n                                  }, Data$Coronate.Player[/* getPlayerMaybeMap */6](players, pId)[/* firstName */0], \" \", Data$Coronate.Player[/* getPlayerMaybeMap */6](players, pId)[/* lastName */2], React.createElement(\"button\", {\n                                        \"aria-label\": /* array */[\n                                            \"Remove\",\n                                            Data$Coronate.Player[/* getPlayerMaybeMap */6](players, pId)[/* firstName */0],\n                                            Data$Coronate.Player[/* getPlayerMaybeMap */6](players, pId)[/* lastName */2],\n                                            \"from avoid list.\"\n                                          ].join(\" \"),\n                                        className: \"danger button-ghost\",\n                                        title: /* array */[\n                                            \"Remove\",\n                                            Data$Coronate.Player[/* getPlayerMaybeMap */6](players, pId)[/* firstName */0],\n                                            Data$Coronate.Player[/* getPlayerMaybeMap */6](players, pId)[/* lastName */2],\n                                            \"from avoid list.\"\n                                          ].join(\" \"),\n                                        onClick: (function (param) {\n                                            return Curry._1(optionsDispatch, /* DelAvoidPair */Block.__(1, [/* tuple */[\n                                                            playerId,\n                                                            pId\n                                                          ]]));\n                                          })\n                                      }, React.createElement(ReactFeather.Trash2, { })));\n                      })), match$3 ? React.createElement(\"li\", undefined, \"None\") : null), React.createElement(\"form\", {\n                  onSubmit: avoidAdd\n                }, React.createElement(\"label\", {\n                      htmlFor: \"avoid-select\"\n                    }, \"Select a new player to avoid.\"), React.createElement(\"select\", {\n                      id: \"avoid-select\",\n                      value: selectedAvoider,\n                      onBlur: handleAvoidBlur,\n                      onChange: handleAvoidChange\n                    }, unavoided.map((function (pId) {\n                            return React.createElement(\"option\", {\n                                        key: pId,\n                                        value: pId\n                                      }, Data$Coronate.Player[/* getPlayerMaybeMap */6](players, pId)[/* firstName */0], \" \", Data$Coronate.Player[/* getPlayerMaybeMap */6](players, pId)[/* lastName */2]);\n                          }))), \" \", React.createElement(\"input\", {\n                      className: \"button-micro\",\n                      type: \"submit\",\n                      value: \"Add\"\n                    })));\n}\n\nvar Profile = /* module */[/* make */PagePlayers$Profile];\n\nfunction PagePlayers(Props) {\n  var id = Props.id;\n  var match = Hooks$Coronate.Db[/* useAllPlayers */12](/* () */0);\n  var playersDispatch = match[1];\n  var players = match[0];\n  var match$1 = Hooks$Coronate.useSortedTable(Belt_MapString.valuesToArray(players), sortName, false);\n  var sortDispatch = match$1[1];\n  React.useEffect((function () {\n          Curry._1(sortDispatch, /* SetTable */Block.__(2, [Belt_MapString.valuesToArray(players)]));\n          return undefined;\n        }), /* tuple */[\n        players,\n        sortDispatch\n      ]);\n  var match$2 = Hooks$Coronate.Db[/* useOptions */15](/* () */0);\n  var optionsDispatch = match$2[1];\n  var tmp;\n  if (id !== undefined) {\n    var match$3 = id;\n    if (match$3) {\n      if (match$3[1]) {\n        tmp = React.createElement(Pages$Coronate.NotFound[/* make */0], { });\n      } else {\n        var match$4 = Belt_MapString.get(players, match$3[0]);\n        tmp = match$4 !== undefined ? React.createElement(PagePlayers$Profile, {\n                player: match$4,\n                players: players,\n                playersDispatch: playersDispatch,\n                options: match$2[0],\n                optionsDispatch: optionsDispatch\n              }) : React.createElement(\"div\", undefined, \"Loading...\");\n      }\n    } else {\n      tmp = React.createElement(Pages$Coronate.NotFound[/* make */0], { });\n    }\n  } else {\n    tmp = React.createElement(PagePlayers$List, {\n          sorted: match$1[0],\n          sortDispatch: sortDispatch,\n          players: players,\n          playersDispatch: playersDispatch,\n          optionsDispatch: optionsDispatch\n        });\n  }\n  return React.createElement(Window$Coronate.WindowBody[/* make */0], {\n              children: tmp\n            });\n}\n\nvar make = PagePlayers;\n\nexport {\n  s ,\n  sortName ,\n  sortRating ,\n  sortMatchCount ,\n  defaultFirstName ,\n  defaultLastName ,\n  defaultRating ,\n  NewPlayerForm ,\n  List ,\n  Profile ,\n  make ,\n  \n}\n/* react Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 6.0.3, PLEASE EDIT WITH CARE\n\nimport * as Js_dict from \"bs-platform/lib/es6/js_dict.js\";\nimport * as Caml_array from \"bs-platform/lib/es6/caml_array.js\";\nimport * as Pervasives from \"bs-platform/lib/es6/pervasives.js\";\nimport * as Belt_SortArray from \"bs-platform/lib/es6/belt_SortArray.js\";\nimport * as Utils$Coronate from \"./Utils.bs.js\";\nimport * as EdmondsBlossom from \"edmonds-blossom\";\n\nfunction priority(value, condition) {\n  if (condition) {\n    return value;\n  } else {\n    return 0.0;\n  }\n}\n\nfunction divisiblePriority(dividend, divisor) {\n  return dividend / divisor;\n}\n\nfunction avoidMeetingTwice(param) {\n  if (param) {\n    return 32.0;\n  } else {\n    return 0.0;\n  }\n}\n\nfunction sameScores(param) {\n  return 16.0 / param;\n}\n\nfunction halfPosition(param) {\n  return 8.0 / param;\n}\n\nfunction sameHalfPriority(param) {\n  return 0.0;\n}\n\nfunction differentHalf(isDiffHalf) {\n  if (isDiffHalf) {\n    return halfPosition;\n  } else {\n    return sameHalfPriority;\n  }\n}\n\nfunction differentDueColor(param) {\n  if (param) {\n    return 4.0;\n  } else {\n    return 0.0;\n  }\n}\n\nvar maxPriority = Utils$Coronate.arraySumFloat(/* array */[\n      halfPosition(1.0),\n      4.0,\n      16.0 / 1.0,\n      32.0\n    ]);\n\nfunction calcPairIdeal(player1, player2) {\n  var match = player1[/* id */0] === player2[/* id */0];\n  if (match) {\n    return 0.0;\n  } else {\n    var metBefore = player1[/* opponents */6].includes(player2[/* id */0]);\n    var mustAvoid = player1[/* avoidIds */1].includes(player2[/* id */0]);\n    var match$1 = player1[/* colors */3].length;\n    var isDiffDueColor;\n    if (match$1 !== 0) {\n      var match$2 = player2[/* colors */3].length;\n      isDiffDueColor = match$2 !== 0 ? Utils$Coronate.last(player1[/* colors */3]) !== Utils$Coronate.last(player2[/* colors */3]) : true;\n    } else {\n      isDiffDueColor = true;\n    }\n    var scoreDiff = Utils$Coronate.absf(player1[/* score */8] - player2[/* score */8]) + 1.0;\n    var halfDiff = Pervasives.abs(player1[/* halfPos */4] - player2[/* halfPos */4] | 0) + 1 | 0;\n    var isDiffHalf = player1[/* isUpperHalf */5] !== player2[/* isUpperHalf */5] && player1[/* score */8] === player2[/* score */8];\n    return Utils$Coronate.arraySumFloat(/* array */[\n                isDiffDueColor ? 4.0 : 0.0,\n                16.0 / scoreDiff,\n                (\n                    isDiffHalf ? halfPosition : sameHalfPriority\n                  )(halfDiff),\n                !metBefore && !mustAvoid ? 32.0 : 0.0\n              ]);\n  }\n}\n\nfunction descendingScore(param, param$1) {\n  return Utils$Coronate.descend((function (x) {\n                return x[/* score */8];\n              }), param, param$1);\n}\n\nfunction descendingRating(param, param$1) {\n  return Utils$Coronate.descend((function (x) {\n                return x[/* rating */7];\n              }), param, param$1);\n}\n\nfunction setUpperHalves(data) {\n  var nextData = { };\n  var dataList = Js_dict.values(data);\n  dataList.forEach((function (playerData) {\n          var match = Utils$Coronate.splitInHalf(Belt_SortArray.stableSortBy(dataList.filter((function (p2) {\n                            return p2[/* score */8] === playerData[/* score */8];\n                          })), descendingRating).map((function (p) {\n                      return p[/* id */0];\n                    })));\n          var upperHalfIds = match[0];\n          var isUpperHalf = upperHalfIds.includes(playerData[/* id */0]);\n          var halfPos = isUpperHalf ? upperHalfIds.indexOf(playerData[/* id */0]) : match[1].indexOf(playerData[/* id */0]);\n          var newPlayerData_000 = /* id */playerData[/* id */0];\n          var newPlayerData_001 = /* avoidIds */playerData[/* avoidIds */1];\n          var newPlayerData_002 = /* colorScores */playerData[/* colorScores */2];\n          var newPlayerData_003 = /* colors */playerData[/* colors */3];\n          var newPlayerData_006 = /* opponents */playerData[/* opponents */6];\n          var newPlayerData_007 = /* rating */playerData[/* rating */7];\n          var newPlayerData_008 = /* score */playerData[/* score */8];\n          var newPlayerData = /* record */[\n            newPlayerData_000,\n            newPlayerData_001,\n            newPlayerData_002,\n            newPlayerData_003,\n            /* halfPos */halfPos,\n            /* isUpperHalf */isUpperHalf,\n            newPlayerData_006,\n            newPlayerData_007,\n            newPlayerData_008\n          ];\n          nextData[playerData[/* id */0]] = newPlayerData;\n          return /* () */0;\n        }));\n  return nextData;\n}\n\nvar partial_arg = /* array */[\n  descendingScore,\n  descendingRating\n];\n\nfunction sortByScoreThenRating(param) {\n  return Utils$Coronate.sortWith(partial_arg, param);\n}\n\nfunction setByePlayer(byeQueue, dummyId, data) {\n  var hasNotHadBye = function (p) {\n    return !p[/* opponents */6].includes(dummyId);\n  };\n  var match = Object.keys(data).length % 2 === 0;\n  if (match) {\n    return /* tuple */[\n            data,\n            undefined\n          ];\n  } else {\n    var dataList = sortByScoreThenRating(Js_dict.values(data).filter(hasNotHadBye));\n    var playersWithoutByes = dataList.map((function (p) {\n            return p[/* id */0];\n          }));\n    var hasntHadBye = function (id) {\n      return playersWithoutByes.includes(id);\n    };\n    var nextByeSignups = byeQueue.filter(hasntHadBye);\n    var match$1 = nextByeSignups.length > 0;\n    var dataForNextBye;\n    if (match$1) {\n      var match$2 = Js_dict.get(data, Caml_array.caml_array_get(nextByeSignups, 0));\n      dataForNextBye = match$2 !== undefined ? match$2 : Utils$Coronate.last(dataList);\n    } else {\n      var match$3 = dataList.length > 0;\n      dataForNextBye = match$3 ? Utils$Coronate.last(dataList) : Utils$Coronate.last(sortByScoreThenRating(Js_dict.values(data)));\n    }\n    var dataWithoutBye = Js_dict.fromArray(Js_dict.entries(data).filter((function (param) {\n                return param[0] !== dataForNextBye[/* id */0];\n              })));\n    return /* tuple */[\n            dataWithoutBye,\n            dataForNextBye\n          ];\n  }\n}\n\nfunction assignColorsForPair(pair) {\n  var player2 = pair[1];\n  var player1 = pair[0];\n  var match = Utils$Coronate.arraySumFloat(player1[/* colorScores */2]) < Utils$Coronate.arraySumFloat(player2[/* colorScores */2]);\n  if (match) {\n    return /* tuple */[\n            player2[/* id */0],\n            player1[/* id */0]\n          ];\n  } else {\n    return /* tuple */[\n            player1[/* id */0],\n            player2[/* id */0]\n          ];\n  }\n}\n\nfunction netScore(param) {\n  return param[0][/* score */8] + param[1][/* score */8];\n}\n\nfunction netRating(param) {\n  return param[0][/* rating */7] + param[1][/* rating */7];\n}\n\nfunction netScoreDescend(pair1, pair2) {\n  return netScore(pair2) - netScore(pair1);\n}\n\nfunction netRatingDescend(pair1, pair2) {\n  return netRating(pair2) - netRating(pair1);\n}\n\nvar partial_arg$1 = /* array */[\n  netScoreDescend,\n  netRatingDescend\n];\n\nfunction sortByNetScoreThenRating(param) {\n  return Utils$Coronate.sortWithF(partial_arg$1, param);\n}\n\nfunction pairPlayers(pairData) {\n  var playerIdArray = Object.keys(pairData);\n  var playerArray = Js_dict.values(pairData);\n  var pairIdealReducer = function (accArr, player1, index) {\n    var playerMatches = playerArray.slice(index + 1 | 0, Infinity).map((function (player2) {\n            return /* tuple */[\n                    playerIdArray.indexOf(player1[/* id */0]),\n                    playerIdArray.indexOf(player2[/* id */0]),\n                    calcPairIdeal(player1, player2)\n                  ];\n          }));\n    return accArr.concat(playerMatches);\n  };\n  var blossom2Pairs = function (acc, p1Index, p2Index) {\n    var match = p1Index === -1;\n    if (match) {\n      return acc;\n    } else {\n      var p1 = pairData[Caml_array.caml_array_get(playerIdArray, p1Index)];\n      var p2 = pairData[Caml_array.caml_array_get(playerIdArray, p2Index)];\n      var matched = acc.map((function (param) {\n              return param[0];\n            }));\n      var match$1 = !matched.includes(p1) && !matched.includes(p2);\n      if (match$1) {\n        return acc.concat(/* array */[/* tuple */[\n                      p1,\n                      p2\n                    ]]);\n      } else {\n        return acc;\n      }\n    }\n  };\n  return sortByNetScoreThenRating(EdmondsBlossom(playerArray.reduce(pairIdealReducer, /* array */[])).reduce(blossom2Pairs, /* array */[])).map(assignColorsForPair);\n}\n\nexport {\n  priority ,\n  divisiblePriority ,\n  avoidMeetingTwice ,\n  sameScores ,\n  halfPosition ,\n  sameHalfPriority ,\n  differentHalf ,\n  differentDueColor ,\n  maxPriority ,\n  calcPairIdeal ,\n  descendingScore ,\n  descendingRating ,\n  setUpperHalves ,\n  sortByScoreThenRating ,\n  setByePlayer ,\n  assignColorsForPair ,\n  netScore ,\n  netRating ,\n  netScoreDescend ,\n  netRatingDescend ,\n  sortByNetScoreThenRating ,\n  pairPlayers ,\n  \n}\n/* maxPriority Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 6.0.3, PLEASE EDIT WITH CARE\n\nimport * as Cn from \"re-classnames/src/Cn.bs.js\";\nimport * as Block from \"bs-platform/lib/es6/block.js\";\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as React from \"react\";\nimport * as Dialog from \"@reach/dialog\";\nimport * as Data$Coronate from \"../Data.bs.js\";\nimport * as ReactFeather from \"react-feather\";\nimport * as Belt_MapString from \"bs-platform/lib/es6/belt_MapString.js\";\nimport * as Hooks$Coronate from \"../Hooks.bs.js\";\nimport * as Utils$Coronate from \"../Utils.bs.js\";\nimport * as PagePlayers$Coronate from \"../PagePlayers.bs.js\";\nimport * as VisuallyHidden from \"@reach/visually-hidden\";\n\nfunction PageTourneyPlayers$Selecting(Props) {\n  var tourney = Props.tourney;\n  var tourneyDispatch = Props.tourneyDispatch;\n  var match = Hooks$Coronate.Db[/* useAllPlayers */12](/* () */0);\n  var players = match[0];\n  var togglePlayer = function ($$event) {\n    var id = $$event.target.value;\n    if ($$event.target.checked) {\n      return Curry._1(tourneyDispatch, /* SetTourneyPlayers */Block.__(3, [tourney[/* playerIds */4].concat(/* array */[id])]));\n    } else {\n      return Curry._1(tourneyDispatch, /* SetTourneyPlayers */Block.__(3, [tourney[/* playerIds */4].filter((function (pId) {\n                            return pId !== id;\n                          }))]));\n    }\n  };\n  return React.createElement(\"div\", undefined, React.createElement(\"div\", {\n                  className: \"toolbar\"\n                }, React.createElement(\"button\", {\n                      className: \"button-micro\",\n                      onClick: (function (param) {\n                          return Curry._1(tourneyDispatch, /* SetTourneyPlayers */Block.__(3, [Belt_MapString.keysToArray(players)]));\n                        })\n                    }, \"Select all\"), React.createElement(\"button\", {\n                      className: \"button-micro\",\n                      onClick: (function (param) {\n                          return Curry._1(tourneyDispatch, /* SetTourneyPlayers */Block.__(3, [/* array */[]]));\n                        })\n                    }, \"Select none\")), React.createElement(\"table\", undefined, React.createElement(\"caption\", undefined, \"Select players\"), React.createElement(\"thead\", undefined, React.createElement(\"tr\", undefined, React.createElement(\"th\", undefined, \"First name\"), React.createElement(\"th\", undefined, \"Last name\"), React.createElement(\"th\", undefined, \"Select\"))), React.createElement(\"tbody\", undefined, Belt_MapString.valuesToArray(players).map((function (p) {\n                            return React.createElement(\"tr\", {\n                                        key: p[/* id */1]\n                                      }, React.createElement(\"td\", undefined, p[/* firstName */0]), React.createElement(\"td\", undefined, p[/* lastName */2]), React.createElement(\"td\", undefined, React.createElement(VisuallyHidden.default, {\n                                                children: React.createElement(\"label\", {\n                                                      htmlFor: \"select-\" + p[/* id */1]\n                                                    }, /* array */[\n                                                        \"Select\",\n                                                        p[/* firstName */0],\n                                                        p[/* lastName */2]\n                                                      ].join(\" \"))\n                                              }), React.createElement(\"input\", {\n                                                id: \"select-\" + p[/* id */1],\n                                                checked: tourney[/* playerIds */4].includes(p[/* id */1]),\n                                                type: \"checkbox\",\n                                                value: p[/* id */1],\n                                                onChange: togglePlayer\n                                              })));\n                          })))), React.createElement(PagePlayers$Coronate.NewPlayerForm[/* make */0], {\n                  dispatch: match[1]\n                }));\n}\n\nvar Selecting = /* module */[/* make */PageTourneyPlayers$Selecting];\n\nfunction hasHadBye(matchList, playerId) {\n  return matchList.filter((function (match_) {\n                    return /* array */[\n                              match_[/* whiteId */1],\n                              match_[/* blackId */2]\n                            ].includes(playerId);\n                  })).reduce((function (acc, match_) {\n                  return acc.concat(/* array */[\n                              match_[/* whiteId */1],\n                              match_[/* blackId */2]\n                            ]);\n                }), /* array */[]).includes(Data$Coronate.dummy_id);\n}\n\nfunction PageTourneyPlayers$PlayerList(Props) {\n  var players = Props.players;\n  var tourneyDispatch = Props.tourneyDispatch;\n  var byeQueue = Props.byeQueue;\n  return React.createElement(React.Fragment, undefined, Belt_MapString.valuesToArray(players).map((function (p) {\n                    return React.createElement(\"tr\", {\n                                key: p[/* id */1],\n                                className: Cn.make(/* :: */[\n                                      p[/* type_ */5],\n                                      /* :: */[\n                                        \"player\",\n                                        /* [] */0\n                                      ]\n                                    ])\n                              }, React.createElement(\"td\", undefined, p[/* firstName */0]), React.createElement(\"td\", undefined, p[/* lastName */2]), React.createElement(\"td\", undefined, React.createElement(\"button\", {\n                                        className: \"button-micro\",\n                                        disabled: byeQueue.includes(p[/* id */1]),\n                                        onClick: (function (param) {\n                                            return Curry._1(tourneyDispatch, /* SetByeQueue */Block.__(4, [byeQueue.concat(/* array */[p[/* id */1]])]));\n                                          })\n                                      }, \"Bye signup\")));\n                  })));\n}\n\nvar PlayerList = /* module */[/* make */PageTourneyPlayers$PlayerList];\n\nfunction PageTourneyPlayers(Props) {\n  var tournament = Props.tournament;\n  var tourney = tournament[/* tourney */7];\n  var tourneyDispatch = tournament[/* tourneyDispatch */8];\n  var activePlayers = tournament[/* activePlayers */0];\n  var playerIds = tourney[/* playerIds */4];\n  var roundList = tourney[/* roundList */5];\n  var byeQueue = tourney[/* byeQueue */0];\n  var match = React.useState((function () {\n          return playerIds.length === 0;\n        }));\n  var setIsSelecting = match[1];\n  var matches = Data$Coronate.rounds2Matches(roundList, undefined, /* () */0);\n  var match$1 = byeQueue.length;\n  return React.createElement(\"div\", {\n              className: \"content-area\"\n            }, React.createElement(\"div\", {\n                  className: \"toolbar\"\n                }, React.createElement(\"button\", {\n                      onClick: (function (param) {\n                          return Curry._1(setIsSelecting, (function (param) {\n                                        return true;\n                                      }));\n                        })\n                    }, React.createElement(ReactFeather.Edit, { }), \" Edit player roster\")), React.createElement(Utils$Coronate.PanelContainer[/* make */0], {\n                  children: null\n                }, React.createElement(Utils$Coronate.Panel[/* make */0], {\n                      children: React.createElement(\"table\", undefined, React.createElement(\"caption\", undefined, \"Current roster\"), React.createElement(\"thead\", undefined, React.createElement(\"tr\", undefined, React.createElement(\"th\", {\n                                        colSpan: 2\n                                      }, \"Name\"), React.createElement(\"th\", undefined, \"Options\"))), React.createElement(\"tbody\", {\n                                className: \"content\"\n                              }, React.createElement(PageTourneyPlayers$PlayerList, {\n                                    players: activePlayers,\n                                    tourneyDispatch: tourneyDispatch,\n                                    byeQueue: byeQueue\n                                  }))),\n                      style: {\n                        flexShrink: \"0\"\n                      }\n                    }), React.createElement(Utils$Coronate.Panel[/* make */0], {\n                      children: null\n                    }, React.createElement(\"h3\", undefined, \"Bye queue\"), match$1 !== 0 ? null : React.createElement(\"p\", undefined, \"No players have signed up for a bye round.\"), React.createElement(\"ol\", undefined, byeQueue.map((function (pId) {\n                                return React.createElement(\"li\", {\n                                            key: pId,\n                                            className: Cn.make(/* :: */[\n                                                  \"buttons-on-hover\",\n                                                  /* :: */[\n                                                    Cn.ifTrue(\"disabled\", hasHadBye(matches, pId)),\n                                                    /* [] */0\n                                                  ]\n                                                ])\n                                          }, Belt_MapString.getExn(activePlayers, pId)[/* firstName */0] + (\" \" + (Belt_MapString.getExn(activePlayers, pId)[/* lastName */2] + \" \")), React.createElement(\"button\", {\n                                                className: \"button-micro\",\n                                                onClick: (function (param) {\n                                                    return Curry._1(tourneyDispatch, /* SetByeQueue */Block.__(4, [byeQueue.filter((function (id) {\n                                                                          return pId !== id;\n                                                                        }))]));\n                                                  })\n                                              }, \"Remove\"));\n                              })))), React.createElement(Dialog.Dialog, {\n                      isOpen: match[0],\n                      onDismiss: (function (param) {\n                          return Curry._1(setIsSelecting, (function (param) {\n                                        return false;\n                                      }));\n                        }),\n                      children: null\n                    }, React.createElement(\"button\", {\n                          className: \"button-micro button-primary\",\n                          onClick: (function (param) {\n                              return Curry._1(setIsSelecting, (function (param) {\n                                            return false;\n                                          }));\n                            })\n                        }, \"Done\"), React.createElement(PageTourneyPlayers$Selecting, {\n                          tourney: tourney,\n                          tourneyDispatch: tourneyDispatch\n                        }))));\n}\n\nvar make = PageTourneyPlayers;\n\nexport {\n  Selecting ,\n  hasHadBye ,\n  PlayerList ,\n  make ,\n  \n}\n/* react Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 6.0.3, PLEASE EDIT WITH CARE\n\nimport * as Block from \"bs-platform/lib/es6/block.js\";\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as React from \"react\";\nimport * as Js_dict from \"bs-platform/lib/es6/js_dict.js\";\nimport * as Numeral from \"numeral\";\nimport * as Caml_option from \"bs-platform/lib/es6/caml_option.js\";\nimport * as Dialog from \"@reach/dialog\";\nimport * as Data$Coronate from \"../Data.bs.js\";\nimport * as ReactFeather from \"react-feather\";\nimport * as Belt_MapString from \"bs-platform/lib/es6/belt_MapString.js\";\nimport * as Hooks$Coronate from \"../Hooks.bs.js\";\nimport * as Utils$Coronate from \"../Utils.bs.js\";\nimport * as Pairing$Coronate from \"../Pairing.bs.js\";\nimport * as Scoring$Coronate from \"../Scoring.bs.js\";\nimport * as Converters$Coronate from \"../Converters.bs.js\";\nimport * as VisuallyHidden from \"@reach/visually-hidden\";\nimport * as PageTourneyPlayers$Coronate from \"./PageTourneyPlayers.bs.js\";\n\nvar sortByName = /* KeyString */Block.__(0, [(function (x) {\n        return x[/* player */0][/* firstName */0];\n      })]);\n\nvar sortByIdeal = /* KeyFloat */Block.__(2, [(function (x) {\n        return x[/* ideal */1];\n      })]);\n\nfunction PairPicker$SelectList(Props) {\n  var pairData = Props.pairData;\n  var stagedPlayers = Props.stagedPlayers;\n  var setStagedPlayers = Props.setStagedPlayers;\n  var unmatched = Props.unmatched;\n  var p2 = stagedPlayers[1];\n  var p1 = stagedPlayers[0];\n  var stagePlayersOption_000 = (p1 == null) ? undefined : Caml_option.some(p1);\n  var stagePlayersOption_001 = (p2 == null) ? undefined : Caml_option.some(p2);\n  var stagePlayersOption = /* tuple */[\n    stagePlayersOption_000,\n    stagePlayersOption_001\n  ];\n  var initialTable = Js_dict.values(unmatched).map((function (player) {\n          return /* record */[\n                  /* player */player,\n                  /* ideal */0.0\n                ];\n        }));\n  var match = Hooks$Coronate.useSortedTable(initialTable, sortByName, true);\n  var sortedDispatch = match[1];\n  var sorted = match[0];\n  var isNullSelected = /* array */[\n      p1,\n      p2\n    ].includes(null);\n  var isOnePlayerSelected = p1 !== p2 && isNullSelected;\n  var isPlayerSelectable = function (id) {\n    var match = stagePlayersOption_000;\n    if (match !== undefined) {\n      if (stagePlayersOption_001 !== undefined) {\n        return false;\n      } else {\n        return match !== id;\n      }\n    } else {\n      var match$1 = stagePlayersOption_001;\n      if (match$1 !== undefined) {\n        return match$1 !== id;\n      } else {\n        return true;\n      }\n    }\n  };\n  React.useEffect((function (param) {\n          var calcIdealOrNot = function (player) {\n            var match = stagePlayersOption_000;\n            var selectedId;\n            if (match !== undefined) {\n              selectedId = stagePlayersOption_001 !== undefined ? undefined : match;\n            } else {\n              var match$1 = stagePlayersOption_001;\n              selectedId = match$1 !== undefined ? match$1 : undefined;\n            }\n            if (selectedId !== undefined) {\n              var match$2 = Js_dict.get(pairData, selectedId);\n              if (match$2 !== undefined) {\n                if (player !== undefined) {\n                  return Pairing$Coronate.calcPairIdeal(match$2, player) / Pairing$Coronate.maxPriority;\n                } else {\n                  return 0.0;\n                }\n              } else {\n                return 0.0;\n              }\n            } else {\n              return 0.0;\n            }\n          };\n          var table = Js_dict.values(unmatched).map((function (player) {\n                  return /* record */[\n                          /* player */player,\n                          /* ideal */calcIdealOrNot(Js_dict.get(pairData, player[/* id */1]))\n                        ];\n                }));\n          Curry._1(sortedDispatch, /* SetTable */Block.__(2, [table]));\n          return undefined;\n        }), /* tuple */[\n        unmatched,\n        pairData,\n        sortedDispatch,\n        stagePlayersOption\n      ]);\n  var match$1 = Object.keys(unmatched).length === 0;\n  if (match$1) {\n    return null;\n  } else {\n    return React.createElement(\"table\", {\n                className: \"content\"\n              }, React.createElement(\"thead\", undefined, React.createElement(\"tr\", undefined, React.createElement(\"th\", undefined, React.createElement(VisuallyHidden.default, {\n                                children: \"Controls\"\n                              })), React.createElement(\"th\", undefined, React.createElement(Hooks$Coronate.SortButton[/* make */0], {\n                                children: \"Name\",\n                                sortKey: sortByName,\n                                data: sorted,\n                                dispatch: sortedDispatch\n                              })), React.createElement(\"th\", undefined, React.createElement(Hooks$Coronate.SortButton[/* make */0], {\n                                children: \"Ideal\",\n                                sortKey: sortByIdeal,\n                                data: sorted,\n                                dispatch: sortedDispatch\n                              })))), React.createElement(\"tbody\", undefined, sorted[/* table */2].map((function (param) {\n                          var player = param[/* player */0];\n                          return React.createElement(\"tr\", {\n                                      key: player[/* id */1]\n                                    }, React.createElement(\"td\", undefined, React.createElement(\"button\", {\n                                              className: \"button-ghost\",\n                                              disabled: !isPlayerSelectable(player[/* id */1]),\n                                              onClick: (function (param) {\n                                                  var id = player[/* id */1];\n                                                  var match = stagePlayersOption_000;\n                                                  if (match !== undefined) {\n                                                    if (stagePlayersOption_001 !== undefined) {\n                                                      return /* () */0;\n                                                    } else {\n                                                      var p1 = match;\n                                                      return Curry._1(setStagedPlayers, (function (param) {\n                                                                    return /* tuple */[\n                                                                            p1,\n                                                                            id\n                                                                          ];\n                                                                  }));\n                                                    }\n                                                  } else {\n                                                    var match$1 = stagePlayersOption_001;\n                                                    if (match$1 !== undefined) {\n                                                      var p2 = match$1;\n                                                      return Curry._1(setStagedPlayers, (function (param) {\n                                                                    return /* tuple */[\n                                                                            id,\n                                                                            p2\n                                                                          ];\n                                                                  }));\n                                                    } else {\n                                                      return Curry._1(setStagedPlayers, (function (param) {\n                                                                    return /* tuple */[\n                                                                            id,\n                                                                            null\n                                                                          ];\n                                                                  }));\n                                                    }\n                                                  }\n                                                })\n                                            }, React.createElement(ReactFeather.UserPlus, { }), React.createElement(VisuallyHidden.default, {\n                                                  children: /* array */[\n                                                      \"Add\",\n                                                      player[/* firstName */0],\n                                                      player[/* lastName */2]\n                                                    ].join(\" \")\n                                                }))), React.createElement(\"td\", undefined, player[/* firstName */0] + (\" \" + player[/* lastName */2])), React.createElement(\"td\", undefined, isOnePlayerSelected ? Numeral.default(param[/* ideal */1]).format(\"%\") : \"-\"));\n                        }))));\n  }\n}\n\nvar SelectList = /* module */[/* make */PairPicker$SelectList];\n\nfunction PairPicker$Stage(Props) {\n  var getPlayer = Props.getPlayer;\n  var pairData = Props.pairData;\n  var roundId = Props.roundId;\n  var stagedPlayers = Props.stagedPlayers;\n  var setStagedPlayers = Props.setStagedPlayers;\n  var tourneyDispatch = Props.tourneyDispatch;\n  var match = Hooks$Coronate.Db[/* useOptions */15](/* () */0);\n  var options = match[0];\n  var stagedPlayersOption_000 = Caml_option.nullable_to_opt(stagedPlayers[0]);\n  var stagedPlayersOption_001 = Caml_option.nullable_to_opt(stagedPlayers[1]);\n  var blackOpt = stagedPlayersOption_001;\n  var whiteOpt = stagedPlayersOption_000;\n  var noneAreSelected = stagedPlayersOption_000 !== undefined ? false : stagedPlayersOption_001 === undefined;\n  var twoAreSelected = stagedPlayersOption_000 !== undefined ? stagedPlayersOption_001 !== undefined : false;\n  var whiteName;\n  if (whiteOpt !== undefined) {\n    var player = whiteOpt;\n    whiteName = Curry._1(getPlayer, player)[/* firstName */0] + (\" \" + Curry._1(getPlayer, player)[/* lastName */2]);\n  } else {\n    whiteName = \"\";\n  }\n  var blackName;\n  if (blackOpt !== undefined) {\n    var player$1 = blackOpt;\n    blackName = Curry._1(getPlayer, player$1)[/* firstName */0] + (\" \" + Curry._1(getPlayer, player$1)[/* lastName */2]);\n  } else {\n    blackName = \"\";\n  }\n  var unstage = function (color) {\n    if (color) {\n      return Curry._1(setStagedPlayers, (function (param) {\n                    return /* tuple */[\n                            param[0],\n                            null\n                          ];\n                  }));\n    } else {\n      return Curry._1(setStagedPlayers, (function (param) {\n                    return /* tuple */[\n                            null,\n                            param[1]\n                          ];\n                  }));\n    }\n  };\n  var match_ = function (param) {\n    var match = stagedPlayersOption_000;\n    if (match !== undefined) {\n      var match$1 = stagedPlayersOption_001;\n      if (match$1 !== undefined) {\n        Curry._1(tourneyDispatch, /* ManualPair */Block.__(7, [\n                options[/* byeValue */1],\n                /* tuple */[\n                  Curry._1(getPlayer, match),\n                  Curry._1(getPlayer, match$1)\n                ],\n                roundId\n              ]));\n        return Curry._1(setStagedPlayers, (function (param) {\n                      return /* tuple */[\n                              null,\n                              null\n                            ];\n                    }));\n      } else {\n        return /* () */0;\n      }\n    } else {\n      return /* () */0;\n    }\n  };\n  var match$1 = stagedPlayersOption_000;\n  var matchIdeal;\n  if (match$1 !== undefined) {\n    var match$2 = stagedPlayersOption_001;\n    if (match$2 !== undefined) {\n      var match$3 = Js_dict.get(pairData, match$1);\n      var match$4 = Js_dict.get(pairData, match$2);\n      if (match$3 !== undefined && match$4 !== undefined) {\n        var ideal = Pairing$Coronate.calcPairIdeal(match$3, match$4);\n        matchIdeal = Numeral.default(ideal / Pairing$Coronate.maxPriority).format(\"%\");\n      } else {\n        matchIdeal = \"\";\n      }\n    } else {\n      matchIdeal = \"\";\n    }\n  } else {\n    matchIdeal = \"\";\n  }\n  return React.createElement(\"div\", undefined, React.createElement(\"h2\", undefined, \"Selected for matching:\"), React.createElement(\"div\", {\n                  className: \"content\"\n                }, React.createElement(\"p\", undefined, \"White: \", whiteOpt !== undefined ? React.createElement(React.Fragment, undefined, whiteName + \" \", React.createElement(\"button\", {\n                                \"aria-label\": \"remove \" + whiteName,\n                                className: \"button-micro\",\n                                onClick: (function (param) {\n                                    return unstage(/* White */0);\n                                  })\n                              }, React.createElement(ReactFeather.UserMinus, { }), \" Remove\")) : null), React.createElement(\"p\", undefined, \"Black: \", blackOpt !== undefined ? React.createElement(React.Fragment, undefined, blackName + \" \", React.createElement(\"button\", {\n                                \"aria-label\": \"remove \" + blackName,\n                                className: \"button-micro\",\n                                onClick: (function (param) {\n                                    return unstage(/* Black */1);\n                                  })\n                              }, React.createElement(ReactFeather.UserMinus, { }), \" Remove\")) : null), React.createElement(\"p\", undefined, \"Match ideal: \" + matchIdeal)), React.createElement(\"div\", {\n                  className: \"toolbar\"\n                }, React.createElement(\"button\", {\n                      disabled: noneAreSelected,\n                      onClick: (function (param) {\n                          return Curry._1(setStagedPlayers, (function (param) {\n                                        return /* tuple */[\n                                                param[1],\n                                                param[0]\n                                              ];\n                                      }));\n                        })\n                    }, React.createElement(ReactFeather.Repeat, { }), \" Swap colors\"), \" \", React.createElement(\"button\", {\n                      className: \"button-primary\",\n                      disabled: !twoAreSelected,\n                      onClick: match_\n                    }, React.createElement(ReactFeather.Check, { }), \" Match selected\")));\n}\n\nvar Stage = /* module */[/* make */PairPicker$Stage];\n\nfunction PairPicker$PlayerInfo(Props) {\n  var playerId = Props.playerId;\n  var players = Props.players;\n  var getPlayer = Props.getPlayer;\n  var scoreData = Props.scoreData;\n  var match = Hooks$Coronate.Db[/* useOptions */15](/* () */0);\n  var avoidDict = match[0][/* avoidPairs */0].reduce(Converters$Coronate.avoidPairReducer, { });\n  var match$1 = Js_dict.get(scoreData, playerId);\n  var playerData = match$1 !== undefined ? match$1 : Scoring$Coronate.createBlankScoreData(playerId);\n  var colorScores = playerData[/* colorScores */0];\n  var opponentResults = playerData[/* opponentResults */4];\n  var results = playerData[/* results */6];\n  var colorBalance = Utils$Coronate.arraySumFloat(colorScores);\n  var player = Curry._1(getPlayer, playerId);\n  var hasBye = Object.keys(opponentResults).includes(Data$Coronate.dummy_id);\n  var match$2 = Js_dict.get(avoidDict, playerId);\n  var avoidList = match$2 !== undefined ? match$2 : /* array */[];\n  var prettyBalance = colorBalance < 0.0 ? \"White +\" + Utils$Coronate.absf(colorBalance).toString() : (\n      colorBalance > 0.0 ? \"Black +\" + colorBalance.toString() : \"Even\"\n    );\n  return React.createElement(\"dl\", {\n              className: \"player-card\"\n            }, React.createElement(\"h3\", undefined, player[/* firstName */0] + (\" \" + player[/* lastName */2])), React.createElement(\"p\", undefined, \"Score: \", Utils$Coronate.arraySumFloat(results).toString()), React.createElement(\"p\", {\n                  id: \"rating-\" + player[/* id */1]\n                }, \"Rating: \", player[/* rating */4].toString()), React.createElement(\"p\", undefined, \"Color balance: \" + prettyBalance), React.createElement(\"p\", undefined, \"Has had a bye round: \" + (\n                  hasBye ? \"Yes\" : \"No\"\n                )), React.createElement(\"p\", undefined, \"Opponent history:\"), React.createElement(\"ol\", undefined, Js_dict.entries(opponentResults).map((function (param) {\n                        var result = param[1];\n                        var opId = param[0];\n                        return React.createElement(\"li\", {\n                                    key: opId\n                                  }, /* array */[\n                                      Curry._1(getPlayer, opId)[/* firstName */0],\n                                      Curry._1(getPlayer, opId)[/* lastName */2],\n                                      \"-\",\n                                      result !== 0.0 ? (\n                                          result !== 0.5 && result === 1.0 ? \"Won\" : \"Draw\"\n                                        ) : \"Lost\"\n                                    ].join(\" \"));\n                      }))), React.createElement(\"p\", undefined, \"Players to avoid:\"), React.createElement(\"ol\", undefined, avoidList.map((function (pId) {\n                        var match = Belt_MapString.get(players, pId);\n                        if (match !== undefined) {\n                          return React.createElement(\"li\", {\n                                      key: pId\n                                    }, Curry._1(getPlayer, pId)[/* firstName */0] + (\" \" + Curry._1(getPlayer, pId)[/* lastName */2]));\n                        } else {\n                          return null;\n                        }\n                      }))));\n}\n\nvar PlayerInfo = /* module */[/* make */PairPicker$PlayerInfo];\n\nfunction PairPicker(Props) {\n  var roundId = Props.roundId;\n  var tournament = Props.tournament;\n  var scoreData = Props.scoreData;\n  var unmatched = Props.unmatched;\n  var unmatchedCount = Props.unmatchedCount;\n  var unmatchedWithDummy = Props.unmatchedWithDummy;\n  var match = React.useState((function () {\n          return /* tuple */[\n                  null,\n                  null\n                ];\n        }));\n  var stagedPlayers = match[0];\n  var p2 = stagedPlayers[1];\n  var p1 = stagedPlayers[0];\n  var setStagedPlayers = match[1];\n  var match$1 = Hooks$Coronate.Db[/* useOptions */15](/* () */0);\n  var options = match$1[0];\n  var tourney = tournament[/* tourney */7];\n  var activePlayers = tournament[/* activePlayers */0];\n  var players = tournament[/* players */4];\n  var getPlayer = tournament[/* getPlayer */1];\n  var tourneyDispatch = tournament[/* tourneyDispatch */8];\n  var match$2 = React.useState((function () {\n          return false;\n        }));\n  var setIsModalOpen = match$2[1];\n  var avoidPairs = options[/* avoidPairs */0];\n  var pairData = React.useMemo((function () {\n          return Pairing$Coronate.setUpperHalves(Converters$Coronate.createPairingData(activePlayers, avoidPairs, scoreData));\n        }), /* tuple */[\n        activePlayers,\n        avoidPairs,\n        scoreData\n      ]);\n  React.useEffect((function (param) {\n          if (!(p1 == null)) {\n            var match = Js_dict.get(unmatchedWithDummy, p1);\n            if (match === undefined) {\n              Curry._1(setStagedPlayers, (function (param) {\n                      return /* tuple */[\n                              null,\n                              param[1]\n                            ];\n                    }));\n            }\n            \n          }\n          if (!(p2 == null)) {\n            var match$1 = Js_dict.get(unmatchedWithDummy, p2);\n            if (match$1 === undefined) {\n              Curry._1(setStagedPlayers, (function (param) {\n                      return /* tuple */[\n                              param[0],\n                              null\n                            ];\n                    }));\n            }\n            \n          }\n          return undefined;\n        }), /* tuple */[\n        unmatchedWithDummy,\n        p1,\n        p2,\n        setStagedPlayers\n      ]);\n  return React.createElement(\"div\", {\n              className: \"content-area\",\n              style: {\n                width: \"720px\"\n              }\n            }, React.createElement(\"div\", {\n                  className: \"toolbar\"\n                }, React.createElement(\"button\", {\n                      className: \"button-primary\",\n                      disabled: unmatchedCount === 0,\n                      onClick: (function (param) {\n                          return Curry._1(tourneyDispatch, /* AutoPair */Block.__(6, [\n                                        options[/* byeValue */1],\n                                        roundId,\n                                        pairData,\n                                        unmatched,\n                                        tourney\n                                      ]));\n                        })\n                    }, \"Auto-pair unmatched players\"), \" \", React.createElement(\"button\", {\n                      onClick: (function (param) {\n                          return Curry._1(setIsModalOpen, (function (param) {\n                                        return true;\n                                      }));\n                        })\n                    }, \"Add or remove players from the roster.\")), React.createElement(Utils$Coronate.PanelContainer[/* make */0], {\n                  children: null\n                }, React.createElement(Utils$Coronate.Panel[/* make */0], {\n                      children: React.createElement(PairPicker$SelectList, {\n                            pairData: pairData,\n                            stagedPlayers: stagedPlayers,\n                            setStagedPlayers: setStagedPlayers,\n                            unmatched: unmatchedWithDummy\n                          })\n                    }), React.createElement(Utils$Coronate.Panel[/* make */0], {\n                      children: null,\n                      style: {\n                        flexGrow: \"1\"\n                      }\n                    }, React.createElement(PairPicker$Stage, {\n                          getPlayer: getPlayer,\n                          pairData: pairData,\n                          roundId: roundId,\n                          stagedPlayers: stagedPlayers,\n                          setStagedPlayers: setStagedPlayers,\n                          tourneyDispatch: tourneyDispatch\n                        }), React.createElement(Utils$Coronate.PanelContainer[/* make */0], {\n                          children: /* array */[\n                              p1,\n                              p2\n                            ].map((function (id) {\n                                  if (id == null) {\n                                    return null;\n                                  } else {\n                                    return React.createElement(Utils$Coronate.Panel[/* make */0], {\n                                                children: React.createElement(PairPicker$PlayerInfo, {\n                                                      playerId: id,\n                                                      players: players,\n                                                      getPlayer: getPlayer,\n                                                      scoreData: scoreData\n                                                    }),\n                                                key: id\n                                              });\n                                  }\n                                }))\n                        }))), React.createElement(Dialog.Dialog, {\n                  isOpen: match$2[0],\n                  onDismiss: (function (param) {\n                      return Curry._1(setIsModalOpen, (function (param) {\n                                    return false;\n                                  }));\n                    }),\n                  children: null\n                }, React.createElement(\"button\", {\n                      className: \"button-micro\",\n                      onClick: (function (param) {\n                          return Curry._1(setIsModalOpen, (function (param) {\n                                        return false;\n                                      }));\n                        })\n                    }, \"Done\"), React.createElement(PageTourneyPlayers$Coronate.Selecting[/* make */0], {\n                      tourney: tourney,\n                      tourneyDispatch: tourneyDispatch\n                    })));\n}\n\nvar make = PairPicker;\n\nexport {\n  sortByName ,\n  sortByIdeal ,\n  SelectList ,\n  Stage ,\n  PlayerInfo ,\n  make ,\n  \n}\n/* react Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 6.0.3, PLEASE EDIT WITH CARE\n\nimport * as Block from \"bs-platform/lib/es6/block.js\";\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as React from \"react\";\nimport * as Js_dict from \"bs-platform/lib/es6/js_dict.js\";\nimport * as Numeral from \"numeral\";\nimport * as Belt_Array from \"bs-platform/lib/es6/belt_Array.js\";\nimport * as Tabs from \"@reach/tabs\";\nimport * as Belt_Option from \"bs-platform/lib/es6/belt_Option.js\";\nimport * as Caml_option from \"bs-platform/lib/es6/caml_option.js\";\nimport * as Js_mapperRt from \"bs-platform/lib/es6/js_mapperRt.js\";\nimport * as Dialog from \"@reach/dialog\";\nimport * as Data$Coronate from \"../Data.bs.js\";\nimport * as ReactFeather from \"react-feather\";\nimport * as Belt_MapString from \"bs-platform/lib/es6/belt_MapString.js\";\nimport * as Pages$Coronate from \"../Pages.bs.js\";\nimport * as Utils$Coronate from \"../Utils.bs.js\";\nimport * as Scoring$Coronate from \"../Scoring.bs.js\";\nimport * as Converters$Coronate from \"../Converters.bs.js\";\nimport * as PairPicker$Coronate from \"./PairPicker.bs.js\";\nimport * as VisuallyHidden from \"@reach/visually-hidden\";\n\nfunction PageRound$PlayerMatchInfo(Props) {\n  var playerId = Props.playerId;\n  var scoreData = Props.scoreData;\n  var origRating = Props.origRating;\n  var newRating = Props.newRating;\n  var getPlayer = Props.getPlayer;\n  var player = Curry._1(getPlayer, playerId);\n  var match = Js_dict.get(scoreData, playerId);\n  var match$1;\n  if (match !== undefined) {\n    var data = match;\n    match$1 = /* tuple */[\n      data[/* colorScores */0],\n      data[/* opponentResults */4],\n      data[/* results */6]\n    ];\n  } else {\n    match$1 = /* tuple */[\n      /* array */[],\n      { },\n      /* array */[]\n    ];\n  }\n  var opponentResults = match$1[1];\n  var colorBalance = Utils$Coronate.arraySumFloat(match$1[0]);\n  var hasBye = Object.keys(opponentResults).includes(Data$Coronate.dummy_id);\n  var oppResultsEntries = Js_dict.entries(opponentResults);\n  var prettyBalance = colorBalance < 0.0 ? \"White +\" + Utils$Coronate.absf(colorBalance).toString() : (\n      colorBalance > 0.0 ? \"Black +\" + colorBalance.toString() : \"Even\"\n    );\n  return React.createElement(\"dl\", {\n              className: \"player-card\"\n            }, React.createElement(\"h3\", undefined, player[/* firstName */0] + (\" \" + player[/* lastName */2])), React.createElement(\"dt\", undefined, \"Score\"), React.createElement(\"dd\", undefined, Utils$Coronate.arraySumFloat(match$1[2]).toString()), React.createElement(\"dt\", undefined, \"Rating\"), React.createElement(\"dd\", {\n                  id: \"rating-\" + playerId\n                }, origRating.toString(), \" (\", Numeral.default(newRating - origRating | 0).format(\"+0\"), \")\"), React.createElement(\"dt\", undefined, \"Color balance\"), React.createElement(\"dd\", undefined, prettyBalance), React.createElement(\"dt\", undefined, \"Has had a bye round\"), React.createElement(\"dd\", undefined, hasBye ? \"Yes\" : \"No\"), React.createElement(\"dt\", undefined, \"Opponent history\"), React.createElement(\"dd\", undefined, React.createElement(\"ol\", undefined, oppResultsEntries.map((function (param, i) {\n                            var result = param[1];\n                            var opId = param[0];\n                            var match = i < (oppResultsEntries.length - 1 | 0);\n                            if (match) {\n                              return React.createElement(\"li\", {\n                                          key: opId\n                                        }, /* array */[\n                                            Curry._1(getPlayer, opId)[/* firstName */0],\n                                            Curry._1(getPlayer, opId)[/* lastName */2],\n                                            \"-\",\n                                            result !== 0.0 ? (\n                                                result !== 0.5 && result === 1.0 ? \"Won\" : \"Draw\"\n                                              ) : \"Lost\"\n                                          ].join(\" \"));\n                            } else {\n                              return null;\n                            }\n                          })))));\n}\n\nvar PlayerMatchInfo = /* module */[/* make */PageRound$PlayerMatchInfo];\n\nvar jsMapperConstantArray = /* array */[\n  /* tuple */[\n    -937474657,\n    \"Black\"\n  ],\n  /* tuple */[\n    -588596599,\n    \"White\"\n  ],\n  /* tuple */[\n    -432235409,\n    \"NotSet\"\n  ],\n  /* tuple */[\n    759781412,\n    \"Draw\"\n  ]\n];\n\nfunction resultCodesToJs(param) {\n  return Js_mapperRt.binarySearch(4, param, jsMapperConstantArray);\n}\n\nfunction resultCodesFromJs(param) {\n  return Js_mapperRt.revSearch(4, jsMapperConstantArray, param);\n}\n\nfunction PageRound$MatchRow(Props) {\n  var match = Props.isCompact;\n  var isCompact = match !== undefined ? match : false;\n  var pos = Props.pos;\n  var match_ = Props.match;\n  var roundId = Props.roundId;\n  var selectedMatch = Props.selectedMatch;\n  var setSelectedMatch = Props.setSelectedMatch;\n  var scoreData = Props.scoreData;\n  var tournament = Props.tournament;\n  var tourney = tournament[/* tourney */7];\n  var tourneyDispatch = tournament[/* tourneyDispatch */8];\n  var players = tournament[/* players */4];\n  var getPlayer = tournament[/* getPlayer */1];\n  var playersDispatch = tournament[/* playersDispatch */5];\n  var match$1 = React.useState((function () {\n          return false;\n        }));\n  var setIsModalOpen = match$1[1];\n  var resultCode = match_[/* whiteScore */7] > match_[/* blackScore */8] ? /* White */-588596599 : (\n      match_[/* blackScore */8] > match_[/* whiteScore */7] ? /* Black */-937474657 : (\n          match_[/* whiteScore */7] === 0.5 && match_[/* blackScore */8] === 0.5 ? /* Draw */759781412 : /* NotSet */-432235409\n        )\n    );\n  var whitePlayer = Curry._1(getPlayer, match_[/* whiteId */1]);\n  var blackPlayer = Curry._1(getPlayer, match_[/* blackId */2]);\n  var isDummyRound = /* array */[\n      match_[/* whiteId */1],\n      match_[/* blackId */2]\n    ].includes(Data$Coronate.dummy_id);\n  var whiteName = /* array */[\n      whitePlayer[/* firstName */0],\n      whitePlayer[/* lastName */2]\n    ].join(\" \");\n  var blackName = /* array */[\n      blackPlayer[/* firstName */0],\n      blackPlayer[/* lastName */2]\n    ].join(\" \");\n  var resultDisplay = function (color) {\n    if (resultCode !== -432235409) {\n      if (resultCode !== 759781412) {\n        var match = resultCode === color;\n        if (match) {\n          return React.createElement(ReactFeather.Award, { });\n        } else {\n          return React.createElement(VisuallyHidden.default, {\n                      children: \"Lost\"\n                    });\n        }\n      } else {\n        return React.createElement(\"span\", {\n                    \"aria-label\": \"Draw\",\n                    role: \"img\",\n                    style: {\n                      filter: \"grayscale(100%)\"\n                    }\n                  }, \"\");\n      }\n    } else {\n      return React.createElement(VisuallyHidden.default, {\n                  children: \"Not set\"\n                });\n    }\n  };\n  var setMatchResult = function (jsResultCode) {\n    var match = resultCodesFromJs(jsResultCode);\n    var safeCode = match !== undefined ? match : /* NotSet */-432235409;\n    var result = safeCode >= -432235409 ? (\n        safeCode >= 759781412 ? /* tuple */[\n            0.5,\n            0.5\n          ] : /* tuple */[\n            0.0,\n            0.0\n          ]\n      ) : (\n        safeCode >= -588596599 ? /* tuple */[\n            1.0,\n            0.0\n          ] : /* tuple */[\n            0.0,\n            1.0\n          ]\n      );\n    var newBlackScore = result[1];\n    var newWhiteScore = result[0];\n    if (match_[/* whiteScore */7] !== newWhiteScore || match_[/* blackScore */8] !== newBlackScore) {\n      var white = Belt_MapString.getExn(players, match_[/* whiteId */1]);\n      var black = Belt_MapString.getExn(players, match_[/* blackId */2]);\n      var match$1 = safeCode === /* NotSet */-432235409;\n      var newRatings = match$1 ? /* tuple */[\n          match_[/* whiteOrigRating */5],\n          match_[/* blackOrigRating */6]\n        ] : Scoring$Coronate.calcNewRatings(/* tuple */[\n              match_[/* whiteOrigRating */5],\n              match_[/* blackOrigRating */6]\n            ], /* tuple */[\n              white[/* matchCount */3],\n              black[/* matchCount */3]\n            ], /* tuple */[\n              newWhiteScore,\n              newBlackScore\n            ]);\n      Curry._1(playersDispatch, /* SetRating */Block.__(3, [\n              white[/* id */1],\n              newRatings[0]\n            ]));\n      Curry._1(playersDispatch, /* SetRating */Block.__(3, [\n              black[/* id */1],\n              newRatings[1]\n            ]));\n      if (match_[/* whiteScore */7] + match_[/* blackScore */8] === 0.0) {\n        Curry._1(playersDispatch, /* SetMatchCount */Block.__(2, [\n                white[/* id */1],\n                white[/* matchCount */3] + 1 | 0\n              ]));\n        Curry._1(playersDispatch, /* SetMatchCount */Block.__(2, [\n                black[/* id */1],\n                black[/* matchCount */3] + 1 | 0\n              ]));\n      }\n      return Curry._1(tourneyDispatch, /* SetMatchResult */Block.__(9, [\n                    match_[/* id */0],\n                    newRatings,\n                    result,\n                    roundId\n                  ]));\n    } else {\n      return 0;\n    }\n  };\n  var setMatchResultBlur = function ($$event) {\n    return setMatchResult($$event.target.value);\n  };\n  var setMatchResultChange = function ($$event) {\n    return setMatchResult($$event.target.value);\n  };\n  var tmp;\n  if (isCompact) {\n    tmp = null;\n  } else {\n    var tmp$1;\n    if (scoreData !== undefined) {\n      var scoreData$1 = Caml_option.valFromOption(scoreData);\n      tmp$1 = React.createElement(Dialog.Dialog, {\n            isOpen: match$1[0],\n            onDismiss: (function (param) {\n                return Curry._1(setIsModalOpen, (function (param) {\n                              return false;\n                            }));\n              }),\n            children: null\n          }, React.createElement(\"button\", {\n                className: \"button-micro button-primary\",\n                onClick: (function (param) {\n                    return Curry._1(setIsModalOpen, (function (param) {\n                                  return false;\n                                }));\n                  })\n              }, \"close\"), React.createElement(\"p\", undefined, tourney[/* name */3]), React.createElement(\"p\", undefined, /* array */[\n                  \"Round \",\n                  (roundId + 1 | 0).toString(),\n                  \" match \",\n                  (pos + 1 | 0).toString()\n                ].join(\" \")), React.createElement(Utils$Coronate.PanelContainer[/* make */0], {\n                children: null\n              }, React.createElement(Utils$Coronate.Panel[/* make */0], {\n                    children: React.createElement(PageRound$PlayerMatchInfo, {\n                          playerId: match_[/* whiteId */1],\n                          scoreData: scoreData$1,\n                          origRating: match_[/* whiteOrigRating */5],\n                          newRating: match_[/* whiteNewRating */3],\n                          getPlayer: getPlayer\n                        })\n                  }), React.createElement(Utils$Coronate.Panel[/* make */0], {\n                    children: React.createElement(PageRound$PlayerMatchInfo, {\n                          playerId: match_[/* blackId */2],\n                          scoreData: scoreData$1,\n                          origRating: match_[/* blackOrigRating */6],\n                          newRating: match_[/* blackNewRating */4],\n                          getPlayer: getPlayer\n                        })\n                  })));\n    } else {\n      tmp$1 = null;\n    }\n    tmp = React.createElement(\"td\", {\n          className: \"round__ controls data__input\"\n        }, Belt_Option.mapWithDefault(selectedMatch, null, (function (x) {\n                var match = Belt_Option.mapWithDefault((x == null) ? undefined : Caml_option.some(x), true, (function (id) {\n                        return id !== match_[/* id */0];\n                      }));\n                if (match) {\n                  return React.createElement(\"button\", {\n                              className: \"button-ghost\",\n                              title: \"Edit match\",\n                              onClick: (function (param) {\n                                  return Belt_Option.mapWithDefault(setSelectedMatch, /* () */0, (function (x) {\n                                                return Curry._1(x, (function (param) {\n                                                              return match_[/* id */0];\n                                                            }));\n                                              }));\n                                })\n                            }, React.createElement(ReactFeather.Circle, { }), React.createElement(VisuallyHidden.default, {\n                                  children: /* array */[\n                                      \"Edit match for\",\n                                      whiteName,\n                                      \"versus\",\n                                      blackName\n                                    ].join(\" \")\n                                }));\n                } else {\n                  return React.createElement(\"button\", {\n                              className: \"button-ghost button-pressed\",\n                              title: \"End editing match\",\n                              onClick: (function (param) {\n                                  return Belt_Option.mapWithDefault(setSelectedMatch, /* () */0, (function (x) {\n                                                return Curry._1(x, (function (param) {\n                                                              return null;\n                                                            }));\n                                              }));\n                                })\n                            }, React.createElement(ReactFeather.CheckCircle, { }));\n                }\n              })), React.createElement(\"button\", {\n              className: \"button-ghost\",\n              title: \"Open match information.\",\n              onClick: (function (param) {\n                  return Curry._1(setIsModalOpen, (function (param) {\n                                return true;\n                              }));\n                })\n            }, React.createElement(ReactFeather.Info, { }), React.createElement(VisuallyHidden.default, {\n                  children: /* array */[\n                      \"View information for match:\",\n                      whiteName,\n                      \"versus\",\n                      blackName\n                    ].join(\" \")\n                })), tmp$1);\n  }\n  return React.createElement(\"tr\", {\n              className: Belt_Option.mapWithDefault(selectedMatch, \"\", (function (x) {\n                      return Belt_Option.mapWithDefault((x == null) ? undefined : Caml_option.some(x), \"\", (function (id) {\n                                    var match = match_[/* id */0] === id;\n                                    if (match) {\n                                      return \"selected\";\n                                    } else {\n                                      return \"buttons-on-hover\";\n                                    }\n                                  }));\n                    }))\n            }, React.createElement(\"th\", {\n                  className: \"table__number round__rowId\",\n                  scope: \"row\"\n                }, String(pos + 1 | 0)), React.createElement(\"td\", {\n                  className: \"round__playerResult\"\n                }, resultDisplay(/* White */-588596599)), React.createElement(\"td\", {\n                  className: \"table__player row__player \" + whitePlayer[/* type_ */5],\n                  id: \"match-\" + (String(pos) + \"-white\")\n                }, whiteName), React.createElement(\"td\", {\n                  className: \"round__playerResult\"\n                }, resultDisplay(/* Black */-937474657)), React.createElement(\"td\", {\n                  className: \"table__player row__player \" + blackPlayer[/* type_ */5],\n                  id: \"match-\" + (String(pos) + \"-black\")\n                }, blackName), React.createElement(\"td\", {\n                  className: \"round__matchResult data__input row__controls\"\n                }, React.createElement(\"select\", {\n                      className: \"round__winnerSelect\",\n                      disabled: isDummyRound,\n                      value: resultCodesToJs(resultCode),\n                      onBlur: setMatchResultBlur,\n                      onChange: setMatchResultChange\n                    }, React.createElement(\"option\", {\n                          value: resultCodesToJs(/* NotSet */-432235409)\n                        }, \"Select winner\"), React.createElement(\"option\", {\n                          value: resultCodesToJs(/* White */-588596599)\n                        }, \"White won\"), React.createElement(\"option\", {\n                          value: resultCodesToJs(/* Black */-937474657)\n                        }, \"Black won\"), React.createElement(\"option\", {\n                          value: resultCodesToJs(/* Draw */759781412)\n                        }, \"Draw\"))), tmp);\n}\n\nvar MatchRow = /* module */[/* make */PageRound$MatchRow];\n\nfunction PageRound$RoundTable(Props) {\n  var match = Props.isCompact;\n  var isCompact = match !== undefined ? match : false;\n  var roundId = Props.roundId;\n  var selectedMatch = Props.selectedMatch;\n  var setSelectedMatch = Props.setSelectedMatch;\n  var tournament = Props.tournament;\n  var scoreData = Props.scoreData;\n  var tourney = tournament[/* tourney */7];\n  var matchList = tourney[/* roundList */5][roundId];\n  var match$1 = matchList.length === 0;\n  return React.createElement(\"table\", {\n              className: \"round__table\"\n            }, match$1 ? null : React.createElement(React.Fragment, undefined, React.createElement(\"caption\", {\n                        className: isCompact ? \"title-30\" : \"title-40\"\n                      }, \"Round \", (roundId + 1 | 0).toString(), \" matches\"), React.createElement(\"thead\", undefined, React.createElement(\"tr\", undefined, React.createElement(\"th\", {\n                                className: \"round__rowId\",\n                                scope: \"col\"\n                              }, \"#\"), React.createElement(\"th\", {\n                                scope: \"col\"\n                              }, React.createElement(VisuallyHidden.default, {\n                                    children: \"White result\"\n                                  })), React.createElement(\"th\", {\n                                className: \"row__player\",\n                                scope: \"col\"\n                              }, \"White\"), React.createElement(\"th\", {\n                                scope: \"col\"\n                              }, React.createElement(VisuallyHidden.default, {\n                                    children: \"Black result\"\n                                  })), React.createElement(\"th\", {\n                                className: \"row__player\",\n                                scope: \"col\"\n                              }, \"Black\"), React.createElement(\"th\", {\n                                className: \"row__result\",\n                                scope: \"col\"\n                              }, \"Match result\"), isCompact ? null : React.createElement(\"th\", {\n                                  className: \"row__controls\",\n                                  scope: \"col\"\n                                }, React.createElement(VisuallyHidden.default, {\n                                      children: \"Controls\"\n                                    }))))), React.createElement(\"tbody\", {\n                  className: \"round__tbody content\"\n                }, matchList.map((function (match_, pos) {\n                        return React.createElement(PageRound$MatchRow, {\n                                    isCompact: isCompact,\n                                    pos: pos,\n                                    match: match_,\n                                    roundId: roundId,\n                                    selectedMatch: selectedMatch,\n                                    setSelectedMatch: setSelectedMatch,\n                                    scoreData: scoreData,\n                                    tournament: tournament,\n                                    key: match_[/* id */0]\n                                  });\n                      }))));\n}\n\nvar RoundTable = /* module */[/* make */PageRound$RoundTable];\n\nfunction findById(id, list) {\n  return list.filter((function (x) {\n                  return x[/* id */0] === id;\n                }))[0];\n}\n\nfunction PageRound$Round(Props) {\n  var roundId = Props.roundId;\n  var tournament = Props.tournament;\n  var scoreData = Props.scoreData;\n  var tourney = tournament[/* tourney */7];\n  var players = tournament[/* players */4];\n  var tourneyDispatch = tournament[/* tourneyDispatch */8];\n  var playersDispatch = tournament[/* playersDispatch */5];\n  var matchList = Belt_Array.get(tourney[/* roundList */5], roundId);\n  var match = React.useState((function () {\n          return null;\n        }));\n  var setSelectedMatch = match[1];\n  var selectedMatch = match[0];\n  var moveMatch = function (matchId, direction, matchList) {\n    var oldIndex = matchList.indexOf(findById(matchId, matchList));\n    var match = (oldIndex + direction | 0) >= 0;\n    var newIndex = match ? oldIndex + direction | 0 : 0;\n    return Curry._1(tourneyDispatch, /* MoveMatch */Block.__(12, [\n                  oldIndex,\n                  newIndex,\n                  roundId\n                ]));\n  };\n  if (matchList !== undefined) {\n    var matchList$1 = matchList;\n    var match$1 = matchList$1.length === 0;\n    return React.createElement(\"div\", {\n                className: \"content-area\"\n              }, React.createElement(\"div\", {\n                    className: \"toolbar\"\n                  }, React.createElement(\"button\", {\n                        className: \"button-micro\",\n                        disabled: selectedMatch === null,\n                        onClick: (function (param) {\n                            Belt_Option.map((selectedMatch == null) ? undefined : Caml_option.some(selectedMatch), (function (x) {\n                                    var matchId = x;\n                                    var matchList$2 = matchList$1;\n                                    var match_ = findById(matchId, matchList$2);\n                                    if (match_[/* whiteScore */7] + match_[/* blackScore */8] !== 0.0) {\n                                      /* array */[\n                                          /* tuple */[\n                                            match_[/* whiteId */1],\n                                            match_[/* whiteOrigRating */5]\n                                          ],\n                                          /* tuple */[\n                                            match_[/* blackId */2],\n                                            match_[/* blackOrigRating */6]\n                                          ]\n                                        ].forEach((function (param) {\n                                              var id = param[0];\n                                              var match = Belt_MapString.get(players, id);\n                                              if (match !== undefined) {\n                                                Curry._1(playersDispatch, /* SetMatchCount */Block.__(2, [\n                                                        id,\n                                                        match[/* matchCount */3] - 1 | 0\n                                                      ]));\n                                                return Curry._1(playersDispatch, /* SetRating */Block.__(3, [\n                                                              id,\n                                                              param[1]\n                                                            ]));\n                                              } else {\n                                                return /* () */0;\n                                              }\n                                            }));\n                                    }\n                                    Curry._1(tourneyDispatch, /* DelMatch */Block.__(10, [\n                                            matchId,\n                                            roundId\n                                          ]));\n                                    return Curry._1(setSelectedMatch, (function (param) {\n                                                  return null;\n                                                }));\n                                  }));\n                            return /* () */0;\n                          })\n                      }, React.createElement(ReactFeather.Trash2, { }), \" Unmatch\"), \" \", React.createElement(\"button\", {\n                        className: \"button-micro\",\n                        disabled: selectedMatch === null,\n                        onClick: (function (param) {\n                            Belt_Option.map((selectedMatch == null) ? undefined : Caml_option.some(selectedMatch), (function (x) {\n                                    return Curry._1(tourneyDispatch, /* SwapColors */Block.__(11, [\n                                                  x,\n                                                  roundId\n                                                ]));\n                                  }));\n                            return /* () */0;\n                          })\n                      }, React.createElement(ReactFeather.Repeat, { }), \" Swap colors\"), \" \", React.createElement(\"button\", {\n                        className: \"button-micro\",\n                        disabled: selectedMatch === null,\n                        onClick: (function (param) {\n                            Belt_Option.map((selectedMatch == null) ? undefined : Caml_option.some(selectedMatch), (function (x) {\n                                    return moveMatch(x, -1, matchList$1);\n                                  }));\n                            return /* () */0;\n                          })\n                      }, React.createElement(ReactFeather.ArrowUp, { }), \" Move up\"), \" \", React.createElement(\"button\", {\n                        className: \"button-micro\",\n                        disabled: selectedMatch === null,\n                        onClick: (function (param) {\n                            Belt_Option.map((selectedMatch == null) ? undefined : Caml_option.some(selectedMatch), (function (x) {\n                                    return moveMatch(x, 1, matchList$1);\n                                  }));\n                            return /* () */0;\n                          })\n                      }, React.createElement(ReactFeather.ArrowDown, { }), \" Move down\")), match$1 ? React.createElement(\"p\", undefined, \"No players matched yet.\") : null, React.createElement(PageRound$RoundTable, {\n                    roundId: roundId,\n                    selectedMatch: selectedMatch,\n                    setSelectedMatch: setSelectedMatch,\n                    tournament: tournament,\n                    scoreData: scoreData\n                  }));\n  } else {\n    return React.createElement(Pages$Coronate.NotFound[/* make */0], { });\n  }\n}\n\nvar Round = /* module */[/* make */PageRound$Round];\n\nfunction WithRoundData(BaseComponent) {\n  var PageRound$WithRoundData = function (Props) {\n    var roundId = Props.roundId;\n    var tournament = Props.tournament;\n    var tourney = tournament[/* tourney */7];\n    var activePlayers = tournament[/* activePlayers */0];\n    var getPlayer = tournament[/* getPlayer */1];\n    var roundList = tourney[/* roundList */5];\n    var scoreData = React.useMemo((function () {\n            return Converters$Coronate.matches2ScoreData(Data$Coronate.rounds2Matches(roundList, undefined, /* () */0));\n          }), /* array */[roundList]);\n    var match = roundId === (roundList.length - 1 | 0);\n    var unmatched = match ? Data$Coronate.getUnmatched(roundList, activePlayers, roundId) : { };\n    var unmatchedCount = Object.keys(unmatched).length;\n    var unmatchedWithDummy = Js_dict.fromArray(Js_dict.entries(unmatched));\n    if (unmatchedCount % 2 !== 0) {\n      unmatchedWithDummy[Data$Coronate.dummy_id] = Curry._1(getPlayer, Data$Coronate.dummy_id);\n    }\n    var activePlayersCount = Belt_MapString.keysToArray(activePlayers).length;\n    return React.createElement(BaseComponent[/* make */0], {\n                roundId: roundId,\n                tournament: tournament,\n                activePlayersCount: activePlayersCount,\n                scoreData: scoreData,\n                unmatched: unmatched,\n                unmatchedCount: unmatchedCount,\n                unmatchedWithDummy: unmatchedWithDummy\n              });\n  };\n  return /* module */[/* make */PageRound$WithRoundData];\n}\n\nfunction PageRound$PageRoundBase(Props) {\n  var roundId = Props.roundId;\n  var tournament = Props.tournament;\n  var activePlayersCount = Props.activePlayersCount;\n  var scoreData = Props.scoreData;\n  var unmatched = Props.unmatched;\n  var unmatchedCount = Props.unmatchedCount;\n  var unmatchedWithDummy = Props.unmatchedWithDummy;\n  var match = unmatchedCount === activePlayersCount;\n  var initialTab = match ? 1 : 0;\n  var match$1 = React.useState((function () {\n          return initialTab;\n        }));\n  var setOpenTab = match$1[1];\n  React.useEffect((function (param) {\n          if (unmatchedCount === activePlayersCount) {\n            Curry._1(setOpenTab, (function (param) {\n                    return 1;\n                  }));\n          }\n          if (unmatchedCount === 0) {\n            Curry._1(setOpenTab, (function (param) {\n                    return 0;\n                  }));\n          }\n          return undefined;\n        }), /* tuple */[\n        unmatchedCount,\n        activePlayersCount,\n        setOpenTab\n      ]);\n  var match$2 = unmatchedCount !== 0;\n  return React.createElement(Tabs.Tabs, {\n              index: match$1[0],\n              onChange: (function (index) {\n                  return Curry._1(setOpenTab, (function (param) {\n                                return index;\n                              }));\n                }),\n              children: null\n            }, React.createElement(Tabs.TabList, {\n                  children: null\n                }, React.createElement(Tabs.Tab, {\n                      disabled: unmatchedCount === activePlayersCount,\n                      children: null\n                    }, React.createElement(ReactFeather.List, { }), \" Matches\"), React.createElement(Tabs.Tab, {\n                      disabled: unmatchedCount === 0,\n                      children: null\n                    }, React.createElement(ReactFeather.Users, { }), /* array */[\n                        \" Unmatched players (\",\n                        unmatchedCount.toString(),\n                        \")\"\n                      ].join(\"\"))), React.createElement(Tabs.TabPanels, {\n                  children: null\n                }, React.createElement(Tabs.TabPanel, {\n                      children: React.createElement(PageRound$Round, {\n                            roundId: roundId,\n                            tournament: tournament,\n                            scoreData: scoreData\n                          })\n                    }), React.createElement(Tabs.TabPanel, {\n                      children: React.createElement(\"div\", undefined, match$2 ? React.createElement(PairPicker$Coronate.make, {\n                                  roundId: roundId,\n                                  tournament: tournament,\n                                  scoreData: scoreData,\n                                  unmatched: unmatched,\n                                  unmatchedCount: unmatchedCount,\n                                  unmatchedWithDummy: unmatchedWithDummy\n                                }) : null)\n                    })));\n}\n\nvar PageRoundBase = /* module */[/* make */PageRound$PageRoundBase];\n\nfunction PageRound$WithRoundData(Props) {\n  var roundId = Props.roundId;\n  var tournament = Props.tournament;\n  var tourney = tournament[/* tourney */7];\n  var activePlayers = tournament[/* activePlayers */0];\n  var getPlayer = tournament[/* getPlayer */1];\n  var roundList = tourney[/* roundList */5];\n  var scoreData = React.useMemo((function () {\n          return Converters$Coronate.matches2ScoreData(Data$Coronate.rounds2Matches(roundList, undefined, /* () */0));\n        }), /* array */[roundList]);\n  var match = roundId === (roundList.length - 1 | 0);\n  var unmatched = match ? Data$Coronate.getUnmatched(roundList, activePlayers, roundId) : { };\n  var unmatchedCount = Object.keys(unmatched).length;\n  var unmatchedWithDummy = Js_dict.fromArray(Js_dict.entries(unmatched));\n  if (unmatchedCount % 2 !== 0) {\n    unmatchedWithDummy[Data$Coronate.dummy_id] = Curry._1(getPlayer, Data$Coronate.dummy_id);\n  }\n  var activePlayersCount = Belt_MapString.keysToArray(activePlayers).length;\n  return React.createElement(PageRound$PageRoundBase, {\n              roundId: roundId,\n              tournament: tournament,\n              activePlayersCount: activePlayersCount,\n              scoreData: scoreData,\n              unmatched: unmatched,\n              unmatchedCount: unmatchedCount,\n              unmatchedWithDummy: unmatchedWithDummy\n            });\n}\n\nvar PageRound = /* module */[/* make */PageRound$WithRoundData];\n\nfunction PageRound$1(Props) {\n  var roundId = Props.roundId;\n  var tournament = Props.tournament;\n  return React.createElement(PageRound$WithRoundData, {\n              roundId: roundId,\n              tournament: tournament\n            });\n}\n\nvar make = PageRound$1;\n\nexport {\n  PlayerMatchInfo ,\n  resultCodesToJs ,\n  resultCodesFromJs ,\n  MatchRow ,\n  RoundTable ,\n  findById ,\n  Round ,\n  WithRoundData ,\n  PageRoundBase ,\n  PageRound ,\n  make ,\n  \n}\n/* react Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 6.0.3, PLEASE EDIT WITH CARE\n\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as Js_dict from \"bs-platform/lib/es6/js_dict.js\";\nimport * as Caml_array from \"bs-platform/lib/es6/caml_array.js\";\nimport * as Data$Coronate from \"../Data.bs.js\";\nimport * as Belt_MapString from \"bs-platform/lib/es6/belt_MapString.js\";\nimport * as Utils$Coronate from \"../Utils.bs.js\";\nimport * as Pairing$Coronate from \"../Pairing.bs.js\";\n\nfunction scoreByeMatch(byeValue, match_) {\n  if (match_[/* whiteId */1] === Data$Coronate.dummy_id) {\n    return /* record */[\n            /* id */match_[/* id */0],\n            /* whiteId */match_[/* whiteId */1],\n            /* blackId */match_[/* blackId */2],\n            /* whiteNewRating */match_[/* whiteNewRating */3],\n            /* blackNewRating */match_[/* blackNewRating */4],\n            /* whiteOrigRating */match_[/* whiteOrigRating */5],\n            /* blackOrigRating */match_[/* blackOrigRating */6],\n            /* whiteScore */0.0,\n            /* blackScore */byeValue\n          ];\n  } else if (match_[/* blackId */2] === Data$Coronate.dummy_id) {\n    return /* record */[\n            /* id */match_[/* id */0],\n            /* whiteId */match_[/* whiteId */1],\n            /* blackId */match_[/* blackId */2],\n            /* whiteNewRating */match_[/* whiteNewRating */3],\n            /* blackNewRating */match_[/* blackNewRating */4],\n            /* whiteOrigRating */match_[/* whiteOrigRating */5],\n            /* blackOrigRating */match_[/* blackOrigRating */6],\n            /* whiteScore */byeValue,\n            /* blackScore */0.0\n          ];\n  } else {\n    return match_;\n  }\n}\n\nfunction autoPair(pairData, byeValue, playerDict, tourney) {\n  var playerIds = Object.keys(playerDict);\n  var filteredData = { };\n  Js_dict.values(pairData).forEach((function (datum) {\n          if (playerIds.includes(datum[/* id */0])) {\n            filteredData[datum[/* id */0]] = datum;\n            return /* () */0;\n          } else {\n            return 0;\n          }\n        }));\n  var match = Pairing$Coronate.setByePlayer(tourney[/* byeQueue */0], Data$Coronate.dummy_id, filteredData);\n  var byePlayerData = match[1];\n  var pairs = Pairing$Coronate.pairPlayers(match[0]);\n  var pairsWithBye = byePlayerData !== undefined ? pairs.concat(/* array */[/* tuple */[\n            byePlayerData[/* id */0],\n            Data$Coronate.dummy_id\n          ]]) : pairs;\n  var partial_arg = Data$Coronate.Player[/* getPlayerMaybe */5];\n  var getPlayer = function (param) {\n    return partial_arg(playerDict, param);\n  };\n  var newMatchList = pairsWithBye.map((function (param) {\n          var blackId = param[1];\n          var whiteId = param[0];\n          return /* record */[\n                  /* id */Utils$Coronate.nanoid(/* () */0),\n                  /* whiteId */whiteId,\n                  /* blackId */blackId,\n                  /* whiteNewRating */Curry._1(getPlayer, whiteId)[/* rating */4],\n                  /* blackNewRating */Curry._1(getPlayer, blackId)[/* rating */4],\n                  /* whiteOrigRating */Curry._1(getPlayer, whiteId)[/* rating */4],\n                  /* blackOrigRating */Curry._1(getPlayer, blackId)[/* rating */4],\n                  /* whiteScore */0.0,\n                  /* blackScore */0.0\n                ];\n        }));\n  return newMatchList.map((function (param) {\n                return scoreByeMatch(byeValue, param);\n              }));\n}\n\nfunction manualPair(param, byeValue) {\n  var black = param[1];\n  var white = param[0];\n  return scoreByeMatch(byeValue, /* record */[\n              /* id */Utils$Coronate.nanoid(/* () */0),\n              /* whiteId */white[/* id */1],\n              /* blackId */black[/* id */1],\n              /* whiteNewRating */white[/* rating */4],\n              /* blackNewRating */black[/* rating */4],\n              /* whiteOrigRating */white[/* rating */4],\n              /* blackOrigRating */black[/* rating */4],\n              /* whiteScore */0.0,\n              /* blackScore */0.0\n            ]);\n}\n\nfunction tournamentReducer(state, action) {\n  if (typeof action === \"number\") {\n    if (action === 0) {\n      return /* record */[\n              /* byeQueue */state[/* byeQueue */0],\n              /* date */state[/* date */1],\n              /* id */state[/* id */2],\n              /* name */state[/* name */3],\n              /* playerIds */state[/* playerIds */4],\n              /* roundList */state[/* roundList */5].concat(/* array */[/* array */[]]),\n              /* tieBreaks */state[/* tieBreaks */6]\n            ];\n    } else {\n      return /* record */[\n              /* byeQueue */state[/* byeQueue */0],\n              /* date */state[/* date */1],\n              /* id */state[/* id */2],\n              /* name */state[/* name */3],\n              /* playerIds */state[/* playerIds */4],\n              /* roundList */state[/* roundList */5].slice(0, -1),\n              /* tieBreaks */state[/* tieBreaks */6]\n            ];\n    }\n  } else {\n    switch (action.tag | 0) {\n      case 0 : \n          return /* record */[\n                  /* byeQueue */state[/* byeQueue */0],\n                  /* date */state[/* date */1],\n                  /* id */state[/* id */2],\n                  /* name */state[/* name */3],\n                  /* playerIds */state[/* playerIds */4],\n                  /* roundList */state[/* roundList */5],\n                  /* tieBreaks */state[/* tieBreaks */6].concat(/* array */[action[0]])\n                ];\n      case 1 : \n          var idToDel = action[0];\n          return /* record */[\n                  /* byeQueue */state[/* byeQueue */0],\n                  /* date */state[/* date */1],\n                  /* id */state[/* id */2],\n                  /* name */state[/* name */3],\n                  /* playerIds */state[/* playerIds */4],\n                  /* roundList */state[/* roundList */5],\n                  /* tieBreaks */state[/* tieBreaks */6].filter((function (tbId) {\n                          return idToDel !== tbId;\n                        }))\n                ];\n      case 2 : \n          return /* record */[\n                  /* byeQueue */state[/* byeQueue */0],\n                  /* date */state[/* date */1],\n                  /* id */state[/* id */2],\n                  /* name */state[/* name */3],\n                  /* playerIds */state[/* playerIds */4],\n                  /* roundList */state[/* roundList */5],\n                  /* tieBreaks */Utils$Coronate.move(action[0], action[1], state[/* tieBreaks */6])\n                ];\n      case 3 : \n          return /* record */[\n                  /* byeQueue */state[/* byeQueue */0],\n                  /* date */state[/* date */1],\n                  /* id */state[/* id */2],\n                  /* name */state[/* name */3],\n                  /* playerIds */action[0],\n                  /* roundList */state[/* roundList */5],\n                  /* tieBreaks */state[/* tieBreaks */6]\n                ];\n      case 4 : \n          return /* record */[\n                  /* byeQueue */action[0],\n                  /* date */state[/* date */1],\n                  /* id */state[/* id */2],\n                  /* name */state[/* name */3],\n                  /* playerIds */state[/* playerIds */4],\n                  /* roundList */state[/* roundList */5],\n                  /* tieBreaks */state[/* tieBreaks */6]\n                ];\n      case 5 : \n          return /* record */[\n                  /* byeQueue */state[/* byeQueue */0],\n                  /* date */state[/* date */1],\n                  /* id */state[/* id */2],\n                  /* name */action[0],\n                  /* playerIds */state[/* playerIds */4],\n                  /* roundList */state[/* roundList */5],\n                  /* tieBreaks */state[/* tieBreaks */6]\n                ];\n      case 6 : \n          var roundId = action[1];\n          var roundList = state[/* roundList */5].slice();\n          roundList[roundId] = roundList[roundId].concat(autoPair(action[2], action[0], action[3], action[4]));\n          return /* record */[\n                  /* byeQueue */state[/* byeQueue */0],\n                  /* date */state[/* date */1],\n                  /* id */state[/* id */2],\n                  /* name */state[/* name */3],\n                  /* playerIds */state[/* playerIds */4],\n                  /* roundList */roundList,\n                  /* tieBreaks */state[/* tieBreaks */6]\n                ];\n      case 7 : \n          var roundId$1 = action[2];\n          var match = action[1];\n          var roundList$1 = state[/* roundList */5].slice();\n          roundList$1[roundId$1] = roundList$1[roundId$1].concat(/* array */[manualPair(/* tuple */[\n                      match[0],\n                      match[1]\n                    ], action[0])]);\n          return /* record */[\n                  /* byeQueue */state[/* byeQueue */0],\n                  /* date */state[/* date */1],\n                  /* id */state[/* id */2],\n                  /* name */state[/* name */3],\n                  /* playerIds */state[/* playerIds */4],\n                  /* roundList */roundList$1,\n                  /* tieBreaks */state[/* tieBreaks */6]\n                ];\n      case 8 : \n          return /* record */[\n                  /* byeQueue */state[/* byeQueue */0],\n                  /* date */action[0],\n                  /* id */state[/* id */2],\n                  /* name */state[/* name */3],\n                  /* playerIds */state[/* playerIds */4],\n                  /* roundList */state[/* roundList */5],\n                  /* tieBreaks */state[/* tieBreaks */6]\n                ];\n      case 9 : \n          var roundId$2 = action[3];\n          var match$1 = action[2];\n          var match$2 = action[1];\n          var matchId = action[0];\n          var roundList$2 = state[/* roundList */5].slice();\n          roundList$2[roundId$2] = roundList$2[roundId$2].slice();\n          var matchIndex = roundList$2[roundId$2].findIndex((function (match_) {\n                  return match_[/* id */0] === matchId;\n                }));\n          var match_ = Caml_array.caml_array_get(Caml_array.caml_array_get(roundList$2, roundId$2), matchIndex);\n          Caml_array.caml_array_set(Caml_array.caml_array_get(roundList$2, roundId$2), matchIndex, /* record */[\n                /* id */match_[/* id */0],\n                /* whiteId */match_[/* whiteId */1],\n                /* blackId */match_[/* blackId */2],\n                /* whiteNewRating */match$2[0],\n                /* blackNewRating */match$2[1],\n                /* whiteOrigRating */match_[/* whiteOrigRating */5],\n                /* blackOrigRating */match_[/* blackOrigRating */6],\n                /* whiteScore */match$1[0],\n                /* blackScore */match$1[1]\n              ]);\n          return /* record */[\n                  /* byeQueue */state[/* byeQueue */0],\n                  /* date */state[/* date */1],\n                  /* id */state[/* id */2],\n                  /* name */state[/* name */3],\n                  /* playerIds */state[/* playerIds */4],\n                  /* roundList */roundList$2,\n                  /* tieBreaks */state[/* tieBreaks */6]\n                ];\n      case 10 : \n          var roundId$3 = action[1];\n          var matchId$1 = action[0];\n          var roundList$3 = state[/* roundList */5].slice();\n          Caml_array.caml_array_set(roundList$3, roundId$3, Caml_array.caml_array_get(roundList$3, roundId$3).filter((function (match_) {\n                      return match_[/* id */0] !== matchId$1;\n                    })));\n          return /* record */[\n                  /* byeQueue */state[/* byeQueue */0],\n                  /* date */state[/* date */1],\n                  /* id */state[/* id */2],\n                  /* name */state[/* name */3],\n                  /* playerIds */state[/* playerIds */4],\n                  /* roundList */roundList$3,\n                  /* tieBreaks */state[/* tieBreaks */6]\n                ];\n      case 11 : \n          var roundId$4 = action[1];\n          var matchId$2 = action[0];\n          var roundList$4 = state[/* roundList */5].slice();\n          roundList$4[roundId$4] = roundList$4[roundId$4].slice();\n          var matchIndex$1 = roundList$4[roundId$4].findIndex((function (match_) {\n                  return match_[/* id */0] === matchId$2;\n                }));\n          var oldMatch = roundList$4[roundId$4][matchIndex$1];\n          Caml_array.caml_array_set(Caml_array.caml_array_get(roundList$4, roundId$4), matchIndex$1, /* record */[\n                /* id */oldMatch[/* id */0],\n                /* whiteId */oldMatch[/* blackId */2],\n                /* blackId */oldMatch[/* whiteId */1],\n                /* whiteNewRating */oldMatch[/* blackNewRating */4],\n                /* blackNewRating */oldMatch[/* whiteNewRating */3],\n                /* whiteOrigRating */oldMatch[/* blackOrigRating */6],\n                /* blackOrigRating */oldMatch[/* whiteOrigRating */5],\n                /* whiteScore */oldMatch[/* blackScore */8],\n                /* blackScore */oldMatch[/* whiteScore */7]\n              ]);\n          return /* record */[\n                  /* byeQueue */state[/* byeQueue */0],\n                  /* date */state[/* date */1],\n                  /* id */state[/* id */2],\n                  /* name */state[/* name */3],\n                  /* playerIds */state[/* playerIds */4],\n                  /* roundList */roundList$4,\n                  /* tieBreaks */state[/* tieBreaks */6]\n                ];\n      case 12 : \n          var roundId$5 = action[2];\n          var roundList$5 = state[/* roundList */5].slice();\n          Caml_array.caml_array_set(roundList$5, roundId$5, Utils$Coronate.move(action[0], action[1], Caml_array.caml_array_get(roundList$5, roundId$5)));\n          return /* record */[\n                  /* byeQueue */state[/* byeQueue */0],\n                  /* date */state[/* date */1],\n                  /* id */state[/* id */2],\n                  /* name */state[/* name */3],\n                  /* playerIds */state[/* playerIds */4],\n                  /* roundList */roundList$5,\n                  /* tieBreaks */state[/* tieBreaks */6]\n                ];\n      case 13 : \n          var newValue = action[0];\n          var roundList$6 = state[/* roundList */5].map((function (round) {\n                  return round.map((function (match_) {\n                                return scoreByeMatch(newValue, match_);\n                              }));\n                }));\n          return /* record */[\n                  /* byeQueue */state[/* byeQueue */0],\n                  /* date */state[/* date */1],\n                  /* id */state[/* id */2],\n                  /* name */state[/* name */3],\n                  /* playerIds */state[/* playerIds */4],\n                  /* roundList */roundList$6,\n                  /* tieBreaks */state[/* tieBreaks */6]\n                ];\n      case 14 : \n          return action[0];\n      \n    }\n  }\n}\n\nfunction playersReducer(state, action) {\n  switch (action.tag | 0) {\n    case 0 : \n        var player = action[0];\n        return Belt_MapString.set(state, player[/* id */1], player);\n    case 1 : \n        return Belt_MapString.remove(state, action[0]);\n    case 2 : \n        var id = action[0];\n        var player$1 = Belt_MapString.getExn(state, id);\n        return Belt_MapString.set(state, id, /* record */[\n                    /* firstName */player$1[/* firstName */0],\n                    /* id */player$1[/* id */1],\n                    /* lastName */player$1[/* lastName */2],\n                    /* matchCount */action[1],\n                    /* rating */player$1[/* rating */4],\n                    /* type_ */player$1[/* type_ */5]\n                  ]);\n    case 3 : \n        var id$1 = action[0];\n        var player$2 = Belt_MapString.getExn(state, id$1);\n        return Belt_MapString.set(state, id$1, /* record */[\n                    /* firstName */player$2[/* firstName */0],\n                    /* id */player$2[/* id */1],\n                    /* lastName */player$2[/* lastName */2],\n                    /* matchCount */player$2[/* matchCount */3],\n                    /* rating */action[1],\n                    /* type_ */player$2[/* type_ */5]\n                  ]);\n    case 4 : \n        return action[0];\n    \n  }\n}\n\nexport {\n  scoreByeMatch ,\n  autoPair ,\n  manualPair ,\n  tournamentReducer ,\n  playersReducer ,\n  \n}\n/* Data-Coronate Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 6.0.3, PLEASE EDIT WITH CARE\n\nimport * as Block from \"bs-platform/lib/es6/block.js\";\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as React from \"react\";\nimport * as Data$Coronate from \"../Data.bs.js\";\nimport * as Belt_MapString from \"bs-platform/lib/es6/belt_MapString.js\";\nimport * as Hooks$Coronate from \"../Hooks.bs.js\";\nimport * as Utils$Coronate from \"../Utils.bs.js\";\nimport * as Window$Coronate from \"../Window.bs.js\";\nimport * as TournamentDataReducers$Coronate from \"./TournamentDataReducers.bs.js\";\n\nfunction getAllPlayerIdsFromMatches(matchList) {\n  return matchList.reduce((function (acc, match_) {\n                return acc.concat(/* array */[\n                            match_[/* whiteId */1],\n                            match_[/* blackId */2]\n                          ]);\n              }), /* array */[]);\n}\n\nfunction calcNumOfRounds(playerCount) {\n  var roundCount = Math.ceil(Math.log2(playerCount));\n  var match = Number.isFinite(roundCount);\n  if (match) {\n    return roundCount | 0;\n  } else {\n    return 0;\n  }\n}\n\nvar emptyTourney_000 = /* byeQueue : array */[];\n\nvar emptyTourney_001 = /* date */new Date(0.0);\n\nvar emptyTourney_002 = /* id */Utils$Coronate.nanoid(/* () */0);\n\nvar emptyTourney_004 = /* playerIds : array */[];\n\nvar emptyTourney_005 = /* roundList : array */[];\n\nvar emptyTourney_006 = /* tieBreaks : array */[1];\n\nvar emptyTourney = /* record */[\n  emptyTourney_000,\n  emptyTourney_001,\n  emptyTourney_002,\n  /* name */\"\",\n  emptyTourney_004,\n  emptyTourney_005,\n  emptyTourney_006\n];\n\nfunction TournamentData(Props) {\n  var children = Props.children;\n  var tourneyId = Props.tourneyId;\n  var match = React.useReducer(TournamentDataReducers$Coronate.tournamentReducer, emptyTourney);\n  var tourneyDispatch = match[1];\n  var tourney = match[0];\n  var name = tourney[/* name */3];\n  var playerIds = tourney[/* playerIds */4];\n  var roundList = tourney[/* roundList */5];\n  var match$1 = React.useReducer(TournamentDataReducers$Coronate.playersReducer, Belt_MapString.empty);\n  var playersDispatch = match$1[1];\n  var players = match$1[0];\n  var match$2 = React.useState((function () {\n          return false;\n        }));\n  var setIsTourneyLoaded = match$2[1];\n  var isTourneyLoaded = match$2[0];\n  var match$3 = React.useState((function () {\n          return false;\n        }));\n  var setIsPlayersLoaded = match$3[1];\n  var isPlayersLoaded = match$3[0];\n  var match$4 = React.useState((function () {\n          return false;\n        }));\n  var setIsDbError = match$4[1];\n  Hooks$Coronate.useLoadingCursor(isPlayersLoaded && isTourneyLoaded);\n  var match$5 = Window$Coronate.useWindowContext(/* () */0);\n  var windowDispatch = match$5[1];\n  React.useEffect((function () {\n          Curry._1(windowDispatch, /* SetTitle */Block.__(5, [name]));\n          return (function (param) {\n                    return Curry._1(windowDispatch, /* SetTitle */Block.__(5, [\"\"]));\n                  });\n        }), /* tuple */[\n        name,\n        windowDispatch\n      ]);\n  React.useEffect((function (param) {\n          var didCancel = /* record */[/* contents */false];\n          Hooks$Coronate.Db[/* tourneyStore */6].getItem(tourneyId).then((function (value) {\n                  if (!didCancel[0]) {\n                    if (value == null) {\n                      Curry._1(setIsDbError, (function (param) {\n                              return true;\n                            }));\n                    } else {\n                      Curry._1(tourneyDispatch, /* SetTournament */Block.__(14, [Data$Coronate.Tournament[/* tFromJsDeep */3](value)]));\n                      Curry._1(setIsTourneyLoaded, (function (param) {\n                              return true;\n                            }));\n                    }\n                  }\n                  return Promise.resolve(/* () */0);\n                }));\n          return (function (param) {\n                    didCancel[0] = true;\n                    return /* () */0;\n                  });\n        }), /* tuple */[\n        tourneyId,\n        tourneyDispatch,\n        setIsTourneyLoaded,\n        setIsDbError\n      ]);\n  React.useEffect((function (param) {\n          var didCancel = /* record */[/* contents */false];\n          if (isTourneyLoaded) {\n            var allTheIds = getAllPlayerIdsFromMatches(Data$Coronate.rounds2Matches(roundList, undefined, /* () */0)).concat(playerIds);\n            var match = allTheIds.length;\n            if (match !== 0) {\n              Hooks$Coronate.Db[/* playerStore */4].getItems(allTheIds).then((function (values) {\n                      var newIds = Object.keys(values);\n                      var oldIds = Belt_MapString.keysToArray(players);\n                      var changedPlayers = newIds.filter((function (x) {\n                                return !oldIds.includes(x);\n                              })).concat(oldIds.filter((function (x) {\n                                  return !newIds.includes(x);\n                                })));\n                      console.log(\"changed players:\");\n                      console.log(changedPlayers.length);\n                      if (changedPlayers.length !== 0 && !didCancel[0]) {\n                        Curry._1(playersDispatch, /* SetPlayers */Block.__(4, [Hooks$Coronate.Db[/* jsDictToReMap */7](values, Data$Coronate.Player[/* tFromJs */1])]));\n                        Curry._1(setIsPlayersLoaded, (function (param) {\n                                return true;\n                              }));\n                      }\n                      return Promise.resolve(values);\n                    }));\n            } else {\n              if (Belt_MapString.keysToArray(players).length !== 0) {\n                Curry._1(playersDispatch, /* SetPlayers */Block.__(4, [players]));\n              }\n              Curry._1(setIsPlayersLoaded, (function (param) {\n                      return true;\n                    }));\n            }\n          }\n          return (function (param) {\n                    didCancel[0] = false;\n                    return /* () */0;\n                  });\n        }), /* tuple */[\n        roundList,\n        players,\n        playerIds,\n        isTourneyLoaded\n      ]);\n  React.useEffect((function (param) {\n          if (isTourneyLoaded && tourneyId === tourney[/* id */2]) {\n            Hooks$Coronate.Db[/* tourneyStore */6].getItem(tourneyId, Data$Coronate.Tournament[/* tToJsDeep */2](tourney));\n          }\n          return undefined;\n        }), /* tuple */[\n        isTourneyLoaded,\n        tourneyId,\n        tourney\n      ]);\n  React.useEffect((function () {\n          if (isPlayersLoaded) {\n            Hooks$Coronate.Db[/* playerStore */4].setItems(Hooks$Coronate.Db[/* reMapToJsDict */8](players, Data$Coronate.Player[/* tToJs */0]));\n          }\n          return undefined;\n        }), /* tuple */[\n        isPlayersLoaded,\n        players\n      ]);\n  var partial_arg = Data$Coronate.Player[/* getPlayerMaybeMap */6];\n  var getPlayer = function (param) {\n    return partial_arg(players, param);\n  };\n  var activePlayers = Belt_MapString.reduce(players, Belt_MapString.empty, (function (acc, key, player) {\n          if (tourney[/* playerIds */4].includes(key)) {\n            return Belt_MapString.set(acc, key, player);\n          } else {\n            return acc;\n          }\n        }));\n  var roundCount = calcNumOfRounds(Belt_MapString.keysToArray(activePlayers).length);\n  var isItOver = roundList.length >= roundCount;\n  var match$6 = roundList.length === 0;\n  var isNewRoundReady = match$6 ? true : Data$Coronate.isRoundComplete(roundList, activePlayers, roundList.length - 1 | 0);\n  if (match$4[0]) {\n    return React.createElement(\"div\", undefined, \"Error: tournament not found.\");\n  } else if (!isTourneyLoaded || !isPlayersLoaded) {\n    return React.createElement(\"div\", undefined, \"Loading...\");\n  } else {\n    return Curry._1(children, /* record */[\n                /* activePlayers */activePlayers,\n                /* getPlayer */getPlayer,\n                /* isItOver */isItOver,\n                /* isNewRoundReady */isNewRoundReady,\n                /* players */players,\n                /* playersDispatch */playersDispatch,\n                /* roundCount */roundCount,\n                /* tourney */tourney,\n                /* tourneyDispatch */tourneyDispatch\n              ]);\n  }\n}\n\nvar LocalForage = 0;\n\nvar make = TournamentData;\n\nexport {\n  LocalForage ,\n  getAllPlayerIdsFromMatches ,\n  calcNumOfRounds ,\n  emptyTourney ,\n  make ,\n  \n}\n/* emptyTourney Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 6.0.3, PLEASE EDIT WITH CARE\n\nimport * as Block from \"bs-platform/lib/es6/block.js\";\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as React from \"react\";\nimport * as Belt_Option from \"bs-platform/lib/es6/belt_Option.js\";\nimport * as Caml_option from \"bs-platform/lib/es6/caml_option.js\";\nimport * as ReactFeather from \"react-feather\";\nimport * as Utils$Coronate from \"../Utils.bs.js\";\nimport * as VisuallyHidden from \"@reach/visually-hidden\";\n\nfunction makeDateInput(date) {\n  var year = date.getFullYear().toString();\n  var rawMonth = date.getMonth();\n  var rawDate = date.getDate();\n  var match = rawMonth < 9.0;\n  var month = match ? \"0\" + (rawMonth + 1.0).toString() : (rawMonth + 1.0).toString();\n  var match$1 = rawDate < 10.0;\n  var day = match$1 ? \"0\" + rawDate.toString() : rawDate.toString();\n  return /* array */[\n            year,\n            month,\n            day\n          ].join(\"-\");\n}\n\nfunction PageTourneySetup(Props) {\n  var tournament = Props.tournament;\n  var tourney = tournament[/* tourney */7];\n  var tourneyDispatch = tournament[/* tourneyDispatch */8];\n  var match = React.useState((function () {\n          return /* NotEditing */2;\n        }));\n  var setEditing = match[1];\n  var editing = match[0];\n  var nameInput = React.useRef(null);\n  var dateInput = React.useRef(null);\n  var focusRef = function (myref) {\n    Belt_Option.map(Caml_option.nullable_to_opt(myref.current), (function (x) {\n            x.focus();\n            return /* () */0;\n          }));\n    return /* () */0;\n  };\n  React.useEffect((function () {\n          switch (editing) {\n            case 0 : \n                focusRef(nameInput);\n                break;\n            case 1 : \n                focusRef(dateInput);\n                break;\n            case 2 : \n                break;\n            \n          }\n          return undefined;\n        }), /* array */[editing]);\n  var changeToOne = function (param) {\n    Curry._1(tourneyDispatch, /* UpdateByeScores */Block.__(13, [1.0]));\n    return Utils$Coronate.alert(\"Bye scores updated to 1.\");\n  };\n  var changeToOneHalf = function (param) {\n    Curry._1(tourneyDispatch, /* UpdateByeScores */Block.__(13, [0.5]));\n    return Utils$Coronate.alert(\"Bye scores updated to .\");\n  };\n  var updateDate = function ($$event) {\n    var match = $$event.currentTarget.value.split(\"-\");\n    var match$1;\n    if (match.length !== 3) {\n      match$1 = /* tuple */[\n        \"2000\",\n        \"01\",\n        \"01\"\n      ];\n    } else {\n      var year = match[0];\n      var month = match[1];\n      var day = match[2];\n      match$1 = /* tuple */[\n        year,\n        month,\n        day\n      ];\n    }\n    var year$1 = Number(match$1[0]);\n    var month$1 = Number(match$1[1]) - 1.0;\n    var date = Number(match$1[2]);\n    return Curry._1(tourneyDispatch, /* SetDate */Block.__(8, [new Date(year$1, month$1, date)]));\n  };\n  return React.createElement(\"div\", {\n              className: \"content-area\"\n            }, editing !== 0 ? React.createElement(\"h1\", {\n                    style: {\n                      textAlign: \"left\"\n                    }\n                  }, React.createElement(\"span\", {\n                        className: \"inputPlaceholder\"\n                      }, tourney[/* name */3]), \" \", React.createElement(\"button\", {\n                        className: \"button-ghost\",\n                        onClick: (function (param) {\n                            return Curry._1(setEditing, (function (param) {\n                                          return /* Name */0;\n                                        }));\n                          })\n                      }, React.createElement(ReactFeather.Edit, { }), React.createElement(VisuallyHidden.default, {\n                            children: \"Edit name\"\n                          }))) : React.createElement(\"form\", {\n                    className: \"display-20\",\n                    style: {\n                      textAlign: \"left\"\n                    },\n                    onSubmit: (function (param) {\n                        return Curry._1(setEditing, (function (param) {\n                                      return /* NotEditing */2;\n                                    }));\n                      })\n                  }, React.createElement(\"input\", {\n                        ref: nameInput,\n                        className: \"display-20\",\n                        style: {\n                          textAlign: \"left\"\n                        },\n                        type: \"text\",\n                        value: tourney[/* name */3],\n                        onChange: (function ($$event) {\n                            return Curry._1(tourneyDispatch, /* SetName */Block.__(5, [$$event.currentTarget.value]));\n                          })\n                      }), \" \", React.createElement(\"button\", {\n                        className: \"button-ghost\",\n                        onClick: (function (param) {\n                            return Curry._1(setEditing, (function (param) {\n                                          return /* NotEditing */2;\n                                        }));\n                          })\n                      }, React.createElement(ReactFeather.Check, { }))), editing !== 1 ? React.createElement(\"p\", {\n                    className: \"caption-30\"\n                  }, React.createElement(Utils$Coronate.DateFormat[/* make */0], {\n                        date: tourney[/* date */1]\n                      }), \" \", React.createElement(\"button\", {\n                        className: \"button-ghost\",\n                        onClick: (function (param) {\n                            return Curry._1(setEditing, (function (param) {\n                                          return /* Date */1;\n                                        }));\n                          })\n                      }, React.createElement(ReactFeather.Edit, { }), React.createElement(VisuallyHidden.default, {\n                            children: \"Edit date\"\n                          }))) : React.createElement(\"form\", {\n                    className: \"caption-30\",\n                    onSubmit: (function (param) {\n                        return Curry._1(setEditing, (function (param) {\n                                      return /* NotEditing */2;\n                                    }));\n                      })\n                  }, React.createElement(\"input\", {\n                        ref: dateInput,\n                        className: \"caption-30\",\n                        type: \"date\",\n                        value: makeDateInput(tourney[/* date */1]),\n                        onChange: updateDate\n                      }), \" \", React.createElement(\"button\", {\n                        className: \"button-ghost\",\n                        onClick: (function (param) {\n                            return Curry._1(setEditing, (function (param) {\n                                          return /* NotEditing */2;\n                                        }));\n                          })\n                      }, React.createElement(ReactFeather.Check, { }))), React.createElement(\"h2\", undefined, \"Change bye scores\"), React.createElement(\"button\", {\n                  \"aria-describedby\": \"score-desc\",\n                  onClick: changeToOne\n                }, \"Change byes to 1\"), \" \", React.createElement(\"button\", {\n                  \"aria-describedby\": \"score-desc\",\n                  onClick: changeToOneHalf\n                }, \"Change byes to \"), React.createElement(\"p\", {\n                  className: \"caption-30\",\n                  id: \"score-desc\"\n                }, \"This will update all bye matches which have been previously\\n                scored in this tournament. To change the default bye value in\\n                future matches, go to the \", React.createElement(\"a\", {\n                      href: \"#/options\"\n                    }, \"app options\"), \".\"));\n}\n\nvar make = PageTourneySetup;\n\nexport {\n  makeDateInput ,\n  make ,\n  \n}\n/* react Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 6.0.3, PLEASE EDIT WITH CARE\n\nimport * as Cn from \"re-classnames/src/Cn.bs.js\";\nimport * as Block from \"bs-platform/lib/es6/block.js\";\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as React from \"react\";\nimport * as Numeral from \"numeral\";\nimport * as Caml_array from \"bs-platform/lib/es6/caml_array.js\";\nimport * as Tabs from \"@reach/tabs\";\nimport * as Data$Coronate from \"../Data.bs.js\";\nimport * as ReactFeather from \"react-feather\";\nimport * as Utils$Coronate from \"../Utils.bs.js\";\nimport * as Scoring$Coronate from \"../Scoring.bs.js\";\nimport * as Converters$Coronate from \"../Converters.bs.js\";\nimport * as VisuallyHidden from \"@reach/visually-hidden\";\n\nfunction PageTourneyScores$ScoreTable(Props) {\n  var match = Props.isCompact;\n  var isCompact = match !== undefined ? match : false;\n  var tourney = Props.tourney;\n  var getPlayer = Props.getPlayer;\n  var title = Props.title;\n  var tieBreaks = tourney[/* tieBreaks */6];\n  var roundList = tourney[/* roundList */5];\n  var tieBreakNames = Scoring$Coronate.getTieBreakNames(tieBreaks);\n  var standingTree = Scoring$Coronate.createStandingTree(Scoring$Coronate.createStandingList(tieBreaks, Converters$Coronate.matches2ScoreData(Data$Coronate.rounds2Matches(roundList, undefined, /* () */0))).filter((function (standing) {\n              return standing[/* id */0] !== Data$Coronate.dummy_id;\n            })));\n  return React.createElement(\"table\", {\n              className: Cn.make(/* :: */[\n                    \"scores__table\",\n                    /* :: */[\n                      Cn.ifTrue(\"scores__compact\", isCompact),\n                      /* [] */0\n                    ]\n                  ])\n            }, React.createElement(\"caption\", {\n                  className: Cn.make(/* :: */[\n                        Cn.ifTrue(\"title-30\", isCompact),\n                        /* :: */[\n                          Cn.ifTrue(\"title-40\", !isCompact),\n                          /* [] */0\n                        ]\n                      ])\n                }, title), React.createElement(\"thead\", undefined, React.createElement(\"tr\", {\n                      className: \"scores__topHeader\"\n                    }, React.createElement(\"th\", {\n                          className: \"title-10\",\n                          scope: \"col\"\n                        }, \"Rank\"), React.createElement(\"th\", {\n                          className: \"title-10\",\n                          scope: \"col\"\n                        }, \"Name\"), React.createElement(\"th\", {\n                          className: \"title-10\",\n                          scope: \"col\"\n                        }, \"Score\"), isCompact ? null : tieBreakNames.map((function (name, i) {\n                              return React.createElement(\"th\", {\n                                          key: String(i),\n                                          className: \"title-10\",\n                                          scope: \"col\"\n                                        }, name);\n                            })))), React.createElement(\"tbody\", undefined, standingTree.map((function (standingsFlat, rank) {\n                        return standingsFlat.map((function (standing, i) {\n                                      var match = i === 0;\n                                      return React.createElement(\"tr\", {\n                                                  key: standing[/* id */0],\n                                                  className: \"scores__row\"\n                                                }, match ? React.createElement(\"th\", {\n                                                        className: \"table__number scores__rank\",\n                                                        rowSpan: standingsFlat.length,\n                                                        scope: \"row\"\n                                                      }, String(rank + 1 | 0)) : null, isCompact ? React.createElement(\"td\", {\n                                                        className: \"scores__playerName\"\n                                                      }, Curry._1(getPlayer, standing[/* id */0])[/* firstName */0], Utils$Coronate.Entities[/* nbsp */0], Curry._1(getPlayer, standing[/* id */0])[/* lastName */2]) : React.createElement(\"th\", {\n                                                        className: \"scores__playerName\",\n                                                        scope: \"row\"\n                                                      }, Curry._1(getPlayer, standing[/* id */0])[/* firstName */0], Utils$Coronate.Entities[/* nbsp */0], Curry._1(getPlayer, standing[/* id */0])[/* lastName */2]), React.createElement(\"td\", {\n                                                      className: \"table__number\"\n                                                    }, Numeral.default(standing[/* score */1]).format(\"1/2\")), isCompact ? null : standing[/* tieBreaks */2].map((function (score, j) {\n                                                          return React.createElement(\"td\", {\n                                                                      key: String(j),\n                                                                      className: \"table__number\"\n                                                                    }, Numeral.default(score).format(\"1/2\"));\n                                                        })));\n                                    }));\n                      }))));\n}\n\nvar ScoreTable = /* module */[/* make */PageTourneyScores$ScoreTable];\n\nfunction PageTourneyScores$SelectTieBreaks(Props) {\n  var tourney = Props.tourney;\n  var tourneyDispatch = Props.tourneyDispatch;\n  var tieBreaks = tourney[/* tieBreaks */6];\n  var match = React.useState((function () {\n          return undefined;\n        }));\n  var setSelectedTb = match[1];\n  var selectedTb = match[0];\n  var defaultId = function (x) {\n    if (x !== undefined) {\n      return x;\n    } else if (selectedTb !== undefined) {\n      return selectedTb;\n    } else {\n      return 1;\n    }\n  };\n  var toggleTb = function (id) {\n    if (tieBreaks.includes(defaultId(id))) {\n      Curry._1(tourneyDispatch, /* DelTieBreak */Block.__(1, [defaultId(id)]));\n      return Curry._1(setSelectedTb, (function (param) {\n                    return undefined;\n                  }));\n    } else {\n      return Curry._1(tourneyDispatch, /* AddTieBreak */Block.__(0, [defaultId(id)]));\n    }\n  };\n  var moveTb = function (direction) {\n    if (selectedTb !== undefined) {\n      var index = tieBreaks.indexOf(selectedTb);\n      return Curry._1(tourneyDispatch, /* MoveTieBreak */Block.__(2, [\n                    index,\n                    index + direction | 0\n                  ]));\n    } else {\n      return /* () */0;\n    }\n  };\n  return React.createElement(Utils$Coronate.PanelContainer[/* make */0], {\n              children: null,\n              className: \"content-area\"\n            }, React.createElement(Utils$Coronate.Panel[/* make */0], {\n                  children: null\n                }, React.createElement(\"div\", {\n                      className: \"toolbar\"\n                    }, React.createElement(\"button\", {\n                          className: \"button-micro\",\n                          disabled: selectedTb === undefined,\n                          onClick: (function (param) {\n                              return toggleTb(undefined);\n                            })\n                        }, \"Toggle\"), React.createElement(\"button\", {\n                          className: \"button-micro\",\n                          disabled: selectedTb === undefined,\n                          onClick: (function (param) {\n                              return moveTb(-1);\n                            })\n                        }, React.createElement(ReactFeather.ArrowUp, { }), \" Move up\"), React.createElement(\"button\", {\n                          className: \"button-micro\",\n                          disabled: selectedTb === undefined,\n                          onClick: (function (param) {\n                              return moveTb(1);\n                            })\n                        }, React.createElement(ReactFeather.ArrowDown, { }), \" Move down\"), React.createElement(\"button\", {\n                          className: Cn.make(/* :: */[\n                                \"button-micro\",\n                                /* :: */[\n                                  Cn.ifSome(\"button-primary\", selectedTb),\n                                  /* [] */0\n                                ]\n                              ]),\n                          disabled: selectedTb === undefined,\n                          onClick: (function (param) {\n                              return Curry._1(setSelectedTb, (function (param) {\n                                            return undefined;\n                                          }));\n                            })\n                        }, \"Done\")), React.createElement(\"table\", undefined, React.createElement(\"caption\", {\n                          className: \"title-30\"\n                        }, \"Selected tiebreak methods\"), React.createElement(\"thead\", undefined, React.createElement(\"tr\", undefined, React.createElement(\"th\", undefined, \"Name\"), React.createElement(\"th\", undefined, React.createElement(VisuallyHidden.default, {\n                                      children: \"Controls\"\n                                    })))), React.createElement(\"tbody\", {\n                          className: \"content\"\n                        }, tieBreaks.map((function (id) {\n                                var tmp;\n                                if (selectedTb !== undefined) {\n                                  var match = selectedTb === id;\n                                  tmp = match ? \"Done\" : \"Edit\";\n                                } else {\n                                  tmp = \"Edit\";\n                                }\n                                return React.createElement(\"tr\", {\n                                            key: String(id),\n                                            className: Cn.make(/* :: */[\n                                                  Cn.ifTrue(\"selected\", selectedTb === id),\n                                                  /* [] */0\n                                                ])\n                                          }, React.createElement(\"td\", undefined, Caml_array.caml_array_get(Scoring$Coronate.tieBreakMethods, id)[/* name */2]), React.createElement(\"td\", {\n                                                style: {\n                                                  width: \"48px\"\n                                                }\n                                              }, React.createElement(\"button\", {\n                                                    className: \"button-micro\",\n                                                    disabled: selectedTb !== undefined && selectedTb !== id,\n                                                    onClick: (function (param) {\n                                                        if (selectedTb !== undefined) {\n                                                          var match = selectedTb === id;\n                                                          if (match) {\n                                                            return Curry._1(setSelectedTb, (function (param) {\n                                                                          return undefined;\n                                                                        }));\n                                                          } else {\n                                                            return Curry._1(setSelectedTb, (function (param) {\n                                                                          return id;\n                                                                        }));\n                                                          }\n                                                        } else {\n                                                          return Curry._1(setSelectedTb, (function (param) {\n                                                                        return id;\n                                                                      }));\n                                                        }\n                                                      })\n                                                  }, tmp)));\n                              }))))), React.createElement(Utils$Coronate.Panel[/* make */0], {\n                  children: null\n                }, React.createElement(\"div\", {\n                      className: \"toolbar\"\n                    }, Utils$Coronate.Entities[/* nbsp */0]), React.createElement(\"table\", {\n                      style: {\n                        marginTop: \"16px\"\n                      }\n                    }, React.createElement(\"caption\", {\n                          className: \"title-30\"\n                        }, \"Available tiebreak methods\"), React.createElement(\"thead\", undefined, React.createElement(\"tr\", undefined, React.createElement(\"th\", undefined, \"Name\"), React.createElement(\"th\", undefined, React.createElement(VisuallyHidden.default, {\n                                      children: \"Controls\"\n                                    })))), React.createElement(\"tbody\", {\n                          className: \"content\"\n                        }, Scoring$Coronate.tieBreakMethods.map((function (m) {\n                                var match = tieBreaks.includes(m[/* id */1]);\n                                var match$1 = tieBreaks.includes(m[/* id */1]);\n                                return React.createElement(\"tr\", {\n                                            key: String(m[/* id */1])\n                                          }, React.createElement(\"td\", undefined, React.createElement(\"span\", {\n                                                    className: match ? \"disabled\" : \"enabled\"\n                                                  }, m[/* name */2])), React.createElement(\"td\", undefined, match$1 ? null : React.createElement(\"button\", {\n                                                      className: \"button-micro\",\n                                                      onClick: (function (param) {\n                                                          return toggleTb(m[/* id */1]);\n                                                        })\n                                                    }, \"Add\")));\n                              }))))));\n}\n\nvar SelectTieBreaks = /* module */[/* make */PageTourneyScores$SelectTieBreaks];\n\nfunction PageTourneyScores(Props) {\n  var tournament = Props.tournament;\n  var getPlayer = tournament[/* getPlayer */1];\n  var tourney = tournament[/* tourney */7];\n  var tourneyDispatch = tournament[/* tourneyDispatch */8];\n  return React.createElement(Tabs.Tabs, {\n              children: null\n            }, React.createElement(Tabs.TabList, {\n                  children: null\n                }, React.createElement(Tabs.Tab, {\n                      children: null\n                    }, React.createElement(ReactFeather.List, { }), \" Scores\"), React.createElement(Tabs.Tab, {\n                      children: null\n                    }, React.createElement(ReactFeather.Settings, { }), \" Edit tiebreak rules\")), React.createElement(Tabs.TabPanels, {\n                  children: null\n                }, React.createElement(Tabs.TabPanel, {\n                      children: React.createElement(PageTourneyScores$ScoreTable, {\n                            tourney: tourney,\n                            getPlayer: getPlayer,\n                            title: \"Score detail\"\n                          })\n                    }), React.createElement(Tabs.TabPanel, {\n                      children: React.createElement(PageTourneyScores$SelectTieBreaks, {\n                            tourney: tourney,\n                            tourneyDispatch: tourneyDispatch\n                          })\n                    })));\n}\n\nvar make = PageTourneyScores;\n\nexport {\n  ScoreTable ,\n  SelectTieBreaks ,\n  make ,\n  \n}\n/* react Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 6.0.3, PLEASE EDIT WITH CARE\n\nimport * as React from \"react\";\nimport * as Utils$Coronate from \"../Utils.bs.js\";\nimport * as PageRound$Coronate from \"./PageRound.bs.js\";\nimport * as PageTourneyScores$Coronate from \"./PageTourneyScores.bs.js\";\n\nfunction PageTournamentStatus(Props) {\n  var tournament = Props.tournament;\n  var tourney = tournament[/* tourney */7];\n  var getPlayer = tournament[/* getPlayer */1];\n  var lastRound;\n  if (tourney[/* roundList */5].length === 0) {\n    lastRound = React.createElement(\"p\", undefined, \"No rounds played yet.\");\n  } else {\n    var lastRoundId = tourney[/* roundList */5].length - 1 | 0;\n    lastRound = tourney[/* roundList */5][lastRoundId].length === 0 ? React.createElement(\"p\", undefined, \"Matched players in the current round will be shown here.\") : React.createElement(PageRound$Coronate.RoundTable[/* make */0], {\n            isCompact: true,\n            roundId: lastRoundId,\n            tournament: tournament\n          });\n  }\n  return React.createElement(React.Fragment, undefined, React.createElement(\"h2\", {\n                  style: {\n                    textAlign: \"center\"\n                  }\n                }, \"Tournament status\"), React.createElement(Utils$Coronate.PanelContainer[/* make */0], {\n                  children: null,\n                  style: {\n                    justifyContent: \"center\"\n                  }\n                }, React.createElement(Utils$Coronate.Panel[/* make */0], {\n                      children: lastRound\n                    }), React.createElement(Utils$Coronate.Panel[/* make */0], {\n                      children: React.createElement(PageTourneyScores$Coronate.ScoreTable[/* make */0], {\n                            isCompact: true,\n                            tourney: tourney,\n                            getPlayer: getPlayer,\n                            title: \"Rankings\"\n                          })\n                    })));\n}\n\nvar make = PageTournamentStatus;\n\nexport {\n  make ,\n  \n}\n/* react Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 6.0.3, PLEASE EDIT WITH CARE\n\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as React from \"react\";\nimport * as Js_dict from \"bs-platform/lib/es6/js_dict.js\";\nimport * as Numeral from \"numeral\";\nimport * as Caml_array from \"bs-platform/lib/es6/caml_array.js\";\nimport * as Data$Coronate from \"../Data.bs.js\";\nimport * as ReactFeather from \"react-feather\";\nimport * as Utils$Coronate from \"../Utils.bs.js\";\nimport * as Scoring$Coronate from \"../Scoring.bs.js\";\nimport * as Converters$Coronate from \"../Converters.bs.js\";\n\nfunction PageTourneyCrossTable(Props) {\n  var tournament = Props.tournament;\n  var tourney = tournament[/* tourney */7];\n  var getPlayer = tournament[/* getPlayer */1];\n  var tieBreaks = tourney[/* tieBreaks */6];\n  var roundList = tourney[/* roundList */5];\n  var scoreData = Converters$Coronate.matches2ScoreData(Data$Coronate.rounds2Matches(roundList, undefined, /* () */0));\n  var standings = Scoring$Coronate.createStandingList(tieBreaks, scoreData);\n  var getXScore = function (player1Id, player2Id) {\n    if (player1Id === player2Id) {\n      return React.createElement(ReactFeather.X, {\n                  className: \"disabled\"\n                });\n    } else {\n      var match = Js_dict.get(scoreData, player1Id);\n      if (match !== undefined) {\n        var match$1 = Js_dict.get(match[/* opponentResults */4], player2Id);\n        if (match$1 !== undefined) {\n          return Numeral.default(match$1).format(\"1/2\");\n        } else {\n          return null;\n        }\n      } else {\n        return null;\n      }\n    }\n  };\n  var getRatingChangeTds = function (playerId) {\n    var firstRating = Caml_array.caml_array_get(scoreData[playerId][/* ratings */5], 0);\n    var lastRating = Utils$Coronate.last(scoreData[playerId][/* ratings */5]);\n    var change = Numeral.default(lastRating - firstRating).format(\"+0\");\n    return React.createElement(React.Fragment, undefined, React.createElement(\"td\", {\n                    className: \"table__number\"\n                  }, lastRating.toString()), React.createElement(\"td\", {\n                    className: \"table__number body-10\"\n                  }, change));\n  };\n  return React.createElement(\"table\", {\n              className: \"scores__table\"\n            }, React.createElement(\"caption\", undefined, \"Crosstable\"), React.createElement(\"thead\", undefined, React.createElement(\"tr\", undefined, React.createElement(\"th\", undefined, \"#\"), React.createElement(\"th\", undefined, \"Name\"), standings.map((function (param, rank) {\n                            return React.createElement(\"th\", {\n                                        key: String(rank)\n                                      }, String(rank + 1 | 0));\n                          })), React.createElement(\"th\", undefined, \"Score\"), React.createElement(\"th\", {\n                          colSpan: 2\n                        }, \"Rating\"))), React.createElement(\"tbody\", undefined, standings.map((function (standing, index) {\n                        return React.createElement(\"tr\", {\n                                    key: String(index),\n                                    className: \"scores__row\"\n                                  }, React.createElement(\"th\", {\n                                        className: \"scores__rank\",\n                                        scope: \"col\"\n                                      }, String(index + 1 | 0)), React.createElement(\"th\", {\n                                        className: \"scores__playerName\",\n                                        scope: \"row\"\n                                      }, Curry._1(getPlayer, standing[/* id */0])[/* firstName */0], Utils$Coronate.Entities[/* nbsp */0], Curry._1(getPlayer, standing[/* id */0])[/* lastName */2]), standings.map((function (opponent, index2) {\n                                          return React.createElement(\"td\", {\n                                                      key: String(index2),\n                                                      className: \"table__number\"\n                                                    }, getXScore(standing[/* id */0], opponent[/* id */0]));\n                                        })), React.createElement(\"td\", {\n                                        className: \"table__number\"\n                                      }, Numeral.default(standing[/* score */1]).format(\"1/2\")), getRatingChangeTds(standing[/* id */0]));\n                      }))));\n}\n\nvar make = PageTourneyCrossTable;\n\nexport {\n  make ,\n  \n}\n/* react Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 6.0.3, PLEASE EDIT WITH CARE\n\nimport * as Cn from \"re-classnames/src/Cn.bs.js\";\nimport * as Block from \"bs-platform/lib/es6/block.js\";\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as React from \"react\";\nimport * as Caml_format from \"bs-platform/lib/es6/caml_format.js\";\nimport * as Data$Coronate from \"../Data.bs.js\";\nimport * as ReactFeather from \"react-feather\";\nimport * as Pages$Coronate from \"../Pages.bs.js\";\nimport * as Utils$Coronate from \"../Utils.bs.js\";\nimport * as Window$Coronate from \"../Window.bs.js\";\nimport * as ReasonReactRouter from \"reason-react/src/ReasonReactRouter.js\";\nimport * as PageRound$Coronate from \"./PageRound.bs.js\";\nimport * as TournamentData$Coronate from \"./TournamentData.bs.js\";\nimport * as PageTourneySetup$Coronate from \"./PageTourneySetup.bs.js\";\nimport * as PageTourneyScores$Coronate from \"./PageTourneyScores.bs.js\";\nimport * as PageTourneyPlayers$Coronate from \"./PageTourneyPlayers.bs.js\";\nimport * as PageTournamentStatus$Coronate from \"./PageTournamentStatus.bs.js\";\nimport * as PageTourneyCrossTable$Coronate from \"./PageTourneyCrossTable.bs.js\";\n\nfunction PageTourney$Footer(Props) {\n  var tournament = Props.tournament;\n  var roundList = tournament[/* tourney */7][/* roundList */5];\n  var match = tournament[/* isNewRoundReady */3] ? (\n      tournament[/* isItOver */2] ? /* tuple */[\n          Utils$Coronate.Entities[/* nbsp */0] + \" All rounds have completed.\",\n          /* Warning */1\n        ] : /* tuple */[\n          Utils$Coronate.Entities[/* nbsp */0] + \" Ready to begin a new round.\",\n          /* Success */0\n        ]\n    ) : /* tuple */[\n      Utils$Coronate.Entities[/* nbsp */0] + \"Round in progress.\",\n      /* Generic */3\n    ];\n  var tooltipText = match[0];\n  return React.createElement(React.Fragment, undefined, React.createElement(\"label\", {\n                  className: \"win__footer-block\",\n                  style: {\n                    display: \"inline-block\"\n                  }\n                }, \"Rounds: \", String(roundList.length), React.createElement(\"small\", undefined, \" out of \"), String(tournament[/* roundCount */6])), React.createElement(\"hr\", {\n                  className: \"win__footer-divider\"\n                }), React.createElement(Utils$Coronate.$$Notification[/* make */0], {\n                  children: tooltipText,\n                  kind: match[1],\n                  tooltip: tooltipText,\n                  className: \"win__footer-block\",\n                  style: {\n                    backgroundColor: \"transparent\",\n                    color: \"initial\",\n                    display: \"inline-flex\",\n                    margin: \"0\",\n                    minHeight: \"initial\"\n                  }\n                }));\n}\n\nvar Footer = /* module */[/* make */PageTourney$Footer];\n\nfunction footerFunc(tournament, param) {\n  return React.createElement(PageTourney$Footer, {\n              tournament: tournament\n            });\n}\n\nfunction noDraggy(e) {\n  e.preventDefault();\n  return /* () */0;\n}\n\nfunction PageTourney$Sidebar(Props) {\n  var tournament = Props.tournament;\n  var tourneyDispatch = tournament[/* tourneyDispatch */8];\n  var tourney = tournament[/* tourney */7];\n  var playersDispatch = tournament[/* playersDispatch */5];\n  var isItOver = tournament[/* isItOver */2];\n  var getPlayer = tournament[/* getPlayer */1];\n  var activePlayers = tournament[/* activePlayers */0];\n  var roundList = tourney[/* roundList */5];\n  var basePath = \"#/tourneys/\" + tourney[/* id */2];\n  var newRound = function ($$event) {\n    $$event.preventDefault();\n    if (isItOver && !Utils$Coronate.confirm(\"All rounds have completed. Are you sure you want to begin a new one?\")) {\n      return 0;\n    } else {\n      return Curry._1(tourneyDispatch, /* AddRound */0);\n    }\n  };\n  var delLastRound = function ($$event) {\n    $$event.preventDefault();\n    if (Utils$Coronate.confirm(\"Are you sure you want to delete the last round?\")) {\n      ReasonReactRouter.push(\"#/tourneys/\" + tourney[/* id */2]);\n      Utils$Coronate.last(roundList).forEach((function (match_) {\n              var whiteScore = match_[/* whiteScore */7];\n              var blackScore = match_[/* blackScore */8];\n              var whiteId = match_[/* whiteId */1];\n              var blackId = match_[/* blackId */2];\n              var whiteOrigRating = match_[/* whiteOrigRating */5];\n              var blackOrigRating = match_[/* blackOrigRating */6];\n              if (whiteScore + blackScore !== 0.0) {\n                /* array */[\n                    /* tuple */[\n                      whiteId,\n                      whiteOrigRating\n                    ],\n                    /* tuple */[\n                      blackId,\n                      blackOrigRating\n                    ]\n                  ].forEach((function (param) {\n                        var id = param[0];\n                        if (id !== Data$Coronate.dummy_id) {\n                          var matchCount = Curry._1(getPlayer, id)[/* matchCount */3];\n                          Curry._1(playersDispatch, /* SetMatchCount */Block.__(2, [\n                                  id,\n                                  matchCount - 1 | 0\n                                ]));\n                          return Curry._1(playersDispatch, /* SetRating */Block.__(3, [\n                                        id,\n                                        param[1]\n                                      ]));\n                        } else {\n                          return 0;\n                        }\n                      }));\n                return /* () */0;\n              } else {\n                return 0;\n              }\n            }));\n      Curry._1(tourneyDispatch, /* DelLastRound */1);\n      if (roundList.length === 1) {\n        return Curry._1(tourneyDispatch, /* AddRound */0);\n      } else {\n        return 0;\n      }\n    } else {\n      return 0;\n    }\n  };\n  return React.createElement(\"div\", undefined, React.createElement(\"nav\", undefined, React.createElement(\"ul\", {\n                      style: {\n                        marginTop: \"0\"\n                      }\n                    }, React.createElement(\"li\", undefined, React.createElement(\"a\", {\n                              href: \"#/tourneys\",\n                              onDragStart: noDraggy\n                            }, React.createElement(ReactFeather.ChevronLeft, { }), React.createElement(\"span\", {\n                                  className: \"sidebar__hide-on-close\"\n                                }, \" Back\")))), React.createElement(\"hr\", undefined), React.createElement(\"ul\", undefined, React.createElement(\"li\", undefined, React.createElement(\"a\", {\n                              href: basePath + \"/setup\",\n                              onDragStart: noDraggy\n                            }, React.createElement(ReactFeather.Settings, { }), React.createElement(\"span\", {\n                                  className: \"sidebar__hide-on-close\"\n                                }, \" Setup\"))), React.createElement(\"li\", undefined, React.createElement(\"a\", {\n                              href: basePath,\n                              onDragStart: noDraggy\n                            }, React.createElement(ReactFeather.Users, { }), React.createElement(\"span\", {\n                                  className: \"sidebar__hide-on-close\"\n                                }, \" Players\"))), React.createElement(\"li\", undefined, React.createElement(\"a\", {\n                              href: basePath + \"/status\",\n                              onDragStart: noDraggy\n                            }, React.createElement(ReactFeather.Activity, { }), React.createElement(\"span\", {\n                                  className: \"sidebar__hide-on-close\"\n                                }, \" Status\"))), React.createElement(\"li\", undefined, React.createElement(\"a\", {\n                              href: basePath + \"/crosstable\",\n                              onDragStart: noDraggy\n                            }, React.createElement(ReactFeather.Layers, { }), React.createElement(\"span\", {\n                                  className: \"sidebar__hide-on-close\"\n                                }, \" Crosstable\"))), React.createElement(\"li\", undefined, React.createElement(\"a\", {\n                              href: basePath + \"/scores\",\n                              onDragStart: noDraggy\n                            }, React.createElement(ReactFeather.List, { }), React.createElement(\"span\", {\n                                  className: \"sidebar__hide-on-close\"\n                                }, \" Score detail\")))), React.createElement(\"hr\", undefined), React.createElement(\"h5\", {\n                      className: \"sidebar__hide-on-close sidebar__header\"\n                    }, \"Rounds\"), React.createElement(\"ul\", {\n                      className: \"center-on-close\"\n                    }, roundList.map((function (param, id) {\n                            var match = Data$Coronate.isRoundComplete(roundList, activePlayers, id);\n                            return React.createElement(\"li\", {\n                                        key: String(id)\n                                      }, React.createElement(\"a\", {\n                                            href: basePath + (\"/round/\" + String(id)),\n                                            onDragStart: noDraggy\n                                          }, String(id + 1 | 0), match ? React.createElement(\"span\", {\n                                                  className: Cn.make(/* :: */[\n                                                        \"sidebar__hide-on-close\",\n                                                        /* :: */[\n                                                          \"caption-20\",\n                                                          /* [] */0\n                                                        ]\n                                                      ])\n                                                }, \" Complete \", React.createElement(ReactFeather.Check, { })) : React.createElement(\"span\", {\n                                                  className: Cn.make(/* :: */[\n                                                        \"sidebar__hide-on-close\",\n                                                        /* :: */[\n                                                          \"caption-20\",\n                                                          /* [] */0\n                                                        ]\n                                                      ])\n                                                }, \" Not complete \", React.createElement(ReactFeather.AlertTriangle, { }))));\n                          })))), React.createElement(\"hr\", undefined), React.createElement(\"ul\", undefined, React.createElement(\"li\", undefined, React.createElement(\"button\", {\n                          className: \"sidebar-button\",\n                          style: {\n                            width: \"100%\"\n                          },\n                          disabled: !tournament[/* isNewRoundReady */3],\n                          onClick: newRound\n                        }, React.createElement(ReactFeather.Plus, { }), React.createElement(\"span\", {\n                              className: \"sidebar__hide-on-close\"\n                            }, \" New round\"))), React.createElement(\"li\", {\n                      style: {\n                        textAlign: \"center\"\n                      }\n                    }, React.createElement(\"button\", {\n                          className: \"button-micro sidebar-button\",\n                          style: {\n                            marginTop: \"8px\"\n                          },\n                          disabled: roundList.length === 0,\n                          onClick: delLastRound\n                        }, React.createElement(ReactFeather.Trash2, { }), React.createElement(\"span\", {\n                              className: \"sidebar__hide-on-close\"\n                            }, \" Remove last round\")))));\n}\n\nvar Sidebar = /* module */[/* make */PageTourney$Sidebar];\n\nfunction sidebarFunc(tournament, param) {\n  return React.createElement(PageTourney$Sidebar, {\n              tournament: tournament\n            });\n}\n\nfunction PageTourney(Props) {\n  var tourneyId = Props.tourneyId;\n  var hashPath = Props.hashPath;\n  return React.createElement(TournamentData$Coronate.make, {\n              children: (function (tournament) {\n                  var tmp;\n                  var exit = 0;\n                  if (hashPath) {\n                    switch (hashPath[0]) {\n                      case \"\" : \n                          if (hashPath[1]) {\n                            exit = 1;\n                          } else {\n                            tmp = React.createElement(PageTourneyPlayers$Coronate.make, {\n                                  tournament: tournament\n                                });\n                          }\n                          break;\n                      case \"crosstable\" : \n                          if (hashPath[1]) {\n                            exit = 1;\n                          } else {\n                            tmp = React.createElement(PageTourneyCrossTable$Coronate.make, {\n                                  tournament: tournament\n                                });\n                          }\n                          break;\n                      case \"round\" : \n                          var match = hashPath[1];\n                          if (match && !match[1]) {\n                            tmp = React.createElement(PageRound$Coronate.make, {\n                                  roundId: Caml_format.caml_int_of_string(match[0]),\n                                  tournament: tournament\n                                });\n                          } else {\n                            exit = 1;\n                          }\n                          break;\n                      case \"scores\" : \n                          if (hashPath[1]) {\n                            exit = 1;\n                          } else {\n                            tmp = React.createElement(PageTourneyScores$Coronate.make, {\n                                  tournament: tournament\n                                });\n                          }\n                          break;\n                      case \"setup\" : \n                          if (hashPath[1]) {\n                            exit = 1;\n                          } else {\n                            tmp = React.createElement(PageTourneySetup$Coronate.make, {\n                                  tournament: tournament\n                                });\n                          }\n                          break;\n                      case \"status\" : \n                          if (hashPath[1]) {\n                            exit = 1;\n                          } else {\n                            tmp = React.createElement(PageTournamentStatus$Coronate.make, {\n                                  tournament: tournament\n                                });\n                          }\n                          break;\n                      default:\n                        exit = 1;\n                    }\n                  } else {\n                    exit = 1;\n                  }\n                  if (exit === 1) {\n                    tmp = React.createElement(Pages$Coronate.NotFound[/* make */0], { });\n                  }\n                  return React.createElement(Window$Coronate.WindowBody[/* make */0], {\n                              children: tmp,\n                              footerFunc: (function (param) {\n                                  return footerFunc(tournament, param);\n                                }),\n                              sidebarFunc: (function (param) {\n                                  return sidebarFunc(tournament, param);\n                                })\n                            });\n                }),\n              tourneyId: tourneyId\n            });\n}\n\nvar make = PageTourney;\n\nexport {\n  Footer ,\n  footerFunc ,\n  noDraggy ,\n  Sidebar ,\n  sidebarFunc ,\n  make ,\n  \n}\n/* react Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 6.0.3, PLEASE EDIT WITH CARE\n\nimport * as Block from \"bs-platform/lib/es6/block.js\";\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as React from \"react\";\nimport * as Dialog from \"@reach/dialog\";\nimport * as ReactFeather from \"react-feather\";\nimport * as Belt_MapString from \"bs-platform/lib/es6/belt_MapString.js\";\nimport * as Hooks$Coronate from \"./Hooks.bs.js\";\nimport * as Utils$Coronate from \"./Utils.bs.js\";\nimport * as Window$Coronate from \"./Window.bs.js\";\nimport * as VisuallyHidden from \"@reach/visually-hidden\";\n\nfunction s(prim) {\n  return prim;\n}\n\nvar dateSort = /* KeyDate */Block.__(3, [(function (x) {\n        return x[/* date */1];\n      })]);\n\nvar nameSort = /* KeyString */Block.__(0, [(function (x) {\n        return x[/* name */3];\n      })]);\n\nfunction PageTournamentList(Props) {\n  var match = Hooks$Coronate.Db[/* useAllTournaments */13](/* () */0);\n  var dispatch = match[1];\n  var tourneys = match[0];\n  var match$1 = Hooks$Coronate.useSortedTable(Belt_MapString.valuesToArray(tourneys), dateSort, true);\n  var sortDispatch = match$1[1];\n  var sorted = match$1[0];\n  var match$2 = React.useState((function () {\n          return \"\";\n        }));\n  var setNewTourneyName = match$2[1];\n  var newTourneyName = match$2[0];\n  var match$3 = React.useState((function () {\n          return false;\n        }));\n  var setIsDialogOpen = match$3[1];\n  var match$4 = Window$Coronate.useWindowContext(/* () */0);\n  var windowDispatch = match$4[1];\n  React.useEffect((function () {\n          Curry._1(windowDispatch, /* SetTitle */Block.__(5, [\"Tournament list\"]));\n          return (function (param) {\n                    return Curry._1(windowDispatch, /* SetTitle */Block.__(5, [\"\"]));\n                  });\n        }), /* array */[windowDispatch]);\n  React.useEffect((function () {\n          Curry._1(sortDispatch, /* SetTable */Block.__(2, [Belt_MapString.valuesToArray(tourneys)]));\n          return undefined;\n        }), /* tuple */[\n        tourneys,\n        sortDispatch\n      ]);\n  var updateNewName = function ($$event) {\n    Curry._1(setNewTourneyName, $$event.currentTarget.value);\n    return /* () */0;\n  };\n  var makeTournament = function ($$event) {\n    $$event.preventDefault();\n    var newId = Utils$Coronate.nanoid(/* () */0);\n    var newTourney_000 = /* byeQueue : array */[];\n    var newTourney_001 = /* date */new Date();\n    var newTourney_004 = /* playerIds : array */[];\n    var newTourney_005 = /* roundList : array */[];\n    var newTourney_006 = /* tieBreaks : array */[\n      0,\n      1,\n      2\n    ];\n    var newTourney = /* record */[\n      newTourney_000,\n      newTourney_001,\n      /* id */newId,\n      /* name */newTourneyName,\n      newTourney_004,\n      newTourney_005,\n      newTourney_006\n    ];\n    Curry._1(dispatch, /* SetItem */Block.__(1, [\n            newId,\n            newTourney\n          ]));\n    Curry._1(setNewTourneyName, (function (param) {\n            return \"\";\n          }));\n    Curry._1(setIsDialogOpen, (function (param) {\n            return false;\n          }));\n    return /* () */0;\n  };\n  var match$5 = Belt_MapString.isEmpty(tourneys);\n  return React.createElement(Window$Coronate.WindowBody[/* make */0], {\n              children: React.createElement(\"div\", {\n                    className: \"content-area\"\n                  }, React.createElement(\"div\", {\n                        className: \"toolbar toolbar__left\"\n                      }, React.createElement(\"button\", {\n                            onClick: (function (param) {\n                                return Curry._1(setIsDialogOpen, (function (param) {\n                                              return true;\n                                            }));\n                              })\n                          }, React.createElement(ReactFeather.Plus, { }), \" Add tournament\")), match$5 ? React.createElement(\"p\", undefined, \"No tournaments are added yet.\") : React.createElement(\"table\", undefined, React.createElement(\"caption\", undefined, \"Tournament list\"), React.createElement(\"thead\", undefined, React.createElement(\"tr\", undefined, React.createElement(\"th\", undefined, React.createElement(Hooks$Coronate.SortButton[/* make */0], {\n                                          children: \"Name\",\n                                          sortKey: nameSort,\n                                          data: sorted,\n                                          dispatch: sortDispatch\n                                        })), React.createElement(\"th\", undefined, React.createElement(Hooks$Coronate.SortButton[/* make */0], {\n                                          children: \"Date\",\n                                          sortKey: dateSort,\n                                          data: sorted,\n                                          dispatch: sortDispatch\n                                        })), React.createElement(\"th\", undefined, React.createElement(VisuallyHidden.default, {\n                                          children: \"Controls\"\n                                        })))), React.createElement(\"tbody\", {\n                              className: \"content\"\n                            }, sorted[/* table */2].map((function (t) {\n                                    return React.createElement(\"tr\", {\n                                                key: t[/* id */2],\n                                                className: \"buttons-on-hover\"\n                                              }, React.createElement(\"td\", undefined, React.createElement(\"a\", {\n                                                        href: \"#/tourneys/\" + t[/* id */2]\n                                                      }, t[/* name */3])), React.createElement(\"td\", undefined, React.createElement(Utils$Coronate.DateFormat[/* make */0], {\n                                                        date: t[/* date */1]\n                                                      })), React.createElement(\"td\", undefined, React.createElement(\"button\", {\n                                                        \"aria-label\": \"Delete \" + t[/* name */3],\n                                                        className: \"danger button-ghost\",\n                                                        title: \"Delete \" + t[/* name */3],\n                                                        onClick: (function (param) {\n                                                            var id = t[/* id */2];\n                                                            var name = t[/* name */3];\n                                                            var message = \"Are you sure you want to delete \" + (String(name) + \"?\");\n                                                            if (Utils$Coronate.confirm(message)) {\n                                                              Curry._1(dispatch, /* DelItem */Block.__(0, [id]));\n                                                            }\n                                                            return /* () */0;\n                                                          })\n                                                      }, React.createElement(ReactFeather.Trash2, { }))));\n                                  })))), React.createElement(Dialog.Dialog, {\n                        isOpen: match$3[0],\n                        onDismiss: (function (param) {\n                            return Curry._1(setIsDialogOpen, (function (param) {\n                                          return false;\n                                        }));\n                          }),\n                        children: null\n                      }, React.createElement(\"button\", {\n                            className: \"button-micro\",\n                            onClick: (function (param) {\n                                return Curry._1(setIsDialogOpen, (function (param) {\n                                              return false;\n                                            }));\n                              })\n                          }, \"Close\"), React.createElement(\"form\", {\n                            onSubmit: makeTournament\n                          }, React.createElement(\"fieldset\", undefined, React.createElement(\"legend\", undefined, \"Make a new tournament\"), React.createElement(\"label\", {\n                                    htmlFor: \"tourney-name\"\n                                  }, \"Name:\"), React.createElement(\"input\", {\n                                    id: \"tourney-name\",\n                                    name: \"tourney-name\",\n                                    placeholder: \"tournament name\",\n                                    required: true,\n                                    type: \"text\",\n                                    value: newTourneyName,\n                                    onChange: updateNewName\n                                  }), \" \", React.createElement(\"input\", {\n                                    className: \"button-primary\",\n                                    type: \"submit\",\n                                    value: \"Create\"\n                                  })))))\n            });\n}\n\nvar make = PageTournamentList;\n\nexport {\n  s ,\n  dateSort ,\n  nameSort ,\n  make ,\n  \n}\n/* react Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 6.0.3, PLEASE EDIT WITH CARE\n\nimport * as React from \"react\";\nimport * as Pages$Coronate from \"./Pages.bs.js\";\nimport * as Utils$Coronate from \"./Utils.bs.js\";\nimport * as Window$Coronate from \"./Window.bs.js\";\nimport * as ReasonReactRouter from \"reason-react/src/ReasonReactRouter.js\";\nimport * as PageOptions$Coronate from \"./PageOptions.bs.js\";\nimport * as PagePlayers$Coronate from \"./PagePlayers.bs.js\";\nimport * as PageTourney$Coronate from \"./PageTournament/PageTourney.bs.js\";\nimport * as PageTournamentList$Coronate from \"./PageTournamentList.bs.js\";\n\n((require(\"./side-effects\")));\n\nfunction App(Props) {\n  var url = ReasonReactRouter.useUrl(undefined, /* () */0);\n  var match = Utils$Coronate.hashPath(url[/* hash */1]);\n  var tmp;\n  var exit = 0;\n  if (match && match[0] === \"\") {\n    var match$1 = match[1];\n    if (match$1) {\n      switch (match$1[0]) {\n        case \"\" : \n            if (match$1[1]) {\n              exit = 1;\n            } else {\n              tmp = React.createElement(Pages$Coronate.Splash[/* make */0], { });\n            }\n            break;\n        case \"options\" : \n            if (match$1[1]) {\n              exit = 1;\n            } else {\n              tmp = React.createElement(PageOptions$Coronate.make, { });\n            }\n            break;\n        case \"players\" : \n            var id = match$1[1];\n            tmp = id ? React.createElement(PagePlayers$Coronate.make, {\n                    id: id\n                  }) : React.createElement(PagePlayers$Coronate.make, { });\n            break;\n        case \"tourneys\" : \n            var match$2 = match$1[1];\n            if (match$2) {\n              var hashPath = match$2[1];\n              var tourneyId = match$2[0];\n              tmp = hashPath ? React.createElement(PageTourney$Coronate.make, {\n                      tourneyId: tourneyId,\n                      hashPath: hashPath\n                    }) : React.createElement(PageTourney$Coronate.make, {\n                      tourneyId: tourneyId,\n                      hashPath: /* :: */[\n                        \"\",\n                        /* [] */0\n                      ]\n                    });\n            } else {\n              tmp = React.createElement(PageTournamentList$Coronate.make, { });\n            }\n            break;\n        default:\n          exit = 1;\n      }\n    } else {\n      tmp = React.createElement(Pages$Coronate.Splash[/* make */0], { });\n    }\n  } else {\n    exit = 1;\n  }\n  if (exit === 1) {\n    tmp = React.createElement(Window$Coronate.WindowBody[/* make */0], {\n          children: React.createElement(Pages$Coronate.NotFound[/* make */0], { })\n        });\n  }\n  return React.createElement(Window$Coronate.$$Window[/* make */0], {\n              children: React.createElement(\"main\", {\n                    className: \"app__main\"\n                  }, tmp),\n              className: \"app\"\n            });\n}\n\nvar make = App;\n\nexport {\n  make ,\n  \n}\n/*  Not a pure module */\n","import \"./styles\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport React, {StrictMode} from \"react\";\nimport {make as App} from \"./App.bs.js\";\nimport ReactDOM from \"react-dom\";\n\nReactDOM.render(\n    <StrictMode><App /></StrictMode>,\n    document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}